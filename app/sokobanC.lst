AS09 Assembler for M6809 [1.42].                                     Page    1
-------------------------------- sokobanC.a09 --------------------------------

-------------------------------- Symbol Table --------------------------------

              Symbol   Value        Decimal

            APL_Outp : $eebc          61116
    APL_OutputStream : $eebc          61116
            BYTE2MON : $faed          64237
            FILE_Clo : $b3b7          46007
            FILE_Del : $b3ce          46030
            FILE_Get : $b456          46166
            FILE_Lis : $bc56          48214
            FILE_Ope : $af7c          44924
            FILE_Put : $b574          46452
            getKeybo : $ef3c          61244
            getMapTi : $23c3           9155
            HEXBYTE2 : $facd          64205
            HEXWORD2 : $fa98          64152
            initDISK : $a64e          42574
            isKeyboa : $ef59          61273
                main : $2546           9542
             msDelay : $fb26          64294
              PUTSTR : $fa89          64137
            printSco : $243a           9274
            print_De : $fa89          64137
               START : $2000           8192
            sendCont : $f042          61506
            sendStri : $23e2           9186
            sendstep : $2361           9057
            setpoint : $efc1          61377
            setSound : $f025          61477
             setTile : $efe5          61413
       sMONITORSTART : $f2ed          62189
      sMonProcessCmd : $f357          62295
            updateMa : $2384           9092
            updateRA : $201e           8222
             VERSION : $2012           8210
            _GLOBALS : $0000              0
            _progEnd : $3649          13897
              _00001 : $3565          13669
              _00002 : $357f          13695
              _00003 : $35a4          13732
              _00004 : $35aa          13738
              _00005 : $35c7          13767
              _00006 : $35ca          13770
              _00007 : $35e0          13792
              _00008 : $35f6          13814
              _00009 : $360c          13836
              _00010 : $3627          13863
              _00011 : $362e          13870
              _00012 : $3634          13876
              _00020 : $3622          13858
              _02000 : $358f          13711
              _02001 : $3597          13719
              _02002 : $35a3          13731
              _04000 : $35b7          13751
              _04001 : $35be          13758
              _04002 : $35c6          13766
              _06000 : $35cf          13775
              _06001 : $35d7          13783
              _06009 : $35df          13791
              _07000 : $35e5          13797
              _07001 : $35ed          13805
AS09 Assembler for M6809 [1.42].                                     Page    2
-------------------------------- sokobanC.a09 --------------------------------

              _07009 : $35f5          13813
              _08000 : $35fb          13819
              _08001 : $3603          13827
              _08009 : $360b          13835
              _09000 : $3611          13841
              _09001 : $3619          13849
              _09009 : $3621          13857
                 _10 : $233d           9021
                _100 : $2fc8          12232
                _101 : $2ff5          12277
                _102 : $355e          13662
                _103 : $3002          12290
                _104 : $30ce          12494
                _105 : $30c5          12485
                _106 : $3090          12432
                _107 : $3078          12408
                _108 : $3090          12432
                _109 : $30cb          12491
                 _11 : $232f           9007
                _110 : $30d6          12502
                _111 : $3358          13144
                _112 : $3134          12596
                _113 : $3282          12930
                _114 : $314c          12620
                _115 : $324d          12877
                _116 : $3181          12673
                _117 : $31df          12767
                _118 : $31fc          12796
                _119 : $3282          12930
                 _12 : $233d           9021
                _120 : $3345          13125
                _121 : $329a          12954
                _122 : $32f8          13048
                _123 : $3315          13077
                _124 : $3360          13152
                _125 : $33f6          13302
                _126 : $3394          13204
                _127 : $33c9          13257
                _128 : $33fe          13310
                _129 : $355e          13662
                 _13 : $2370           9072
                _130 : $3432          13362
                _131 : $3467          13415
                _132 : $3509          13577
                _133 : $34e5          13541
                _134 : $34b7          13495
                _135 : $3506          13574
                _136 : $3506          13574
                _137 : $3503          13571
                _138 : $3527          13607
                _13_ : $236d           9069
                 _14 : $2438           9272
                 _15 : $23fb           9211
                 _16 : $2412           9234
                 _17 : $2424           9252
                 _18 : $2482           9346
                 _19 : $2444           9284
                  _2 : $220c           8716
                 _20 : $2478           9336
                 _21 : $2478           9336
                 _22 : $24c2           9410
                 _23 : $2486           9350
AS09 Assembler for M6809 [1.42].                                     Page    3
-------------------------------- sokobanC.a09 --------------------------------

                 _24 : $24b8           9400
                 _25 : $2504           9476
                 _26 : $24c6           9414
                 _27 : $24fa           9466
                 _28 : $24fa           9466
                 _29 : $2544           9540
                 _2_ : $202c           8236
                  _3 : $2348           9032
                 _30 : $2508           9480
                 _31 : $253a           9530
                 _32 : $256a           9578
                _32_ : $2554           9556
                 _33 : $258a           9610
                _33_ : $2574           9588
                 _34 : $259f           9631
                _34_ : $2594           9620
                 _35 : $2775          10101
                _35_ : $25d1           9681
                 _36 : $27aa          10154
                 _37 : $277f          10111
                 _38 : $279e          10142
                 _39 : $2826          10278
                  _4 : $2216           8726
                 _40 : $27b0          10160
                 _41 : $281a          10266
                 _42 : $281a          10266
                 _43 : $27c2          10178
                 _44 : $280e          10254
                 _45 : $28a6          10406
                 _46 : $286d          10349
                 _47 : $289a          10394
                 _48 : $3561          13665
                 _49 : $28b7          10423
                  _5 : $233d           9021
                 _50 : $2f0a          12042
                 _51 : $28fb          10491
                 _52 : $2e85          11909
                 _53 : $2913          10515
                 _54 : $2e7f          11903
                 _55 : $2938          10552
                 _56 : $2a83          10883
                 _57 : $29e4          10724
                 _58 : $29a7          10663
                 _59 : $29dd          10717
                  _6 : $22c3           8899
                 _60 : $29e4          10724
                 _61 : $2a57          10839
                 _62 : $2a77          10871
                 _63 : $2a8b          10891
                 _64 : $2bd6          11222
                 _65 : $2b37          11063
                 _66 : $2afa          11002
                 _67 : $2b30          11056
                 _68 : $2b37          11063
                 _69 : $2baa          11178
                  _7 : $223f           8767
                 _70 : $2bca          11210
                 _71 : $2bde          11230
                 _72 : $2d2c          11564
                 _73 : $2c8a          11402
                 _74 : $2c4d          11341
                 _75 : $2c83          11395
AS09 Assembler for M6809 [1.42].                                     Page    4
-------------------------------- sokobanC.a09 --------------------------------

                 _76 : $2c8a          11402
                 _77 : $2cfd          11517
                 _78 : $2d1d          11549
                 _79 : $2d34          11572
                  _8 : $22b2           8882
                 _80 : $2e7f          11903
                 _81 : $2de0          11744
                 _82 : $2da3          11683
                 _83 : $2dd9          11737
                 _84 : $2de0          11744
                 _85 : $2e53          11859
                 _86 : $2e73          11891
                 _87 : $2ebe          11966
                 _88 : $2f0a          12042
                 _89 : $2f0a          12042
                  _9 : $22c0           8896
                 _90 : $2f0a          12042
                 _91 : $2edf          11999
                 _92 : $2efe          12030
                 _93 : $2ff5          12277
                 _94 : $2f29          12073
                 _95 : $2f56          12118
                 _96 : $2f5e          12126
                 _97 : $2f8b          12171
                 _98 : $2f93          12179
                 _99 : $2fc0          12224
            __6809__ : $0001              1

209 labels used

2855 lines read, no errors in pass 1.
AS09 Assembler for M6809 [1.42].                                     Page    5
-------------------------------- sokobanC.a09 --------------------------------

                        ; coding convention:
                        ; normal function paramters are passed by the stack: a
                        ; the returned value is in D
                        ; the registers D and X can modified in the called fun
                        ;
                        ; special function lead by an 's' (e.g. sFUNCTION) is 
                        ;
                        					
                        ;{ ----------------------------------- Program testing
                        					code
2000 =                  					org     $2000
                        
                        ;-------------------- program start ------------------
2000 : 8e2012           START				ldx		#VERSION							; version at run begin			
2003 : 3410             					pshs	x
2005 : 17da81           					lbsr	PUTSTR 					
2008 : 3262             					leas	2,s
                        
200a : 108e3649         					ldy		#_progEnd							; the current program global
200e : 170535           					lbsr	main								; C environement recussive call	
2011 : 39               					rts
                        					
2012 : 0d64656d6f2030.. VERSION     		db      13,"demo 0.1, ",0					; version
                        		
                        * micro-C(ver 0.4.1), 1981-1987 Masataka Ohta, Hiroshi
                        * /***************************************************
                        * /*                                                  
                        * /* file:           main.c			                        
                        * /*                                                  
                        * /* source:        2021, written by Adrian Kundert (a
                        * /*                                                  
                        * /* description:   Sokoban game (C application for mi
                        * /*                                                  
                        * /* This library is free software; you can redistribu
                        * /* GNU Lesser General Public License as published by
                        * /* either version 2.1 of the License, or (at your op
                        * /*                                                  
                        * /* This library is distributed in the hope that it w
                        * /* without even the implied warranty of MERCHANTABIL
                        * /* See the GNU Lesser General Public License for mor
                        * /*                                                  
                        * /***************************************************
                        * 
                        * // ! Micro-C variable max 14 characters, only the fi
                        * #define true 			1
                        * #define false 			0
                        * 
                        * #define TileMemSize 	32
                        * #define RAMcontCnt 		10
                        * #define RAMtileoffset   0xE0
                        * 
                        * // APL PS2 keyboard
                        * #define UPARROW			0x5e
                        * #define LEFTARROW		0x09
                        * #define DOWNARROW		0x12
                        * #define RIGHTARROW		0x11
                        * 
                        * #define SCREEN_ROW		20
                        * #define SCREEN_COL		21
                        * #define MAP_SIZE		420 //SCREEN_ROW * SCREEN_COL
                        * 
                        * #define iEMPTY		0
AS09 Assembler for M6809 [1.42].                                     Page    6
-------------------------------- sokobanC.a09 --------------------------------

                        * #define iWALL		1
                        * #define iSTORAGE	2
                        * #define iBOX		3
                        * #define iSTO_BOX	4
                        * #define iMAN_STD	5
                        * #define iPU1		6
                        * #define iPU2_MAN	7
                        * #define iPU2_MHB	8
                        * #define iPU2_HB		9
                        * 
                        * #define offset_D  5
                        * 
                        * #define iSOUND 		5 // re-use iMAN_STD
                        * 
                        * #define PACE		35
                        *  
                        * updateRAMTile(heading, tileIndex) unsigned char head
                        * {
                        * 	unsigned char value;	
                        * 	unsigned char RAM_Container_tmp[TileMemSize];
                        * 	unsigned char n;
                        * 	unsigned char* SOKOtile;
                        * 	SOKOtile = {
201e :                  updateRA
201e : 3440             	pshs	u
2020 : 33e4             	leau	,s
2022 : 32e8dc           	leas	-36,s
                        * 	
                        * 	// EMPTY
                        * 	0x6C, 0x6C, 0x6C, 0x6C,
                        * 	0x6C, 0x6C, 0x6C, 0x6C,
                        * 	0x6C, 0x6C, 0x6C, 0x6C,
                        * 	0x6C, 0x6C, 0x6C, 0x6C,
                        * 	0x6C, 0x6C, 0x6C, 0x6C,
                        * 	0x6C, 0x6C, 0x6C, 0x6C,
                        * 	0x6C, 0x6C, 0x6C, 0x6C,
                        * 	0x6C, 0x6C, 0x6C, 0x6C,
                        * 
                        * 	// WALL,
                        * 	0x14, 0xB4, 0x14, 0xB4,
                        * 	0x14, 0xB4, 0x14, 0xB4,
                        * 	0x0, 0x0, 0x0, 0x0,
                        * 	0xB4, 0xA0, 0xB4, 0xA0,
                        * 	0xB4, 0xA0, 0xB4, 0xA0,
                        * 	0x0, 0x0, 0x0, 0x0,
                        * 	0x14, 0xB4, 0x14, 0xB4,
                        * 	0x14, 0xB4, 0x14, 0xB4,
                        * 
                        * 	// STORAGE
                        * 	0x6C, 0x60, 0xC, 0x6C,
                        * 	0x6C, 0xC, 0x60, 0x6C,
                        * 	0x60, 0x6C, 0x6C, 0xC,
                        * 	0xC, 0x6C, 0x6C, 0x60,
                        * 	0xC, 0x6C, 0x6C, 0x60,
                        * 	0x60, 0x6C, 0x6C, 0xC,
                        * 	0x6C, 0xC, 0x60, 0x6C,
                        * 	0x6C, 0x60, 0xC, 0x6C,
                        * 
                        * 	// BOX
                        * 	0x0, 0x0, 0x0, 0x0,
                        * 	0x18, 0xD8, 0xD8, 0xC0,
                        * 	0x18, 0xD8, 0xD8, 0xC0,
AS09 Assembler for M6809 [1.42].                                     Page    7
-------------------------------- sokobanC.a09 --------------------------------

                        * 	0x18, 0xD8, 0xD8, 0xC0,
                        * 	0x18, 0xD8, 0xD8, 0xC0,
                        * 	0x18, 0xD8, 0xD8, 0xC0,
                        * 	0x18, 0xD8, 0xD8, 0xC0,
                        * 	0x0, 0x0, 0x0, 0x0,
                        * 
                        * 	// STORED_BOX
                        * 	0xFC, 0xFC, 0xFC, 0xFC,
                        * 	0xF8, 0xD8, 0xD8, 0xDC,
                        * 	0xF8, 0xD8, 0xD8, 0xDC,
                        * 	0xF8, 0xD8, 0xD8, 0xDC,
                        * 	0xF8, 0xD8, 0xD8, 0xDC,
                        * 	0xF8, 0xD8, 0xD8, 0xDC,
                        * 	0xF8, 0xD8, 0xD8, 0xDC,
                        * 	0xFC, 0xFC, 0xFC, 0xFC,
                        * 
                        * 	// MAN_STANDING_RIGHT
                        * 	0x6C, 0x6C, 0x6C, 0x6C,
                        * 	0x6C, 0x6C, 0xCC, 0x6C,
                        * 	0x6C, 0x74, 0xAC, 0x6C,
                        * 	0x6C, 0x70, 0x8C, 0x6C,
                        * 	0x6C, 0x70, 0x90, 0x6C,
                        * 	0x6C, 0x70, 0x8C, 0x6C,
                        * 	0x6C, 0x74, 0xAC, 0x6C,
                        * 	0x6C, 0x6C, 0xCC, 0x6C,
                        * 
                        * 	// PUSHINGtwo_RIGHT
                        * 	0x6C, 0x6C, 0x6C, 0x6C,
                        * 	0x6C, 0x6C, 0x74, 0xB8,
                        * 	0x6C, 0x6C, 0x74, 0x6C,
                        * 	0x6C, 0x60, 0xB0, 0x8C,
                        * 	0x6C, 0x6C, 0xB0, 0x90,
                        * 	0x6C, 0x6C, 0xB0, 0x80,
                        * 	0x6C, 0x6C, 0x74, 0x6C,
                        * 	0x6C, 0x6C, 0x74, 0xB8,
                        * 
                        * 	// PUSHINGtwo_MAN_ONLY_RIGHT
                        * 	0x6C, 0x6C, 0x6C, 0x6C,
                        * 	0x6C, 0xB4, 0xCC, 0x6C,
                        * 	0x6C, 0xAC, 0x6C, 0x6C,
                        * 	0x74, 0x90, 0x0C, 0x6C,
                        * 	0x74, 0x90, 0x8C, 0x6C,
                        * 	0x14, 0x90, 0x6C, 0x6C,
                        * 	0x6C, 0xAC, 0x6C, 0x6C,
                        * 	0x6C, 0xB4, 0xCC, 0x6C,
                        * 
                        * 	// PUSHINGtwo_MAN_BOX_RIGHT
                        * 	0x6C, 0x6C, 0x60, 0x0, 	// pushing half box
                        * 	0x6C, 0xB4, 0xC0, 0xD8,
                        * 	0x6C, 0xAC, 0x60, 0xD8,
                        * 	0x74, 0x90, 0x00, 0xD8,
                        * 	0x74, 0x90, 0x80, 0xD8,
                        * 	0x14, 0x90, 0x60, 0xD8,
                        * 	0x6C, 0xAC, 0x60, 0xD8,
                        * 	0x6C, 0xB4, 0xC0, 0x0,
                        * 
                        * 	// PUSHINGtwo_HALF_BOX_RIGHT
                        * 	0x00, 0x00, 0xC, 0x6C,	// next tile second half box
                        * 	0xD8, 0xD8, 0xC, 0x6C,
                        * 	0xD8, 0xD8, 0xC, 0x6C,
                        * 	0xD8, 0xD8, 0xC, 0x6C,
                        * 	0xD8, 0xD8, 0xC, 0x6C,
AS09 Assembler for M6809 [1.42].                                     Page    8
-------------------------------- sokobanC.a09 --------------------------------

                        * 	0xD8, 0xD8, 0xC, 0x6C,
                        * 	0xD8, 0xD8, 0xC, 0x6C,
                        * 	0x00, 0x00, 0xC, 0x6C,
                        * 
                        * 	//-------- rotated ----------//
                        * 	// iMAN_STANDING_Down
                        * 	0x6C, 0x6C, 0x6C, 0x6C,
                        * 	0x6C, 0x6C, 0x6C, 0x6C,
                        * 	0x6C, 0x6C, 0x6C, 0x6C,
                        * 	0x6C, 0xB0, 0x90, 0xAC,
                        * 	0x78, 0xB0, 0x90, 0xB8,
                        * 	0x6C, 0x6C, 0x8C, 0x6C,
                        * 	0x6C, 0x6C, 0x6C, 0x6C,
                        * 	0x6C, 0x6C, 0x6C, 0x6C,
                        * 
                        * 	// iPUSHINGone_Down
                        *     0x6C, 0x6C, 0x6C, 0x6C,
                        *     0x6C, 0x6C, 0x6C, 0x6C,
                        *     0x6C, 0x6C, 0x6C, 0x6C,
                        *     0x6C, 0x60, 0x6C, 0x6C,
                        *     0x6C, 0x74, 0xB4, 0x6C,
                        *     0x74, 0xB0, 0x90, 0xB4,
                        *     0x74, 0x70, 0x90, 0x74,
                        *     0x78, 0x6C, 0x80, 0x78,
                        * 	
                        * 	// iPUSHINGtwo_MAN_ONLY_Down
                        *     0x6C, 0x6C, 0x60, 0x6C,
                        *     0x6C, 0x74, 0xB4, 0x6C,
                        *     0x74, 0xB0, 0x90, 0xB4,
                        *     0x74, 0x70, 0x90, 0x74,
                        *     0x78, 0x60, 0x8C, 0x78,
                        *     0x6C, 0x6C, 0x6C, 0x6C,
                        *     0x6C, 0x6C, 0x6C, 0x6C,
                        *     0x6C, 0x6C, 0x6C, 0x6C,
                        * 	
                        * 	// iPUSHINGtwo_MAN_BOX_Down
                        *     0x6C, 0x6C, 0x60, 0x6C,
                        *     0x6C, 0x74, 0xB4, 0x6C,
                        *     0x74, 0xB0, 0x90, 0xB4,
                        *     0x74, 0x70, 0x90, 0x74,
                        *     0x78, 0x60, 0x8C, 0x78,
                        *     0x00, 0x00, 0x00, 0x00,
                        *     0x18, 0xD8, 0xD8, 0xC0,
                        *     0x18, 0xD8, 0xD8, 0xC0,
                        * 	
                        * 	// iPUSHINGtwo_HALF_BOX_Down
                        *     0x18, 0xD8, 0xD8, 0xC0,
                        *     0x18, 0xD8, 0xD8, 0xC0,
                        *     0x18, 0xD8, 0xD8, 0xC0,
                        *     0x18, 0xD8, 0xD8, 0xC0,
                        *     0x00, 0x00, 0x00, 0x00,
                        *     0x6C, 0x6C, 0x6C, 0x6C,
                        *     0x6C, 0x6C, 0x6C, 0x6C,
                        *     0x6C, 0x6C, 0x6C, 0x6C
                        * 	};  //  end of tile
2025 : 308d0003         	leax	_2_,pc
2029 : 1601e0           	lbra	_2
202c :                  _2_
202c : 6c6c6c6c6c6c6c6c 	fcb	$6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c
2034 : 6c6c6c6c6c6c6c6c 	fcb	$6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c
203c : 6c6c6c6c6c6c6c6c 	fcb	$6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c
2044 : 6c6c6c6c6c6c6c6c 	fcb	$6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c
AS09 Assembler for M6809 [1.42].                                     Page    9
-------------------------------- sokobanC.a09 --------------------------------

204c : 14b414b414b414b4 	fcb	$14, $ffffffb4, $14, $ffffffb4, $14, $ffffffb4, $
2054 : 00000000b4a0b4a0 	fcb	$0, $0, $0, $0, $ffffffb4, $ffffffa0, $ffffffb4, 
205c : b4a0b4a000000000 	fcb	$ffffffb4, $ffffffa0, $ffffffb4, $ffffffa0, $0, $
2064 : 14b414b414b414b4 	fcb	$14, $ffffffb4, $14, $ffffffb4, $14, $ffffffb4, $
206c : 6c600c6c6c0c606c 	fcb	$6c, $60, $c, $6c, $6c, $c, $60, $6c
2074 : 606c6c0c0c6c6c60 	fcb	$60, $6c, $6c, $c, $c, $6c, $6c, $60
207c : 0c6c6c60606c6c0c 	fcb	$c, $6c, $6c, $60, $60, $6c, $6c, $c
2084 : 6c0c606c6c600c6c 	fcb	$6c, $c, $60, $6c, $6c, $60, $c, $6c
208c : 0000000018d8d8c0 	fcb	$0, $0, $0, $0, $18, $ffffffd8, $ffffffd8, $fffff
2094 : 18d8d8c018d8d8c0 	fcb	$18, $ffffffd8, $ffffffd8, $ffffffc0, $18, $fffff
209c : 18d8d8c018d8d8c0 	fcb	$18, $ffffffd8, $ffffffd8, $ffffffc0, $18, $fffff
20a4 : 18d8d8c000000000 	fcb	$18, $ffffffd8, $ffffffd8, $ffffffc0, $0, $0, $0,
20ac : fcfcfcfcf8d8d8dc 	fcb	$fffffffc, $fffffffc, $fffffffc, $fffffffc, $ffff
20b4 : f8d8d8dcf8d8d8dc 	fcb	$fffffff8, $ffffffd8, $ffffffd8, $ffffffdc, $ffff
20bc : f8d8d8dcf8d8d8dc 	fcb	$fffffff8, $ffffffd8, $ffffffd8, $ffffffdc, $ffff
20c4 : f8d8d8dcfcfcfcfc 	fcb	$fffffff8, $ffffffd8, $ffffffd8, $ffffffdc, $ffff
20cc : 6c6c6c6c6c6ccc6c 	fcb	$6c, $6c, $6c, $6c, $6c, $6c, $ffffffcc, $6c
20d4 : 6c74ac6c6c708c6c 	fcb	$6c, $74, $ffffffac, $6c, $6c, $70, $ffffff8c, $6
20dc : 6c70906c6c708c6c 	fcb	$6c, $70, $ffffff90, $6c, $6c, $70, $ffffff8c, $6
20e4 : 6c74ac6c6c6ccc6c 	fcb	$6c, $74, $ffffffac, $6c, $6c, $6c, $ffffffcc, $6
20ec : 6c6c6c6c6c6c74b8 	fcb	$6c, $6c, $6c, $6c, $6c, $6c, $74, $ffffffb8
20f4 : 6c6c746c6c60b08c 	fcb	$6c, $6c, $74, $6c, $6c, $60, $ffffffb0, $ffffff8
20fc : 6c6cb0906c6cb080 	fcb	$6c, $6c, $ffffffb0, $ffffff90, $6c, $6c, $ffffff
2104 : 6c6c746c6c6c74b8 	fcb	$6c, $6c, $74, $6c, $6c, $6c, $74, $ffffffb8
210c : 6c6c6c6c6cb4cc6c 	fcb	$6c, $6c, $6c, $6c, $6c, $ffffffb4, $ffffffcc, $6
2114 : 6cac6c6c74900c6c 	fcb	$6c, $ffffffac, $6c, $6c, $74, $ffffff90, $c, $6c
211c : 74908c6c14906c6c 	fcb	$74, $ffffff90, $ffffff8c, $6c, $14, $ffffff90, $
2124 : 6cac6c6c6cb4cc6c 	fcb	$6c, $ffffffac, $6c, $6c, $6c, $ffffffb4, $ffffff
212c : 6c6c60006cb4c0d8 	fcb	$6c, $6c, $60, $0, $6c, $ffffffb4, $ffffffc0, $ff
2134 : 6cac60d8749000d8 	fcb	$6c, $ffffffac, $60, $ffffffd8, $74, $ffffff90, $
213c : 749080d8149060d8 	fcb	$74, $ffffff90, $ffffff80, $ffffffd8, $14, $fffff
2144 : 6cac60d86cb4c000 	fcb	$6c, $ffffffac, $60, $ffffffd8, $6c, $ffffffb4, $
214c : 00000c6cd8d80c6c 	fcb	$0, $0, $c, $6c, $ffffffd8, $ffffffd8, $c, $6c
2154 : d8d80c6cd8d80c6c 	fcb	$ffffffd8, $ffffffd8, $c, $6c, $ffffffd8, $ffffff
215c : d8d80c6cd8d80c6c 	fcb	$ffffffd8, $ffffffd8, $c, $6c, $ffffffd8, $ffffff
2164 : d8d80c6c00000c6c 	fcb	$ffffffd8, $ffffffd8, $c, $6c, $0, $0, $c, $6c
216c : 6c6c6c6c6c6c6c6c 	fcb	$6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c
2174 : 6c6c6c6c6cb090ac 	fcb	$6c, $6c, $6c, $6c, $6c, $ffffffb0, $ffffff90, $f
217c : 78b090b86c6c8c6c 	fcb	$78, $ffffffb0, $ffffff90, $ffffffb8, $6c, $6c, $
2184 : 6c6c6c6c6c6c6c6c 	fcb	$6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c
218c : 6c6c6c6c6c6c6c6c 	fcb	$6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c
2194 : 6c6c6c6c6c606c6c 	fcb	$6c, $6c, $6c, $6c, $6c, $60, $6c, $6c
219c : 6c74b46c74b090b4 	fcb	$6c, $74, $ffffffb4, $6c, $74, $ffffffb0, $ffffff
21a4 : 74709074786c8078 	fcb	$74, $70, $ffffff90, $74, $78, $6c, $ffffff80, $7
21ac : 6c6c606c6c74b46c 	fcb	$6c, $6c, $60, $6c, $6c, $74, $ffffffb4, $6c
21b4 : 74b090b474709074 	fcb	$74, $ffffffb0, $ffffff90, $ffffffb4, $74, $70, $
21bc : 78608c786c6c6c6c 	fcb	$78, $60, $ffffff8c, $78, $6c, $6c, $6c, $6c
21c4 : 6c6c6c6c6c6c6c6c 	fcb	$6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c
21cc : 6c6c606c6c74b46c 	fcb	$6c, $6c, $60, $6c, $6c, $74, $ffffffb4, $6c
21d4 : 74b090b474709074 	fcb	$74, $ffffffb0, $ffffff90, $ffffffb4, $74, $70, $
21dc : 78608c7800000000 	fcb	$78, $60, $ffffff8c, $78, $0, $0, $0, $0
21e4 : 18d8d8c018d8d8c0 	fcb	$18, $ffffffd8, $ffffffd8, $ffffffc0, $18, $fffff
21ec : 18d8d8c018d8d8c0 	fcb	$18, $ffffffd8, $ffffffd8, $ffffffc0, $18, $fffff
21f4 : 18d8d8c018d8d8c0 	fcb	$18, $ffffffd8, $ffffffd8, $ffffffc0, $18, $fffff
21fc : 000000006c6c6c6c 	fcb	$0, $0, $0, $0, $6c, $6c, $6c, $6c
2204 : 6c6c6c6c6c6c6c6c 	fcb	$6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c
220c :                  _2
220c : 1f10             	tfr	x,d
220e : edc8dc           	std	-36,u
                        * 		
                        * 	for (n = 0; n < TileMemSize; n++) {			
2211 : 4f               	clra
AS09 Assembler for M6809 [1.42].                                     Page   10
-------------------------------- sokobanC.a09 --------------------------------

2212 : 5f               	clrb
2213 : e7c8de           	stb	-34,u
2216 :                  _4
2216 : e6c8de           	ldb	-34,u
2219 : 4f               	clra
221a : 830020           	subd	#$20
221d : 10240127         	lbhs	_3
                        * 		if ((heading == RIGHTARROW) || (heading == LEFTARR
2221 : e645             	ldb	5,u
2223 : 4f               	clra
2224 : 830011           	subd	#$11
2227 : 10270014         	lbeq	_7
222b : e645             	ldb	5,u
222d : 4f               	clra
222e : 830009           	subd	#$9
2231 : 1027000a         	lbeq	_7
2235 : e647             	ldb	7,u
2237 : 4f               	clra
2238 : 830004           	subd	#$4
223b : 10220084         	lbhi	_6
223f :                  _7
                        * 			// default tile (right heading)
                        * 				value = SOKOtile[TileMemSize * tileIndex + n];
223f : e6c8de           	ldb	-34,u
2242 : 4f               	clra
2243 : 3406             	pshs	d
2245 : cc0020           	ldd	#$20
2248 : 3406             	pshs	d
224a : e647             	ldb	7,u
224c : 4f               	clra
224d : 3510             	puls	x
224f : 171313           	lbsr	_00001
2252 : e3e1             	addd	,s++
2254 : aec8dc           	ldx	-36,u
2257 : e68b             	ldb	d,x
2259 : 4f               	clra
225a : e75f             	stb	-1,u
                        * 			if ((heading == LEFTARROW) && (tileIndex > iSTO_B
225c : e645             	ldb	5,u
225e : 4f               	clra
225f : 830009           	subd	#$9
2262 : 1026004c         	lbne	_8
2266 : e647             	ldb	7,u
2268 : 4f               	clra
2269 : 830004           	subd	#$4
226c : 10230042         	lbls	_8
                        * 				// invert the tile
                        * 				value = ((value << 3) & 0xe0) | ((value >> 3) & 
2270 : cc0003           	ldd	#$3
2273 : 3406             	pshs	d
2275 : e65f             	ldb	-1,u
2277 : 4f               	clra
2278 : 3510             	puls	x
227a : 17138f           	lbsr	_00009
227d : 8400             	anda	#$0
227f : c41c             	andb	#$1c
2281 : 3406             	pshs	d
2283 : cc0003           	ldd	#$3
2286 : 3406             	pshs	d
2288 : e65f             	ldb	-1,u
228a : 4f               	clra
228b : 3510             	puls	x
AS09 Assembler for M6809 [1.42].                                     Page   11
-------------------------------- sokobanC.a09 --------------------------------

228d : 171350           	lbsr	_00007
2290 : 8400             	anda	#$0
2292 : c4e0             	andb	#$e0
2294 : aae0             	ora	,s+
2296 : eae0             	orb	,s+
2298 : e75f             	stb	-1,u
                        * 				RAM_Container_tmp[TileMemSize-1 - n] = value;
229a : e6c8de           	ldb	-34,u
229d : 4f               	clra
229e : 3406             	pshs	d
22a0 : cc001f           	ldd	#$1f
22a3 : a3e1             	subd	,s++
22a5 : 30c8df           	leax	-33,u
22a8 : 308b             	leax	d,x
22aa : e65f             	ldb	-1,u
22ac : 4f               	clra
22ad : e700             	stb	0,x
                        * 			}
                        * 			else
22af : 16000e           	lbra	_9
22b2 :                  _8
                        * 				RAM_Container_tmp[n] = value;				
22b2 : e6c8de           	ldb	-34,u
22b5 : 4f               	clra
22b6 : 30c8df           	leax	-33,u
22b9 : 308b             	leax	d,x
22bb : e65f             	ldb	-1,u
22bd : 4f               	clra
22be : e700             	stb	0,x
                        * 		}
22c0 :                  _9
                        * 		else {
22c0 : 16007a           	lbra	_10
22c3 :                  _6
                        * 			// 90° rotated tile (down heading)
                        * 				value = SOKOtile[TileMemSize * (tileIndex + offs
22c3 : e6c8de           	ldb	-34,u
22c6 : 4f               	clra
22c7 : 3406             	pshs	d
22c9 : cc0020           	ldd	#$20
22cc : 3406             	pshs	d
22ce : e647             	ldb	7,u
22d0 : 4f               	clra
22d1 : c30005           	addd	#$5
22d4 : 3510             	puls	x
22d6 : 17128c           	lbsr	_00001
22d9 : e3e1             	addd	,s++
22db : aec8dc           	ldx	-36,u
22de : e68b             	ldb	d,x
22e0 : 4f               	clra
22e1 : e75f             	stb	-1,u
                        * 			if (heading == UPARROW) {
22e3 : e645             	ldb	5,u
22e5 : 4f               	clra
22e6 : 83005e           	subd	#$5e
22e9 : 10260042         	lbne	_11
                        * 				// invert the tile
                        * 				value = ((value << 3) & 0xe0) | ((value >> 3) & 
22ed : cc0003           	ldd	#$3
22f0 : 3406             	pshs	d
22f2 : e65f             	ldb	-1,u
22f4 : 4f               	clra
AS09 Assembler for M6809 [1.42].                                     Page   12
-------------------------------- sokobanC.a09 --------------------------------

22f5 : 3510             	puls	x
22f7 : 171312           	lbsr	_00009
22fa : 8400             	anda	#$0
22fc : c41c             	andb	#$1c
22fe : 3406             	pshs	d
2300 : cc0003           	ldd	#$3
2303 : 3406             	pshs	d
2305 : e65f             	ldb	-1,u
2307 : 4f               	clra
2308 : 3510             	puls	x
230a : 1712d3           	lbsr	_00007
230d : 8400             	anda	#$0
230f : c4e0             	andb	#$e0
2311 : aae0             	ora	,s+
2313 : eae0             	orb	,s+
2315 : e75f             	stb	-1,u
                        * 				RAM_Container_tmp[TileMemSize-1 - n] = value;
2317 : e6c8de           	ldb	-34,u
231a : 4f               	clra
231b : 3406             	pshs	d
231d : cc001f           	ldd	#$1f
2320 : a3e1             	subd	,s++
2322 : 30c8df           	leax	-33,u
2325 : 308b             	leax	d,x
2327 : e65f             	ldb	-1,u
2329 : 4f               	clra
232a : e700             	stb	0,x
                        * 			}
                        * 			else
232c : 16000e           	lbra	_12
232f :                  _11
                        * 				RAM_Container_tmp[n] = value;
232f : e6c8de           	ldb	-34,u
2332 : 4f               	clra
2333 : 30c8df           	leax	-33,u
2336 : 308b             	leax	d,x
2338 : e65f             	ldb	-1,u
233a : 4f               	clra
233b : e700             	stb	0,x
                        * 		}			
233d :                  _12
                        * 	}
233d :                  _10
                        * 	sendContainerData(tileIndex + RAMtileoffset -'0', R
233d :                  _5
233d : 30c8de           	leax	-34,u
2340 : e684             	ldb	,x
2342 : 6c84             	inc	,x
2344 : 4f               	clra
2345 : 16fece           	lbra	_4
2348 :                  _3
2348 : 30c8df           	leax	-33,u
234b : 3410             	pshs	x
234d : e647             	ldb	7,u
234f : 1d               	sex
2350 : c300e0           	addd	#$e0
2353 : 830030           	subd	#$30
2356 : 3406             	pshs	d
2358 : 17cce7           	lbsr	sendCont
235b : 3264             	leas	4,s
                        * }
235d : 32c4             	leas	,u
AS09 Assembler for M6809 [1.42].                                     Page   13
-------------------------------- sokobanC.a09 --------------------------------

235f : 35c0             	puls	u,pc
                        * 
                        * sendstepSound() {
                        * 		
                        * 	// re-use the standing data container for the sound
                        * 	unsigned char* step_sound;
                        * 	step_sound = {1, 200, 0};
2361 :                  sendstep
2361 : 3440             	pshs	u
2363 : 33e4             	leau	,s
2365 : 327e             	leas	-2,s
2367 : 308d0002         	leax	_13_,pc
236b : 2003             	bra	_13
236d :                  _13_
236d : 01c800           	fcb	$1, $ffffffc8, $0
2370 :                  _13
2370 : 1f10             	tfr	x,d
2372 : ed5e             	std	-2,u
                        * 	sendContainerData(iSOUND + RAMtileoffset - '0', ste
2374 : ec5e             	ldd	-2,u
2376 : 3406             	pshs	d
2378 : cc00b5           	ldd	#$b5
237b : 3406             	pshs	d
237d : 17ccc2           	lbsr	sendCont
2380 : 3264             	leas	4,s
                        * }
2382 : 35c6             	puls	d,u,pc
                        * 
                        * updateMap(pMap, x, y, tileIndex) unsigned char* pMap
                        * {
                        * 	
                        * 	pMap[y*SCREEN_COL + x] = tileIndex;
2384 :                  updateMa
2384 : 3440             	pshs	u
2386 : 33e4             	leau	,s
2388 : e647             	ldb	7,u
238a : 4f               	clra
238b : 3406             	pshs	d
238d : cc0015           	ldd	#$15
2390 : 3406             	pshs	d
2392 : e649             	ldb	9,u
2394 : 4f               	clra
2395 : 3510             	puls	x
2397 : 1711cb           	lbsr	_00001
239a : e3e1             	addd	,s++
239c : ae44             	ldx	4,u
239e : 308b             	leax	d,x
23a0 : e64b             	ldb	11,u
23a2 : 4f               	clra
23a3 : e700             	stb	0,x
                        * 	
                        * 	setpointXY(x, y); setTile(tileIndex + RAMtileoffset
23a5 : e649             	ldb	9,u
23a7 : 4f               	clra
23a8 : 3406             	pshs	d
23aa : e647             	ldb	7,u
23ac : 4f               	clra
23ad : 3406             	pshs	d
23af : 17cc0f           	lbsr	setpoint
23b2 : 3264             	leas	4,s
23b4 : e64b             	ldb	11,u
23b6 : 4f               	clra
AS09 Assembler for M6809 [1.42].                                     Page   14
-------------------------------- sokobanC.a09 --------------------------------

23b7 : c300e0           	addd	#$e0
23ba : 3406             	pshs	d
23bc : 17cc26           	lbsr	setTile
23bf : 3262             	leas	2,s
                        * }
23c1 : 35c0             	puls	u,pc
                        * 
                        * getMapTileIndex(pMap, x, y) unsigned char* pMap; uns
                        * {	
                        * 	return pMap[y*SCREEN_COL + x];
23c3 :                  getMapTi
23c3 : 3440             	pshs	u
23c5 : 33e4             	leau	,s
23c7 : e647             	ldb	7,u
23c9 : 4f               	clra
23ca : 3406             	pshs	d
23cc : cc0015           	ldd	#$15
23cf : 3406             	pshs	d
23d1 : e649             	ldb	9,u
23d3 : 4f               	clra
23d4 : 3510             	puls	x
23d6 : 17118c           	lbsr	_00001
23d9 : e3e1             	addd	,s++
23db : ae44             	ldx	4,u
23dd : e68b             	ldb	d,x
23df : 4f               	clra
                        * }
23e0 : 35c0             	puls	u,pc
                        * 
                        * sendString(x, y, str) unsigned char x; unsigned char
                        * {
                        * 	unsigned char n,c;
                        * 	n = 0;
23e2 :                  sendStri
23e2 : 3440             	pshs	u
23e4 : 33e4             	leau	,s
23e6 : 327e             	leas	-2,s
23e8 : 4f               	clra
23e9 : 5f               	clrb
23ea : e75f             	stb	-1,u
                        * 	setpointXY(x, y); 
23ec : e647             	ldb	7,u
23ee : 4f               	clra
23ef : 3406             	pshs	d
23f1 : e645             	ldb	5,u
23f3 : 4f               	clra
23f4 : 3406             	pshs	d
23f6 : 17cbc8           	lbsr	setpoint
23f9 : 3264             	leas	4,s
                        * 	while(1) {
23fb :                  _15
                        * 		c = str[n];
23fb : e65f             	ldb	-1,u
23fd : 4f               	clra
23fe : ae48             	ldx	8,u
2400 : e68b             	ldb	d,x
2402 : 4f               	clra
2403 : e75e             	stb	-2,u
                        * 		if (c == 0) break;
2405 : e65e             	ldb	-2,u
2407 : 4f               	clra
2408 : 830000           	subd	#$0
AS09 Assembler for M6809 [1.42].                                     Page   15
-------------------------------- sokobanC.a09 --------------------------------

240b : 10260003         	lbne	_16
240f : 160026           	lbra	_14
                        * 		if (c >= 'A') c -= '@';	// re-mapping ASCII to PET
2412 :                  _16
2412 : e65e             	ldb	-2,u
2414 : 4f               	clra
2415 : 830041           	subd	#$41
2418 : 10250008         	lblo	_17
241c : e65e             	ldb	-2,u
241e : 4f               	clra
241f : 830040           	subd	#$40
2422 : e75e             	stb	-2,u
                        * 		setTile(c);
2424 :                  _17
2424 : e65e             	ldb	-2,u
2426 : 4f               	clra
2427 : 3406             	pshs	d
2429 : 17cbb9           	lbsr	setTile
242c : 3262             	leas	2,s
                        * 		n++;
242e : 305f             	leax	-1,u
2430 : e684             	ldb	,x
2432 : 6c84             	inc	,x
2434 : 4f               	clra
                        * 	}
                        * }
2435 : 16ffc3           	lbra	_15
2438 :                  _14
2438 : 35c6             	puls	d,u,pc
                        * 
                        * #define stringSize 	4
                        * printScoreboard(moveStr, pushStr) unsigned char* mov
                        * {
                        * 	unsigned char n;
                        * 	for (n = 0; n < stringSize-1; n++) {
243a :                  printSco
243a : 3440             	pshs	u
243c : 33e4             	leau	,s
243e : 327f             	leas	-1,s
2440 : 4f               	clra
2441 : 5f               	clrb
2442 : e75f             	stb	-1,u
2444 :                  _19
2444 : e65f             	ldb	-1,u
2446 : 4f               	clra
2447 : 830003           	subd	#$3
244a : 10240034         	lbhs	_18
                        * 		if (moveStr[n] > '9') {
244e : e65f             	ldb	-1,u
2450 : 4f               	clra
2451 : ae44             	ldx	4,u
2453 : e68b             	ldb	d,x
2455 : 4f               	clra
2456 : 830039           	subd	#$39
2459 : 1023001b         	lbls	_21
                        * 			moveStr[n] = '0';
245d : e65f             	ldb	-1,u
245f : 4f               	clra
2460 : ae44             	ldx	4,u
2462 : 308b             	leax	d,x
2464 : cc0030           	ldd	#$30
2467 : e700             	stb	0,x
AS09 Assembler for M6809 [1.42].                                     Page   16
-------------------------------- sokobanC.a09 --------------------------------

                        * 			moveStr[n+1]++;
2469 : e65f             	ldb	-1,u
246b : 4f               	clra
246c : c30001           	addd	#$1
246f : ae44             	ldx	4,u
2471 : 308b             	leax	d,x
2473 : e684             	ldb	,x
2475 : 6c84             	inc	,x
2477 : 4f               	clra
                        * 		}
                        * 	}	
2478 :                  _21
                        * 	for (n = 0; n < stringSize; n++) {
2478 :                  _20
2478 : 305f             	leax	-1,u
247a : e684             	ldb	,x
247c : 6c84             	inc	,x
247e : 4f               	clra
247f : 16ffc2           	lbra	_19
2482 :                  _18
2482 : 4f               	clra
2483 : 5f               	clrb
2484 : e75f             	stb	-1,u
2486 :                  _23
2486 : e65f             	ldb	-1,u
2488 : 4f               	clra
2489 : 830004           	subd	#$4
248c : 10240032         	lbhs	_22
                        * 		setpointXY(n+5, 19); setTile(moveStr[stringSize-1-
2490 : cc0013           	ldd	#$13
2493 : 3406             	pshs	d
2495 : e65f             	ldb	-1,u
2497 : 4f               	clra
2498 : c30005           	addd	#$5
249b : 3406             	pshs	d
249d : 17cb21           	lbsr	setpoint
24a0 : 3264             	leas	4,s
24a2 : e65f             	ldb	-1,u
24a4 : 4f               	clra
24a5 : 3406             	pshs	d
24a7 : cc0003           	ldd	#$3
24aa : a3e1             	subd	,s++
24ac : ae44             	ldx	4,u
24ae : e68b             	ldb	d,x
24b0 : 4f               	clra
24b1 : 3406             	pshs	d
24b3 : 17cb2f           	lbsr	setTile
24b6 : 3262             	leas	2,s
                        * 	}
                        * 
                        * 
                        * 	for (n = 0; n < stringSize-1; n++) {
24b8 :                  _24
24b8 : 305f             	leax	-1,u
24ba : e684             	ldb	,x
24bc : 6c84             	inc	,x
24be : 4f               	clra
24bf : 16ffc4           	lbra	_23
24c2 :                  _22
24c2 : 4f               	clra
24c3 : 5f               	clrb
24c4 : e75f             	stb	-1,u
AS09 Assembler for M6809 [1.42].                                     Page   17
-------------------------------- sokobanC.a09 --------------------------------

24c6 :                  _26
24c6 : e65f             	ldb	-1,u
24c8 : 4f               	clra
24c9 : 830003           	subd	#$3
24cc : 10240034         	lbhs	_25
                        * 		if (pushStr[n] > '9') {
24d0 : e65f             	ldb	-1,u
24d2 : 4f               	clra
24d3 : ae46             	ldx	6,u
24d5 : e68b             	ldb	d,x
24d7 : 4f               	clra
24d8 : 830039           	subd	#$39
24db : 1023001b         	lbls	_28
                        * 			pushStr[n] = '0';
24df : e65f             	ldb	-1,u
24e1 : 4f               	clra
24e2 : ae46             	ldx	6,u
24e4 : 308b             	leax	d,x
24e6 : cc0030           	ldd	#$30
24e9 : e700             	stb	0,x
                        * 			pushStr[n+1]++;
24eb : e65f             	ldb	-1,u
24ed : 4f               	clra
24ee : c30001           	addd	#$1
24f1 : ae46             	ldx	6,u
24f3 : 308b             	leax	d,x
24f5 : e684             	ldb	,x
24f7 : 6c84             	inc	,x
24f9 : 4f               	clra
                        * 		}
                        * 	}
24fa :                  _28
                        * 	for (n = 0; n < stringSize; n++) {
24fa :                  _27
24fa : 305f             	leax	-1,u
24fc : e684             	ldb	,x
24fe : 6c84             	inc	,x
2500 : 4f               	clra
2501 : 16ffc2           	lbra	_26
2504 :                  _25
2504 : 4f               	clra
2505 : 5f               	clrb
2506 : e75f             	stb	-1,u
2508 :                  _30
2508 : e65f             	ldb	-1,u
250a : 4f               	clra
250b : 830004           	subd	#$4
250e : 10240032         	lbhs	_29
                        * 		setpointXY(n+15, 19); setTile(pushStr[stringSize-1
2512 : cc0013           	ldd	#$13
2515 : 3406             	pshs	d
2517 : e65f             	ldb	-1,u
2519 : 4f               	clra
251a : c3000f           	addd	#$f
251d : 3406             	pshs	d
251f : 17ca9f           	lbsr	setpoint
2522 : 3264             	leas	4,s
2524 : e65f             	ldb	-1,u
2526 : 4f               	clra
2527 : 3406             	pshs	d
2529 : cc0003           	ldd	#$3
252c : a3e1             	subd	,s++
AS09 Assembler for M6809 [1.42].                                     Page   18
-------------------------------- sokobanC.a09 --------------------------------

252e : ae46             	ldx	6,u
2530 : e68b             	ldb	d,x
2532 : 4f               	clra
2533 : 3406             	pshs	d
2535 : 17caad           	lbsr	setTile
2538 : 3262             	leas	2,s
                        * 	}	
                        * }		
253a :                  _31
253a : 305f             	leax	-1,u
253c : e684             	ldb	,x
253e : 6c84             	inc	,x
2540 : 4f               	clra
2541 : 16ffc4           	lbra	_30
2544 :                  _29
2544 : 35c2             	puls	a,u,pc
                        * 
                        * /***************************************************
                        * /*	main program
                        * /***************************************************
                        * 
                        * // states definition
                        * #define standing 	0
                        * #define push1 		1
                        * #define push2_empty 2
                        * #define push2_box 	3
                        * main() {
                        * 	char* gameLevel;					//-2,u
                        * 	char* scoreBoard;					//-4,u
                        * 	char* gameEnded;					//-6,u
                        * 	unsigned char* SOKOmap_L1;			//-8,u
                        * 	unsigned char map[MAP_SIZE]; 		//-428,u
                        * 	unsigned char state;				//-429,u
                        * 	unsigned char xPos, yPos, heading;	//-430,u ...
                        * 	unsigned char key;					//-433,u
                        * 	unsigned char undo;					//-434,u
                        * 	unsigned char pushStr[stringSize]; 	//-435,u
                        * 	unsigned char moveStr[stringSize]; 	//-436,u
                        * 	
                        * 	// inner loops variables
                        * 	unsigned int i;						//-438,u
                        * 	unsigned char y, x;					//-439,u ...
                        * 	unsigned char tile;					//-441,u
                        * 	unsigned char nextxPos, nextyPos, next2xPos, next2y
                        * 	unsigned char nextTile, next2Tile;	//-446,u   -447,
                        * 	
                        * 	gameLevel  = "LEVEL 01             ";
2546 :                  main
2546 : 3440             	pshs	u
2548 : 33e4             	leau	,s
254a : 32e9fe3b         	leas	-453,s
254e : 308d0002         	leax	_32_,pc
2552 : 2016             	bra	_32
2554 :                  _32_
2554 : 4c4556454c203031 	fcb	$4c, $45, $56, $45, $4c, $20, $30, $31
255c : 2020202020202020 	fcb	$20, $20, $20, $20, $20, $20, $20, $20
2564 : 202020202000     	fcb	$20, $20, $20, $20, $20, $0
256a :                  _32
256a : 1f10             	tfr	x,d
256c : ed5e             	std	-2,u
                        * 	scoreBoard = "MOVE:0000 PUSH:0000  ";
256e : 308d0002         	leax	_33_,pc
AS09 Assembler for M6809 [1.42].                                     Page   19
-------------------------------- sokobanC.a09 --------------------------------

2572 : 2016             	bra	_33
2574 :                  _33_
2574 : 4d4f56453a303030 	fcb	$4d, $4f, $56, $45, $3a, $30, $30, $30
257c : 3020505553483a30 	fcb	$30, $20, $50, $55, $53, $48, $3a, $30
2584 : 303030202000     	fcb	$30, $30, $30, $20, $20, $0
258a :                  _33
258a : 1f10             	tfr	x,d
258c : ed5c             	std	-4,u
                        * 	gameEnded = "WELL DONE!";
258e : 308d0002         	leax	_34_,pc
2592 : 200b             	bra	_34
2594 :                  _34_
2594 : 57454c4c20444f4e 	fcb	$57, $45, $4c, $4c, $20, $44, $4f, $4e
259c : 452100           	fcb	$45, $21, $0
259f :                  _34
259f : 1f10             	tfr	x,d
25a1 : ed5a             	std	-6,u
                        * 	state = standing;
25a3 : 4f               	clra
25a4 : 5f               	clrb
25a5 : e7c9fe53         	stb	-429,u
                        * 	undo = false;	
25a9 : 4f               	clra
25aa : 5f               	clrb
25ab : e7c9fe4e         	stb	-434,u
                        * 
                        * 	key = 0;
25af : 4f               	clra
25b0 : 5f               	clrb
25b1 : e7c9fe4f         	stb	-433,u
                        * 	xPos=12; yPos=11; heading = RIGHTARROW;
25b5 : cc000c           	ldd	#$c
25b8 : e7c9fe52         	stb	-430,u
25bc : cc000b           	ldd	#$b
25bf : e7c9fe51         	stb	-431,u
25c3 : cc0011           	ldd	#$11
25c6 : e7c9fe50         	stb	-432,u
                        * 		
                        * 	// map (width 21, height 20) populated with tile in
                        * 	SOKOmap_L1 = {
                        * 	0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0
                        * 	0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0
                        * 	0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0
                        * 	0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x1, 0x1, 0x1, 0x1, 0
                        * 	0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x1, 0
                        * 	0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x3, 0x0, 0x0, 0x1, 0
                        * 	0x0, 0x0, 0x0, 0x1, 0x1, 0x1, 0x0, 0x0, 0x3, 0x1, 0
                        * 	0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x3, 0x0, 0x3, 0x0, 0
                        * 	0x0, 0x1, 0x1, 0x1, 0x0, 0x1, 0x0, 0x1, 0x1, 0x0, 0
                        * 	0x0, 0x1, 0x0, 0x0, 0x0, 0x1, 0x0, 0x1, 0x1, 0x0, 0
                        * 	0x0, 0x1, 0x0, 0x3, 0x0, 0x0, 0x3, 0x0, 0x0, 0x0, 0
                        * 	0x0, 0x1, 0x1, 0x1, 0x1, 0x1, 0x0, 0x1, 0x1, 0x1, 0
                        * 	0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0
                        * 	0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x1, 0x1, 0x1, 0x1, 0
                        * 	0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0
                        * 	0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0
                        * 	0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0
                        * 	0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0
                        * 	0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0
                        * 	0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0
                        * 	};  //  end of map
25ca : 308d0003         	leax	_35_,pc
AS09 Assembler for M6809 [1.42].                                     Page   20
-------------------------------- sokobanC.a09 --------------------------------

25ce : 1601a4           	lbra	_35
25d1 :                  _35_
25d1 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
25d9 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
25e1 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
25e9 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
25f1 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
25f9 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
2601 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
2609 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
2611 : 0000000001010101 	fcb	$0, $0, $0, $0, $1, $1, $1, $1
2619 : 0100000000000000 	fcb	$1, $0, $0, $0, $0, $0, $0, $0
2621 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
2629 : 0001000000010000 	fcb	$0, $1, $0, $0, $0, $1, $0, $0
2631 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
2639 : 0000000000000103 	fcb	$0, $0, $0, $0, $0, $0, $1, $3
2641 : 0000010000000000 	fcb	$0, $0, $1, $0, $0, $0, $0, $0
2649 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
2651 : 0001010100000301 	fcb	$0, $1, $1, $1, $0, $0, $3, $1
2659 : 0100000000000000 	fcb	$1, $0, $0, $0, $0, $0, $0, $0
2661 : 0000000000000100 	fcb	$0, $0, $0, $0, $0, $0, $1, $0
2669 : 0003000300010000 	fcb	$0, $3, $0, $3, $0, $1, $0, $0
2671 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
2679 : 0001010100010001 	fcb	$0, $1, $1, $1, $0, $1, $0, $1
2681 : 0100010000000101 	fcb	$1, $0, $1, $0, $0, $0, $1, $1
2689 : 0101010100000100 	fcb	$1, $1, $1, $1, $0, $0, $1, $0
2691 : 0000010001010001 	fcb	$0, $0, $1, $0, $1, $1, $0, $1
2699 : 0101010100000202 	fcb	$1, $1, $1, $1, $0, $0, $2, $2
26a1 : 0100000100030000 	fcb	$1, $0, $0, $1, $0, $3, $0, $0
26a9 : 0300000000000000 	fcb	$3, $0, $0, $0, $0, $0, $0, $0
26b1 : 0000000202010000 	fcb	$0, $0, $0, $2, $2, $1, $0, $0
26b9 : 0101010101000101 	fcb	$1, $1, $1, $1, $1, $0, $1, $1
26c1 : 0100010001010000 	fcb	$1, $0, $1, $0, $1, $1, $0, $0
26c9 : 0202010000000000 	fcb	$2, $2, $1, $0, $0, $0, $0, $0
26d1 : 0001000000000001 	fcb	$0, $1, $0, $0, $0, $0, $0, $1
26d9 : 0101010101010101 	fcb	$1, $1, $1, $1, $1, $1, $1, $1
26e1 : 0000000000000101 	fcb	$0, $0, $0, $0, $0, $0, $1, $1
26e9 : 0101010101000000 	fcb	$1, $1, $1, $1, $1, $0, $0, $0
26f1 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
26f9 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
2701 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
2709 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
2711 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
2719 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
2721 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
2729 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
2731 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
2739 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
2741 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
2749 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
2751 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
2759 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
2761 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
2769 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
2771 : 00000000         	fcb	$0, $0, $0, $0
2775 :                  _35
2775 : 1f10             	tfr	x,d
2777 : ed58             	std	-8,u
                        * 	
                        * 	// init the RAM Tiles
                        * 	for (x = 0; x < RAMcontCnt; x++) {
2779 : 4f               	clra
AS09 Assembler for M6809 [1.42].                                     Page   21
-------------------------------- sokobanC.a09 --------------------------------

277a : 5f               	clrb
277b : e7c9fe42         	stb	-446,u
277f :                  _37
277f : e6c9fe42         	ldb	-446,u
2783 : 4f               	clra
2784 : 83000a           	subd	#$a
2787 : 1024001f         	lbhs	_36
                        * 		updateRAMTile(heading, x);
278b : e6c9fe42         	ldb	-446,u
278f : 4f               	clra
2790 : 3406             	pshs	d
2792 : e6c9fe50         	ldb	-432,u
2796 : 4f               	clra
2797 : 3406             	pshs	d
2799 : 17f882           	lbsr	updateRA
279c : 3264             	leas	4,s
                        * 	}
                        * 
                        * 	// get the the ROM map
                        * 	for (y=0; y<SCREEN_ROW; y++) {
279e :                  _38
279e : 30c9fe42         	leax	-446,u
27a2 : e684             	ldb	,x
27a4 : 6c84             	inc	,x
27a6 : 4f               	clra
27a7 : 16ffd5           	lbra	_37
27aa :                  _36
27aa : 4f               	clra
27ab : 5f               	clrb
27ac : e7c9fe43         	stb	-445,u
27b0 :                  _40
27b0 : e6c9fe43         	ldb	-445,u
27b4 : 4f               	clra
27b5 : 830014           	subd	#$14
27b8 : 1024006a         	lbhs	_39
                        * 		for (x=0; x<SCREEN_COL; x++) {
27bc : 4f               	clra
27bd : 5f               	clrb
27be : e7c9fe42         	stb	-446,u
27c2 :                  _43
27c2 : e6c9fe42         	ldb	-446,u
27c6 : 4f               	clra
27c7 : 830015           	subd	#$15
27ca : 1024004c         	lbhs	_42
                        * 			i = y*SCREEN_COL + x;
27ce : e6c9fe42         	ldb	-446,u
27d2 : 4f               	clra
27d3 : 3406             	pshs	d
27d5 : cc0015           	ldd	#$15
27d8 : 3406             	pshs	d
27da : e6c9fe43         	ldb	-445,u
27de : 4f               	clra
27df : 3510             	puls	x
27e1 : 170d81           	lbsr	_00001
27e4 : e3e1             	addd	,s++
27e6 : edc9fe44         	std	-444,u
                        * 			updateMap(map, x, y, SOKOmap_L1[i]);
27ea : ecc9fe44         	ldd	-444,u
27ee : ae58             	ldx	-8,u
27f0 : e68b             	ldb	d,x
27f2 : 4f               	clra
27f3 : 3406             	pshs	d
AS09 Assembler for M6809 [1.42].                                     Page   22
-------------------------------- sokobanC.a09 --------------------------------

27f5 : e6c9fe43         	ldb	-445,u
27f9 : 4f               	clra
27fa : 3406             	pshs	d
27fc : e6c9fe42         	ldb	-446,u
2800 : 4f               	clra
2801 : 3406             	pshs	d
2803 : 30c9fe54         	leax	-428,u
2807 : 3410             	pshs	x
2809 : 17fb78           	lbsr	updateMa
280c : 3268             	leas	8,s
                        * 		}
                        * 	}
280e :                  _44
280e : 30c9fe42         	leax	-446,u
2812 : e684             	ldb	,x
2814 : 6c84             	inc	,x
2816 : 4f               	clra
2817 : 16ffa8           	lbra	_43
281a :                  _42
                        * 	
                        * 	// add the man
                        * 	updateMap(map, xPos, yPos, iMAN_STD);
281a :                  _41
281a : 30c9fe43         	leax	-445,u
281e : e684             	ldb	,x
2820 : 6c84             	inc	,x
2822 : 4f               	clra
2823 : 16ff8a           	lbra	_40
2826 :                  _39
2826 : cc0005           	ldd	#$5
2829 : 3406             	pshs	d
282b : e6c9fe51         	ldb	-431,u
282f : 4f               	clra
2830 : 3406             	pshs	d
2832 : e6c9fe52         	ldb	-430,u
2836 : 4f               	clra
2837 : 3406             	pshs	d
2839 : 30c9fe54         	leax	-428,u
283d : 3410             	pshs	x
283f : 17fb42           	lbsr	updateMa
2842 : 3268             	leas	8,s
                        * 		
                        * 	// init score board
                        * 	sendString(0, 0, gameLevel);
2844 : ec5e             	ldd	-2,u
2846 : 3406             	pshs	d
2848 : 4f               	clra
2849 : 5f               	clrb
284a : 3406             	pshs	d
284c : 4f               	clra
284d : 5f               	clrb
284e : 3406             	pshs	d
2850 : 17fb8f           	lbsr	sendStri
2853 : 3266             	leas	6,s
                        * 	sendString(0, 19, scoreBoard);
2855 : ec5c             	ldd	-4,u
2857 : 3406             	pshs	d
2859 : cc0013           	ldd	#$13
285c : 3406             	pshs	d
285e : 4f               	clra
285f : 5f               	clrb
2860 : 3406             	pshs	d
AS09 Assembler for M6809 [1.42].                                     Page   23
-------------------------------- sokobanC.a09 --------------------------------

2862 : 17fb7d           	lbsr	sendStri
2865 : 3266             	leas	6,s
                        * 	for (x = 0; x < stringSize; x++) {
2867 : 4f               	clra
2868 : 5f               	clrb
2869 : e7c9fe42         	stb	-446,u
286d :                  _46
286d : e6c9fe42         	ldb	-446,u
2871 : 4f               	clra
2872 : 830004           	subd	#$4
2875 : 1024002d         	lbhs	_45
                        * 		pushStr[x] = moveStr[x] = '0';
2879 : e6c9fe42         	ldb	-446,u
287d : 4f               	clra
287e : 30c9fe46         	leax	-442,u
2882 : 308b             	leax	d,x
2884 : cc0030           	ldd	#$30
2887 : e700             	stb	0,x
2889 : 3406             	pshs	d
288b : e6c9fe42         	ldb	-446,u
288f : 4f               	clra
2890 : 30c9fe4a         	leax	-438,u
2894 : 308b             	leax	d,x
2896 : 3506             	puls	d
2898 : e700             	stb	0,x
                        * 	}
                        * 	printScoreboard(moveStr, pushStr);
289a :                  _47
289a : 30c9fe42         	leax	-446,u
289e : e684             	ldb	,x
28a0 : 6c84             	inc	,x
28a2 : 4f               	clra
28a3 : 16ffc7           	lbra	_46
28a6 :                  _45
28a6 : 30c9fe4a         	leax	-438,u
28aa : 3410             	pshs	x
28ac : 30c9fe46         	leax	-442,u
28b0 : 3410             	pshs	x
28b2 : 17fb85           	lbsr	printSco
28b5 : 3264             	leas	4,s
                        * 	
                        * 	while(1) {			
28b7 :                  _49
                        * 		// keyboard handling		
                        * 		APL_OutputStream();
28b7 : 17c602           	lbsr	APL_Outp
                        * 		if((key == 0) && (isKeyboardData() != 0)){
28ba : e6c9fe4f         	ldb	-433,u
28be : 1d               	sex
28bf : 830000           	subd	#$0
28c2 : 10260644         	lbne	_50
28c6 : 17c690           	lbsr	isKeyboa
28c9 : 830000           	subd	#$0
28cc : 1027063a         	lbeq	_50
                        * 			key = getKeyboard();
28d0 : 17c669           	lbsr	getKeybo
28d3 : e7c9fe4f         	stb	-433,u
                        * 			
                        * 			if ((state != standing) && (key != heading)) key 
28d7 : e6c9fe53         	ldb	-429,u
28db : 4f               	clra
28dc : 830000           	subd	#$0
AS09 Assembler for M6809 [1.42].                                     Page   24
-------------------------------- sokobanC.a09 --------------------------------

28df : 10270018         	lbeq	_51
28e3 : e6c9fe50         	ldb	-432,u
28e7 : 4f               	clra
28e8 : 3406             	pshs	d
28ea : e6c9fe4f         	ldb	-433,u
28ee : 4f               	clra
28ef : a3e1             	subd	,s++
28f1 : 10270006         	lbeq	_51
28f5 : 4f               	clra
28f6 : 5f               	clrb
28f7 : e7c9fe4f         	stb	-433,u
                        * 			
                        * 			// undo command
                        * 			if(((key == 'u') || (key == 'U')) && (undo == tru
28fb :                  _51
28fb : e6c9fe4f         	ldb	-433,u
28ff : 4f               	clra
2900 : 830075           	subd	#$75
2903 : 1027000c         	lbeq	_53
2907 : e6c9fe4f         	ldb	-433,u
290b : 4f               	clra
290c : 830055           	subd	#$55
290f : 10260572         	lbne	_52
2913 :                  _53
2913 : e6c9fe4e         	ldb	-434,u
2917 : 4f               	clra
2918 : 830001           	subd	#$1
291b : 10260566         	lbne	_52
                        * 				i=0;
291f : 4f               	clra
2920 : 5f               	clrb
2921 : edc9fe44         	std	-444,u
                        * 				tile=0;
2925 : 4f               	clra
2926 : 5f               	clrb
2927 : e7c9fe41         	stb	-447,u
                        * 				switch(heading) {
292b : e6c9fe50         	ldb	-432,u
292f : 4f               	clra
                        * 					case LEFTARROW :
                        * 						updateMap(map, xPos+1, yPos, getMapTileIndex(m
2930 : 10830009         	cmpd	#$9
2934 : 1026014b         	lbne	_56
2938 :                  _55
2938 : e6c9fe51         	ldb	-431,u
293c : 4f               	clra
293d : 3406             	pshs	d
293f : e6c9fe52         	ldb	-430,u
2943 : 4f               	clra
2944 : 3406             	pshs	d
2946 : 30c9fe54         	leax	-428,u
294a : 3410             	pshs	x
294c : 17fa74           	lbsr	getMapTi
294f : 3266             	leas	6,s
2951 : 3406             	pshs	d
2953 : e6c9fe51         	ldb	-431,u
2957 : 4f               	clra
2958 : 3406             	pshs	d
295a : e6c9fe52         	ldb	-430,u
295e : 4f               	clra
295f : c30001           	addd	#$1
2962 : 3406             	pshs	d
AS09 Assembler for M6809 [1.42].                                     Page   25
-------------------------------- sokobanC.a09 --------------------------------

2964 : 30c9fe54         	leax	-428,u
2968 : 3410             	pshs	x
296a : 17fa17           	lbsr	updateMa
296d : 3268             	leas	8,s
                        * 						tile = getMapTileIndex(map, xPos-1, yPos); // 
296f : e6c9fe51         	ldb	-431,u
2973 : 4f               	clra
2974 : 3406             	pshs	d
2976 : e6c9fe52         	ldb	-430,u
297a : 4f               	clra
297b : 830001           	subd	#$1
297e : 3406             	pshs	d
2980 : 30c9fe54         	leax	-428,u
2984 : 3410             	pshs	x
2986 : 17fa3a           	lbsr	getMapTi
2989 : 3266             	leas	6,s
298b : e7c9fe41         	stb	-447,u
                        * 						if ((tile == iBOX) || (tile == iSTO_BOX)) {
298f : e6c9fe41         	ldb	-447,u
2993 : 4f               	clra
2994 : 830003           	subd	#$3
2997 : 1027000c         	lbeq	_58
299b : e6c9fe41         	ldb	-447,u
299f : 4f               	clra
29a0 : 830004           	subd	#$4
29a3 : 1026003d         	lbne	_57
29a7 :                  _58
                        * 							i = yPos*SCREEN_COL + (xPos);
29a7 : e6c9fe52         	ldb	-430,u
29ab : 4f               	clra
29ac : 3406             	pshs	d
29ae : cc0015           	ldd	#$15
29b1 : 3406             	pshs	d
29b3 : e6c9fe51         	ldb	-431,u
29b7 : 4f               	clra
29b8 : 3510             	puls	x
29ba : 170ba8           	lbsr	_00001
29bd : e3e1             	addd	,s++
29bf : edc9fe44         	std	-444,u
                        * 							if (SOKOmap_L1[i] == iSTORAGE) tile = iSTO_BO
29c3 : ecc9fe44         	ldd	-444,u
29c7 : ae58             	ldx	-8,u
29c9 : e68b             	ldb	d,x
29cb : 4f               	clra
29cc : 830002           	subd	#$2
29cf : 1026000a         	lbne	_59
29d3 : cc0004           	ldd	#$4
29d6 : e7c9fe41         	stb	-447,u
                        * 							else tile = iBOX;
29da : 160007           	lbra	_60
29dd :                  _59
29dd : cc0003           	ldd	#$3
29e0 : e7c9fe41         	stb	-447,u
                        * 						}
29e4 :                  _60
                        * 						updateMap(map, xPos, yPos, tile);
29e4 :                  _57
29e4 : e6c9fe41         	ldb	-447,u
29e8 : 4f               	clra
29e9 : 3406             	pshs	d
29eb : e6c9fe51         	ldb	-431,u
29ef : 4f               	clra
AS09 Assembler for M6809 [1.42].                                     Page   26
-------------------------------- sokobanC.a09 --------------------------------

29f0 : 3406             	pshs	d
29f2 : e6c9fe52         	ldb	-430,u
29f6 : 4f               	clra
29f7 : 3406             	pshs	d
29f9 : 30c9fe54         	leax	-428,u
29fd : 3410             	pshs	x
29ff : 17f982           	lbsr	updateMa
2a02 : 3268             	leas	8,s
                        * 						i = yPos*SCREEN_COL + (xPos-1);
2a04 : e6c9fe52         	ldb	-430,u
2a08 : 4f               	clra
2a09 : 830001           	subd	#$1
2a0c : 3406             	pshs	d
2a0e : cc0015           	ldd	#$15
2a11 : 3406             	pshs	d
2a13 : e6c9fe51         	ldb	-431,u
2a17 : 4f               	clra
2a18 : 3510             	puls	x
2a1a : 170b48           	lbsr	_00001
2a1d : e3e1             	addd	,s++
2a1f : edc9fe44         	std	-444,u
                        * 						if (SOKOmap_L1[i] == iSTORAGE) updateMap(map, 
2a23 : ecc9fe44         	ldd	-444,u
2a27 : ae58             	ldx	-8,u
2a29 : e68b             	ldb	d,x
2a2b : 4f               	clra
2a2c : 830002           	subd	#$2
2a2f : 10260024         	lbne	_61
2a33 : cc0002           	ldd	#$2
2a36 : 3406             	pshs	d
2a38 : e6c9fe51         	ldb	-431,u
2a3c : 4f               	clra
2a3d : 3406             	pshs	d
2a3f : e6c9fe52         	ldb	-430,u
2a43 : 4f               	clra
2a44 : 830001           	subd	#$1
2a47 : 3406             	pshs	d
2a49 : 30c9fe54         	leax	-428,u
2a4d : 3410             	pshs	x
2a4f : 17f932           	lbsr	updateMa
2a52 : 3268             	leas	8,s
                        * 						else updateMap(map, xPos-1, yPos, iEMPTY);
2a54 : 160020           	lbra	_62
2a57 :                  _61
2a57 : 4f               	clra
2a58 : 5f               	clrb
2a59 : 3406             	pshs	d
2a5b : e6c9fe51         	ldb	-431,u
2a5f : 4f               	clra
2a60 : 3406             	pshs	d
2a62 : e6c9fe52         	ldb	-430,u
2a66 : 4f               	clra
2a67 : 830001           	subd	#$1
2a6a : 3406             	pshs	d
2a6c : 30c9fe54         	leax	-428,u
2a70 : 3410             	pshs	x
2a72 : 17f90f           	lbsr	updateMa
2a75 : 3268             	leas	8,s
                        * 						xPos++;		
2a77 :                  _62
2a77 : 30c9fe52         	leax	-430,u
2a7b : e684             	ldb	,x
AS09 Assembler for M6809 [1.42].                                     Page   27
-------------------------------- sokobanC.a09 --------------------------------

2a7d : 6c84             	inc	,x
2a7f : 4f               	clra
                        * 						break;					
2a80 : 1603fc           	lbra	_54
                        * 					case RIGHTARROW :
                        * 						updateMap(map, xPos-1, yPos, getMapTileIndex(m
2a83 :                  _56
2a83 : 10830011         	cmpd	#$11
2a87 : 1026014b         	lbne	_64
2a8b :                  _63
2a8b : e6c9fe51         	ldb	-431,u
2a8f : 4f               	clra
2a90 : 3406             	pshs	d
2a92 : e6c9fe52         	ldb	-430,u
2a96 : 4f               	clra
2a97 : 3406             	pshs	d
2a99 : 30c9fe54         	leax	-428,u
2a9d : 3410             	pshs	x
2a9f : 17f921           	lbsr	getMapTi
2aa2 : 3266             	leas	6,s
2aa4 : 3406             	pshs	d
2aa6 : e6c9fe51         	ldb	-431,u
2aaa : 4f               	clra
2aab : 3406             	pshs	d
2aad : e6c9fe52         	ldb	-430,u
2ab1 : 4f               	clra
2ab2 : 830001           	subd	#$1
2ab5 : 3406             	pshs	d
2ab7 : 30c9fe54         	leax	-428,u
2abb : 3410             	pshs	x
2abd : 17f8c4           	lbsr	updateMa
2ac0 : 3268             	leas	8,s
                        * 						tile = getMapTileIndex(map, xPos+1, yPos); // 
2ac2 : e6c9fe51         	ldb	-431,u
2ac6 : 4f               	clra
2ac7 : 3406             	pshs	d
2ac9 : e6c9fe52         	ldb	-430,u
2acd : 4f               	clra
2ace : c30001           	addd	#$1
2ad1 : 3406             	pshs	d
2ad3 : 30c9fe54         	leax	-428,u
2ad7 : 3410             	pshs	x
2ad9 : 17f8e7           	lbsr	getMapTi
2adc : 3266             	leas	6,s
2ade : e7c9fe41         	stb	-447,u
                        * 						if ((tile == iBOX) || (tile == iSTO_BOX)) {
2ae2 : e6c9fe41         	ldb	-447,u
2ae6 : 4f               	clra
2ae7 : 830003           	subd	#$3
2aea : 1027000c         	lbeq	_66
2aee : e6c9fe41         	ldb	-447,u
2af2 : 4f               	clra
2af3 : 830004           	subd	#$4
2af6 : 1026003d         	lbne	_65
2afa :                  _66
                        * 							i = yPos*SCREEN_COL + (xPos);
2afa : e6c9fe52         	ldb	-430,u
2afe : 4f               	clra
2aff : 3406             	pshs	d
2b01 : cc0015           	ldd	#$15
2b04 : 3406             	pshs	d
2b06 : e6c9fe51         	ldb	-431,u
AS09 Assembler for M6809 [1.42].                                     Page   28
-------------------------------- sokobanC.a09 --------------------------------

2b0a : 4f               	clra
2b0b : 3510             	puls	x
2b0d : 170a55           	lbsr	_00001
2b10 : e3e1             	addd	,s++
2b12 : edc9fe44         	std	-444,u
                        * 							if (SOKOmap_L1[i] == iSTORAGE) tile = iSTO_BO
2b16 : ecc9fe44         	ldd	-444,u
2b1a : ae58             	ldx	-8,u
2b1c : e68b             	ldb	d,x
2b1e : 4f               	clra
2b1f : 830002           	subd	#$2
2b22 : 1026000a         	lbne	_67
2b26 : cc0004           	ldd	#$4
2b29 : e7c9fe41         	stb	-447,u
                        * 							else tile = iBOX;
2b2d : 160007           	lbra	_68
2b30 :                  _67
2b30 : cc0003           	ldd	#$3
2b33 : e7c9fe41         	stb	-447,u
                        * 						}						
2b37 :                  _68
                        * 						updateMap(map, xPos, yPos, tile);
2b37 :                  _65
2b37 : e6c9fe41         	ldb	-447,u
2b3b : 4f               	clra
2b3c : 3406             	pshs	d
2b3e : e6c9fe51         	ldb	-431,u
2b42 : 4f               	clra
2b43 : 3406             	pshs	d
2b45 : e6c9fe52         	ldb	-430,u
2b49 : 4f               	clra
2b4a : 3406             	pshs	d
2b4c : 30c9fe54         	leax	-428,u
2b50 : 3410             	pshs	x
2b52 : 17f82f           	lbsr	updateMa
2b55 : 3268             	leas	8,s
                        * 						i = yPos*SCREEN_COL + (xPos+1);
2b57 : e6c9fe52         	ldb	-430,u
2b5b : 4f               	clra
2b5c : c30001           	addd	#$1
2b5f : 3406             	pshs	d
2b61 : cc0015           	ldd	#$15
2b64 : 3406             	pshs	d
2b66 : e6c9fe51         	ldb	-431,u
2b6a : 4f               	clra
2b6b : 3510             	puls	x
2b6d : 1709f5           	lbsr	_00001
2b70 : e3e1             	addd	,s++
2b72 : edc9fe44         	std	-444,u
                        * 						if (SOKOmap_L1[i] == iSTORAGE) updateMap(map, 
2b76 : ecc9fe44         	ldd	-444,u
2b7a : ae58             	ldx	-8,u
2b7c : e68b             	ldb	d,x
2b7e : 4f               	clra
2b7f : 830002           	subd	#$2
2b82 : 10260024         	lbne	_69
2b86 : cc0002           	ldd	#$2
2b89 : 3406             	pshs	d
2b8b : e6c9fe51         	ldb	-431,u
2b8f : 4f               	clra
2b90 : 3406             	pshs	d
2b92 : e6c9fe52         	ldb	-430,u
AS09 Assembler for M6809 [1.42].                                     Page   29
-------------------------------- sokobanC.a09 --------------------------------

2b96 : 4f               	clra
2b97 : c30001           	addd	#$1
2b9a : 3406             	pshs	d
2b9c : 30c9fe54         	leax	-428,u
2ba0 : 3410             	pshs	x
2ba2 : 17f7df           	lbsr	updateMa
2ba5 : 3268             	leas	8,s
                        * 						else updateMap(map, xPos+1, yPos, iEMPTY);
2ba7 : 160020           	lbra	_70
2baa :                  _69
2baa : 4f               	clra
2bab : 5f               	clrb
2bac : 3406             	pshs	d
2bae : e6c9fe51         	ldb	-431,u
2bb2 : 4f               	clra
2bb3 : 3406             	pshs	d
2bb5 : e6c9fe52         	ldb	-430,u
2bb9 : 4f               	clra
2bba : c30001           	addd	#$1
2bbd : 3406             	pshs	d
2bbf : 30c9fe54         	leax	-428,u
2bc3 : 3410             	pshs	x
2bc5 : 17f7bc           	lbsr	updateMa
2bc8 : 3268             	leas	8,s
                        * 						xPos--;
2bca :                  _70
2bca : 30c9fe52         	leax	-430,u
2bce : e684             	ldb	,x
2bd0 : 6a84             	dec	,x
2bd2 : 4f               	clra
                        * 						break;
2bd3 : 1602a9           	lbra	_54
                        * 					case UPARROW :
                        * 						updateMap(map, xPos, yPos+1, getMapTileIndex(m
2bd6 :                  _64
2bd6 : 1083005e         	cmpd	#$5e
2bda : 1026014e         	lbne	_72
2bde :                  _71
2bde : e6c9fe51         	ldb	-431,u
2be2 : 4f               	clra
2be3 : 3406             	pshs	d
2be5 : e6c9fe52         	ldb	-430,u
2be9 : 4f               	clra
2bea : 3406             	pshs	d
2bec : 30c9fe54         	leax	-428,u
2bf0 : 3410             	pshs	x
2bf2 : 17f7ce           	lbsr	getMapTi
2bf5 : 3266             	leas	6,s
2bf7 : 3406             	pshs	d
2bf9 : e6c9fe51         	ldb	-431,u
2bfd : 4f               	clra
2bfe : c30001           	addd	#$1
2c01 : 3406             	pshs	d
2c03 : e6c9fe52         	ldb	-430,u
2c07 : 4f               	clra
2c08 : 3406             	pshs	d
2c0a : 30c9fe54         	leax	-428,u
2c0e : 3410             	pshs	x
2c10 : 17f771           	lbsr	updateMa
2c13 : 3268             	leas	8,s
                        * 						tile = getMapTileIndex(map, xPos, yPos-1); // 
2c15 : e6c9fe51         	ldb	-431,u
AS09 Assembler for M6809 [1.42].                                     Page   30
-------------------------------- sokobanC.a09 --------------------------------

2c19 : 4f               	clra
2c1a : 830001           	subd	#$1
2c1d : 3406             	pshs	d
2c1f : e6c9fe52         	ldb	-430,u
2c23 : 4f               	clra
2c24 : 3406             	pshs	d
2c26 : 30c9fe54         	leax	-428,u
2c2a : 3410             	pshs	x
2c2c : 17f794           	lbsr	getMapTi
2c2f : 3266             	leas	6,s
2c31 : e7c9fe41         	stb	-447,u
                        * 						if ((tile == iBOX) || (tile == iSTO_BOX)) {
2c35 : e6c9fe41         	ldb	-447,u
2c39 : 4f               	clra
2c3a : 830003           	subd	#$3
2c3d : 1027000c         	lbeq	_74
2c41 : e6c9fe41         	ldb	-447,u
2c45 : 4f               	clra
2c46 : 830004           	subd	#$4
2c49 : 1026003d         	lbne	_73
2c4d :                  _74
                        * 							i = yPos*SCREEN_COL + (xPos);
2c4d : e6c9fe52         	ldb	-430,u
2c51 : 4f               	clra
2c52 : 3406             	pshs	d
2c54 : cc0015           	ldd	#$15
2c57 : 3406             	pshs	d
2c59 : e6c9fe51         	ldb	-431,u
2c5d : 4f               	clra
2c5e : 3510             	puls	x
2c60 : 170902           	lbsr	_00001
2c63 : e3e1             	addd	,s++
2c65 : edc9fe44         	std	-444,u
                        * 							if (SOKOmap_L1[i] == iSTORAGE) tile = iSTO_BO
2c69 : ecc9fe44         	ldd	-444,u
2c6d : ae58             	ldx	-8,u
2c6f : e68b             	ldb	d,x
2c71 : 4f               	clra
2c72 : 830002           	subd	#$2
2c75 : 1026000a         	lbne	_75
2c79 : cc0004           	ldd	#$4
2c7c : e7c9fe41         	stb	-447,u
                        * 							else tile = iBOX;
2c80 : 160007           	lbra	_76
2c83 :                  _75
2c83 : cc0003           	ldd	#$3
2c86 : e7c9fe41         	stb	-447,u
                        * 						}
2c8a :                  _76
                        * 						updateMap(map, xPos, yPos, tile);						
2c8a :                  _73
2c8a : e6c9fe41         	ldb	-447,u
2c8e : 4f               	clra
2c8f : 3406             	pshs	d
2c91 : e6c9fe51         	ldb	-431,u
2c95 : 4f               	clra
2c96 : 3406             	pshs	d
2c98 : e6c9fe52         	ldb	-430,u
2c9c : 4f               	clra
2c9d : 3406             	pshs	d
2c9f : 30c9fe54         	leax	-428,u
2ca3 : 3410             	pshs	x
AS09 Assembler for M6809 [1.42].                                     Page   31
-------------------------------- sokobanC.a09 --------------------------------

2ca5 : 17f6dc           	lbsr	updateMa
2ca8 : 3268             	leas	8,s
                        * 						i = (yPos-1)*SCREEN_COL + xPos;
2caa : e6c9fe52         	ldb	-430,u
2cae : 4f               	clra
2caf : 3406             	pshs	d
2cb1 : cc0015           	ldd	#$15
2cb4 : 3406             	pshs	d
2cb6 : e6c9fe51         	ldb	-431,u
2cba : 4f               	clra
2cbb : 830001           	subd	#$1
2cbe : 3510             	puls	x
2cc0 : 1708a2           	lbsr	_00001
2cc3 : e3e1             	addd	,s++
2cc5 : edc9fe44         	std	-444,u
                        * 						if (SOKOmap_L1[i] == iSTORAGE) updateMap(map, 
2cc9 : ecc9fe44         	ldd	-444,u
2ccd : ae58             	ldx	-8,u
2ccf : e68b             	ldb	d,x
2cd1 : 4f               	clra
2cd2 : 830002           	subd	#$2
2cd5 : 10260024         	lbne	_77
2cd9 : cc0002           	ldd	#$2
2cdc : 3406             	pshs	d
2cde : e6c9fe51         	ldb	-431,u
2ce2 : 4f               	clra
2ce3 : 830001           	subd	#$1
2ce6 : 3406             	pshs	d
2ce8 : e6c9fe52         	ldb	-430,u
2cec : 4f               	clra
2ced : 3406             	pshs	d
2cef : 30c9fe54         	leax	-428,u
2cf3 : 3410             	pshs	x
2cf5 : 17f68c           	lbsr	updateMa
2cf8 : 3268             	leas	8,s
                        * 						else updateMap(map, xPos, yPos-1, iEMPTY);
2cfa : 160020           	lbra	_78
2cfd :                  _77
2cfd : 4f               	clra
2cfe : 5f               	clrb
2cff : 3406             	pshs	d
2d01 : e6c9fe51         	ldb	-431,u
2d05 : 4f               	clra
2d06 : 830001           	subd	#$1
2d09 : 3406             	pshs	d
2d0b : e6c9fe52         	ldb	-430,u
2d0f : 4f               	clra
2d10 : 3406             	pshs	d
2d12 : 30c9fe54         	leax	-428,u
2d16 : 3410             	pshs	x
2d18 : 17f669           	lbsr	updateMa
2d1b : 3268             	leas	8,s
                        * 						yPos++;
2d1d :                  _78
2d1d : 30c9fe51         	leax	-431,u
2d21 : e684             	ldb	,x
2d23 : 6c84             	inc	,x
2d25 : 4f               	clra
                        * 						break;
2d26 : 160156           	lbra	_54
                        * 					break;
2d29 : 160153           	lbra	_54
AS09 Assembler for M6809 [1.42].                                     Page   32
-------------------------------- sokobanC.a09 --------------------------------

                        * 					case DOWNARROW :
                        * 						updateMap(map, xPos, yPos-1, getMapTileIndex(m
2d2c :                  _72
2d2c : 10830012         	cmpd	#$12
2d30 : 1026014b         	lbne	_80
2d34 :                  _79
2d34 : e6c9fe51         	ldb	-431,u
2d38 : 4f               	clra
2d39 : 3406             	pshs	d
2d3b : e6c9fe52         	ldb	-430,u
2d3f : 4f               	clra
2d40 : 3406             	pshs	d
2d42 : 30c9fe54         	leax	-428,u
2d46 : 3410             	pshs	x
2d48 : 17f678           	lbsr	getMapTi
2d4b : 3266             	leas	6,s
2d4d : 3406             	pshs	d
2d4f : e6c9fe51         	ldb	-431,u
2d53 : 4f               	clra
2d54 : 830001           	subd	#$1
2d57 : 3406             	pshs	d
2d59 : e6c9fe52         	ldb	-430,u
2d5d : 4f               	clra
2d5e : 3406             	pshs	d
2d60 : 30c9fe54         	leax	-428,u
2d64 : 3410             	pshs	x
2d66 : 17f61b           	lbsr	updateMa
2d69 : 3268             	leas	8,s
                        * 						tile = getMapTileIndex(map, xPos, yPos+1); // 
2d6b : e6c9fe51         	ldb	-431,u
2d6f : 4f               	clra
2d70 : c30001           	addd	#$1
2d73 : 3406             	pshs	d
2d75 : e6c9fe52         	ldb	-430,u
2d79 : 4f               	clra
2d7a : 3406             	pshs	d
2d7c : 30c9fe54         	leax	-428,u
2d80 : 3410             	pshs	x
2d82 : 17f63e           	lbsr	getMapTi
2d85 : 3266             	leas	6,s
2d87 : e7c9fe41         	stb	-447,u
                        * 						if ((tile == iBOX) || (tile == iSTO_BOX)) {
2d8b : e6c9fe41         	ldb	-447,u
2d8f : 4f               	clra
2d90 : 830003           	subd	#$3
2d93 : 1027000c         	lbeq	_82
2d97 : e6c9fe41         	ldb	-447,u
2d9b : 4f               	clra
2d9c : 830004           	subd	#$4
2d9f : 1026003d         	lbne	_81
2da3 :                  _82
                        * 							i = yPos*SCREEN_COL + (xPos);
2da3 : e6c9fe52         	ldb	-430,u
2da7 : 4f               	clra
2da8 : 3406             	pshs	d
2daa : cc0015           	ldd	#$15
2dad : 3406             	pshs	d
2daf : e6c9fe51         	ldb	-431,u
2db3 : 4f               	clra
2db4 : 3510             	puls	x
2db6 : 1707ac           	lbsr	_00001
2db9 : e3e1             	addd	,s++
AS09 Assembler for M6809 [1.42].                                     Page   33
-------------------------------- sokobanC.a09 --------------------------------

2dbb : edc9fe44         	std	-444,u
                        * 							if (SOKOmap_L1[i] == iSTORAGE) tile = iSTO_BO
2dbf : ecc9fe44         	ldd	-444,u
2dc3 : ae58             	ldx	-8,u
2dc5 : e68b             	ldb	d,x
2dc7 : 4f               	clra
2dc8 : 830002           	subd	#$2
2dcb : 1026000a         	lbne	_83
2dcf : cc0004           	ldd	#$4
2dd2 : e7c9fe41         	stb	-447,u
                        * 							else tile = iBOX;
2dd6 : 160007           	lbra	_84
2dd9 :                  _83
2dd9 : cc0003           	ldd	#$3
2ddc : e7c9fe41         	stb	-447,u
                        * 						}
2de0 :                  _84
                        * 						updateMap(map, xPos, yPos, tile);
2de0 :                  _81
2de0 : e6c9fe41         	ldb	-447,u
2de4 : 4f               	clra
2de5 : 3406             	pshs	d
2de7 : e6c9fe51         	ldb	-431,u
2deb : 4f               	clra
2dec : 3406             	pshs	d
2dee : e6c9fe52         	ldb	-430,u
2df2 : 4f               	clra
2df3 : 3406             	pshs	d
2df5 : 30c9fe54         	leax	-428,u
2df9 : 3410             	pshs	x
2dfb : 17f586           	lbsr	updateMa
2dfe : 3268             	leas	8,s
                        * 						i = (yPos+1)*SCREEN_COL + xPos;
2e00 : e6c9fe52         	ldb	-430,u
2e04 : 4f               	clra
2e05 : 3406             	pshs	d
2e07 : cc0015           	ldd	#$15
2e0a : 3406             	pshs	d
2e0c : e6c9fe51         	ldb	-431,u
2e10 : 4f               	clra
2e11 : c30001           	addd	#$1
2e14 : 3510             	puls	x
2e16 : 17074c           	lbsr	_00001
2e19 : e3e1             	addd	,s++
2e1b : edc9fe44         	std	-444,u
                        * 						if (SOKOmap_L1[i] == iSTORAGE) updateMap(map, 
2e1f : ecc9fe44         	ldd	-444,u
2e23 : ae58             	ldx	-8,u
2e25 : e68b             	ldb	d,x
2e27 : 4f               	clra
2e28 : 830002           	subd	#$2
2e2b : 10260024         	lbne	_85
2e2f : cc0002           	ldd	#$2
2e32 : 3406             	pshs	d
2e34 : e6c9fe51         	ldb	-431,u
2e38 : 4f               	clra
2e39 : c30001           	addd	#$1
2e3c : 3406             	pshs	d
2e3e : e6c9fe52         	ldb	-430,u
2e42 : 4f               	clra
2e43 : 3406             	pshs	d
2e45 : 30c9fe54         	leax	-428,u
AS09 Assembler for M6809 [1.42].                                     Page   34
-------------------------------- sokobanC.a09 --------------------------------

2e49 : 3410             	pshs	x
2e4b : 17f536           	lbsr	updateMa
2e4e : 3268             	leas	8,s
                        * 						else updateMap(map, xPos, yPos+1, iEMPTY);
2e50 : 160020           	lbra	_86
2e53 :                  _85
2e53 : 4f               	clra
2e54 : 5f               	clrb
2e55 : 3406             	pshs	d
2e57 : e6c9fe51         	ldb	-431,u
2e5b : 4f               	clra
2e5c : c30001           	addd	#$1
2e5f : 3406             	pshs	d
2e61 : e6c9fe52         	ldb	-430,u
2e65 : 4f               	clra
2e66 : 3406             	pshs	d
2e68 : 30c9fe54         	leax	-428,u
2e6c : 3410             	pshs	x
2e6e : 17f513           	lbsr	updateMa
2e71 : 3268             	leas	8,s
                        * 						yPos--;
2e73 :                  _86
2e73 : 30c9fe51         	leax	-431,u
2e77 : e684             	ldb	,x
2e79 : 6a84             	dec	,x
2e7b : 4f               	clra
                        * 						break;
2e7c : 160000           	lbra	_54
                        * 				}
                        * 				undo = false;
2e7f :                  _80
2e7f :                  _54
2e7f : 4f               	clra
2e80 : 5f               	clrb
2e81 : e7c9fe4e         	stb	-434,u
                        * 			}
                        * 			
                        * 			if((key != LEFTARROW) && (key != UPARROW) && (key
2e85 :                  _52
2e85 : e6c9fe4f         	ldb	-433,u
2e89 : 4f               	clra
2e8a : 830009           	subd	#$9
2e8d : 1027002d         	lbeq	_87
2e91 : e6c9fe4f         	ldb	-433,u
2e95 : 4f               	clra
2e96 : 83005e           	subd	#$5e
2e99 : 10270021         	lbeq	_87
2e9d : e6c9fe4f         	ldb	-433,u
2ea1 : 4f               	clra
2ea2 : 830012           	subd	#$12
2ea5 : 10270015         	lbeq	_87
2ea9 : e6c9fe4f         	ldb	-433,u
2ead : 4f               	clra
2eae : 830011           	subd	#$11
2eb1 : 10270009         	lbeq	_87
2eb5 : 4f               	clra
2eb6 : 5f               	clrb
2eb7 : e7c9fe4f         	stb	-433,u
                        * 			else {
2ebb : 16004c           	lbra	_88
2ebe :                  _87
                        * 				if (key != heading) { // change direction when p
AS09 Assembler for M6809 [1.42].                                     Page   35
-------------------------------- sokobanC.a09 --------------------------------

2ebe : e6c9fe50         	ldb	-432,u
2ec2 : 4f               	clra
2ec3 : 3406             	pshs	d
2ec5 : e6c9fe4f         	ldb	-433,u
2ec9 : 4f               	clra
2eca : a3e1             	subd	,s++
2ecc : 1027003a         	lbeq	_89
                        * 					heading = key;	// new direction
2ed0 : e6c9fe4f         	ldb	-433,u
2ed4 : 4f               	clra
2ed5 : e7c9fe50         	stb	-432,u
                        * 					for (x = 0; x < RAMcontCnt; x++) {
2ed9 : 4f               	clra
2eda : 5f               	clrb
2edb : e7c9fe42         	stb	-446,u
2edf :                  _91
2edf : e6c9fe42         	ldb	-446,u
2ee3 : 4f               	clra
2ee4 : 83000a           	subd	#$a
2ee7 : 1024001f         	lbhs	_90
                        * 						updateRAMTile(heading, x);
2eeb : e6c9fe42         	ldb	-446,u
2eef : 4f               	clra
2ef0 : 3406             	pshs	d
2ef2 : e6c9fe50         	ldb	-432,u
2ef6 : 4f               	clra
2ef7 : 3406             	pshs	d
2ef9 : 17f122           	lbsr	updateRA
2efc : 3264             	leas	4,s
                        * 					}
                        * 				}
2efe :                  _92
2efe : 30c9fe42         	leax	-446,u
2f02 : e684             	ldb	,x
2f04 : 6c84             	inc	,x
2f06 : 4f               	clra
2f07 : 16ffd5           	lbra	_91
2f0a :                  _90
                        * 			}
2f0a :                  _89
                        * 		}		
2f0a :                  _88
                        * 		
                        * 		nextxPos = nextyPos = next2xPos = next2yPos = 0;
2f0a :                  _50
2f0a : 4f               	clra
2f0b : 5f               	clrb
2f0c : e7c9fe3d         	stb	-451,u
2f10 : e7c9fe3e         	stb	-450,u
2f14 : e7c9fe3f         	stb	-449,u
2f18 : e7c9fe40         	stb	-448,u
                        * 		switch(heading) {
2f1c : e6c9fe50         	ldb	-432,u
2f20 : 4f               	clra
                        * 		case LEFTARROW : 
                        * 			nextxPos = xPos-1; nextyPos = yPos;
2f21 : 10830009         	cmpd	#$9
2f25 : 1026002d         	lbne	_95
2f29 :                  _94
2f29 : e6c9fe52         	ldb	-430,u
2f2d : 4f               	clra
2f2e : 830001           	subd	#$1
AS09 Assembler for M6809 [1.42].                                     Page   36
-------------------------------- sokobanC.a09 --------------------------------

2f31 : e7c9fe40         	stb	-448,u
2f35 : e6c9fe51         	ldb	-431,u
2f39 : 4f               	clra
2f3a : e7c9fe3f         	stb	-449,u
                        * 			next2xPos = xPos-2; next2yPos = yPos;
2f3e : e6c9fe52         	ldb	-430,u
2f42 : 4f               	clra
2f43 : 830002           	subd	#$2
2f46 : e7c9fe3e         	stb	-450,u
2f4a : e6c9fe51         	ldb	-431,u
2f4e : 4f               	clra
2f4f : e7c9fe3d         	stb	-451,u
                        * 			break;
2f53 : 16009f           	lbra	_93
                        * 		case RIGHTARROW :
                        * 			nextxPos = xPos+1; nextyPos = yPos;
2f56 :                  _95
2f56 : 10830011         	cmpd	#$11
2f5a : 1026002d         	lbne	_97
2f5e :                  _96
2f5e : e6c9fe52         	ldb	-430,u
2f62 : 4f               	clra
2f63 : c30001           	addd	#$1
2f66 : e7c9fe40         	stb	-448,u
2f6a : e6c9fe51         	ldb	-431,u
2f6e : 4f               	clra
2f6f : e7c9fe3f         	stb	-449,u
                        * 			next2xPos = xPos+2; next2yPos = yPos;
2f73 : e6c9fe52         	ldb	-430,u
2f77 : 4f               	clra
2f78 : c30002           	addd	#$2
2f7b : e7c9fe3e         	stb	-450,u
2f7f : e6c9fe51         	ldb	-431,u
2f83 : 4f               	clra
2f84 : e7c9fe3d         	stb	-451,u
                        * 			break;
2f88 : 16006a           	lbra	_93
                        * 		case UPARROW :
                        * 			nextxPos = xPos; nextyPos = yPos-1;
2f8b :                  _97
2f8b : 1083005e         	cmpd	#$5e
2f8f : 1026002d         	lbne	_99
2f93 :                  _98
2f93 : e6c9fe52         	ldb	-430,u
2f97 : 4f               	clra
2f98 : e7c9fe40         	stb	-448,u
2f9c : e6c9fe51         	ldb	-431,u
2fa0 : 4f               	clra
2fa1 : 830001           	subd	#$1
2fa4 : e7c9fe3f         	stb	-449,u
                        * 			next2xPos = xPos; next2yPos = yPos-2;
2fa8 : e6c9fe52         	ldb	-430,u
2fac : 4f               	clra
2fad : e7c9fe3e         	stb	-450,u
2fb1 : e6c9fe51         	ldb	-431,u
2fb5 : 4f               	clra
2fb6 : 830002           	subd	#$2
2fb9 : e7c9fe3d         	stb	-451,u
                        * 			break;
2fbd : 160035           	lbra	_93
                        * 		case DOWNARROW :
                        * 			nextxPos = xPos; nextyPos = yPos+1;
AS09 Assembler for M6809 [1.42].                                     Page   37
-------------------------------- sokobanC.a09 --------------------------------

2fc0 :                  _99
2fc0 : 10830012         	cmpd	#$12
2fc4 : 1026002d         	lbne	_101
2fc8 :                  _100
2fc8 : e6c9fe52         	ldb	-430,u
2fcc : 4f               	clra
2fcd : e7c9fe40         	stb	-448,u
2fd1 : e6c9fe51         	ldb	-431,u
2fd5 : 4f               	clra
2fd6 : c30001           	addd	#$1
2fd9 : e7c9fe3f         	stb	-449,u
                        * 			next2xPos = xPos; next2yPos = yPos+2;
2fdd : e6c9fe52         	ldb	-430,u
2fe1 : 4f               	clra
2fe2 : e7c9fe3e         	stb	-450,u
2fe6 : e6c9fe51         	ldb	-431,u
2fea : 4f               	clra
2feb : c30002           	addd	#$2
2fee : e7c9fe3d         	stb	-451,u
                        * 			break;
2ff2 : 160000           	lbra	_93
                        * 		}
                        * 
                        * 		switch(state) {
2ff5 :                  _101
2ff5 :                  _93
2ff5 : e6c9fe53         	ldb	-429,u
2ff9 : 4f               	clra
                        * 		case standing:
                        * 			{
2ffa : 10830000         	cmpd	#$0
2ffe : 102600cc         	lbne	_104
3002 :                  _103
                        * 				nextTile = getMapTileIndex(map, nextxPos, nextyP
3002 : e6c9fe3f         	ldb	-449,u
3006 : 4f               	clra
3007 : 3406             	pshs	d
3009 : e6c9fe40         	ldb	-448,u
300d : 4f               	clra
300e : 3406             	pshs	d
3010 : 30c9fe54         	leax	-428,u
3014 : 3410             	pshs	x
3016 : 17f3aa           	lbsr	getMapTi
3019 : 3266             	leas	6,s
301b : e7c9fe3c         	stb	-452,u
                        * 				next2Tile = getMapTileIndex(map, next2xPos, next
301f : e6c9fe3d         	ldb	-451,u
3023 : 4f               	clra
3024 : 3406             	pshs	d
3026 : e6c9fe3e         	ldb	-450,u
302a : 4f               	clra
302b : 3406             	pshs	d
302d : 30c9fe54         	leax	-428,u
3031 : 3410             	pshs	x
3033 : 17f38d           	lbsr	getMapTi
3036 : 3266             	leas	6,s
3038 : e7c9fe3b         	stb	-453,u
                        * 				if ((key != 0) && ((nextTile == iEMPTY) || (next
303c : e6c9fe4f         	ldb	-433,u
3040 : 4f               	clra
3041 : 830000           	subd	#$0
3044 : 1027007d         	lbeq	_105
AS09 Assembler for M6809 [1.42].                                     Page   38
-------------------------------- sokobanC.a09 --------------------------------

3048 : e6c9fe3c         	ldb	-452,u
304c : 4f               	clra
304d : 830000           	subd	#$0
3050 : 1027003c         	lbeq	_106
3054 : e6c9fe3c         	ldb	-452,u
3058 : 4f               	clra
3059 : 830002           	subd	#$2
305c : 10270030         	lbeq	_106
3060 : e6c9fe3c         	ldb	-452,u
3064 : 4f               	clra
3065 : 830003           	subd	#$3
3068 : 1027000c         	lbeq	_107
306c : e6c9fe3c         	ldb	-452,u
3070 : 4f               	clra
3071 : 830004           	subd	#$4
3074 : 1026004d         	lbne	_105
3078 :                  _107
3078 : e6c9fe3b         	ldb	-453,u
307c : 4f               	clra
307d : 830002           	subd	#$2
3080 : 1027000c         	lbeq	_108
3084 : e6c9fe3b         	ldb	-453,u
3088 : 4f               	clra
3089 : 830000           	subd	#$0
308c : 10260035         	lbne	_105
3090 :                  _108
3090 :                  _106
                        * 					state = push1;		// begin to move				
3090 : cc0001           	ldd	#$1
3093 : e7c9fe53         	stb	-429,u
                        * 					updateMap(map, xPos, yPos, iPU1);
3097 : cc0006           	ldd	#$6
309a : 3406             	pshs	d
309c : e6c9fe51         	ldb	-431,u
30a0 : 4f               	clra
30a1 : 3406             	pshs	d
30a3 : e6c9fe52         	ldb	-430,u
30a7 : 4f               	clra
30a8 : 3406             	pshs	d
30aa : 30c9fe54         	leax	-428,u
30ae : 3410             	pshs	x
30b0 : 17f2d1           	lbsr	updateMa
30b3 : 3268             	leas	8,s
                        * 					sendstepSound();	// update the data container
30b5 : 17f2a9           	lbsr	sendstep
                        * 					msDelay(PACE);	// execution sync
30b8 : cc0023           	ldd	#$23
30bb : 3406             	pshs	d
30bd : 17ca66           	lbsr	msDelay
30c0 : 3262             	leas	2,s
                        * 				}
                        * 				else key = 0;
30c2 : 160006           	lbra	_109
30c5 :                  _105
30c5 : 4f               	clra
30c6 : 5f               	clrb
30c7 : e7c9fe4f         	stb	-433,u
                        * 			}			
30cb :                  _109
                        * 			break;
30cb : 160490           	lbra	_102
                        * 		case push1:
AS09 Assembler for M6809 [1.42].                                     Page   39
-------------------------------- sokobanC.a09 --------------------------------

                        * 			{
30ce :                  _104
30ce : 10830001         	cmpd	#$1
30d2 : 10260282         	lbne	_111
30d6 :                  _110
                        * 				nextTile = getMapTileIndex(map, nextxPos, nextyP
30d6 : e6c9fe3f         	ldb	-449,u
30da : 4f               	clra
30db : 3406             	pshs	d
30dd : e6c9fe40         	ldb	-448,u
30e1 : 4f               	clra
30e2 : 3406             	pshs	d
30e4 : 30c9fe54         	leax	-428,u
30e8 : 3410             	pshs	x
30ea : 17f2d6           	lbsr	getMapTi
30ed : 3266             	leas	6,s
30ef : e7c9fe3c         	stb	-452,u
                        * 				if(nextTile == iWALL) {
30f3 : e6c9fe3c         	ldb	-452,u
30f7 : 4f               	clra
30f8 : 830001           	subd	#$1
30fb : 10260035         	lbne	_112
                        * 					state = standing;					// stop pushing
30ff : 4f               	clra
3100 : 5f               	clrb
3101 : e7c9fe53         	stb	-429,u
                        * 					updateRAMTile(heading, iMAN_STD);	// data conta
3105 : cc0005           	ldd	#$5
3108 : 3406             	pshs	d
310a : e6c9fe50         	ldb	-432,u
310e : 4f               	clra
310f : 3406             	pshs	d
3111 : 17ef0a           	lbsr	updateRA
3114 : 3264             	leas	4,s
                        * 					updateMap(map, xPos, yPos, iMAN_STD);
3116 : cc0005           	ldd	#$5
3119 : 3406             	pshs	d
311b : e6c9fe51         	ldb	-431,u
311f : 4f               	clra
3120 : 3406             	pshs	d
3122 : e6c9fe52         	ldb	-430,u
3126 : 4f               	clra
3127 : 3406             	pshs	d
3129 : 30c9fe54         	leax	-428,u
312d : 3410             	pshs	x
312f : 17f252           	lbsr	updateMa
3132 : 3268             	leas	8,s
                        * 				}			
                        * 				if((nextTile == iBOX) || (nextTile == iSTO_BOX))
3134 :                  _112
3134 : e6c9fe3c         	ldb	-452,u
3138 : 4f               	clra
3139 : 830003           	subd	#$3
313c : 1027000c         	lbeq	_114
3140 : e6c9fe3c         	ldb	-452,u
3144 : 4f               	clra
3145 : 830004           	subd	#$4
3148 : 10260136         	lbne	_113
314c :                  _114
                        * 					next2Tile = getMapTileIndex(map, next2xPos, nex
314c : e6c9fe3d         	ldb	-451,u
3150 : 4f               	clra
AS09 Assembler for M6809 [1.42].                                     Page   40
-------------------------------- sokobanC.a09 --------------------------------

3151 : 3406             	pshs	d
3153 : e6c9fe3e         	ldb	-450,u
3157 : 4f               	clra
3158 : 3406             	pshs	d
315a : 30c9fe54         	leax	-428,u
315e : 3410             	pshs	x
3160 : 17f260           	lbsr	getMapTi
3163 : 3266             	leas	6,s
3165 : e7c9fe3b         	stb	-453,u
                        * 					if((next2Tile == iEMPTY) || (next2Tile == iSTOR
3169 : e6c9fe3b         	ldb	-453,u
316d : 4f               	clra
316e : 830000           	subd	#$0
3171 : 1027000c         	lbeq	_116
3175 : e6c9fe3b         	ldb	-453,u
3179 : 4f               	clra
317a : 830002           	subd	#$2
317d : 102600cc         	lbne	_115
3181 :                  _116
                        * 						state = push2_box;	// push the box
3181 : cc0003           	ldd	#$3
3184 : e7c9fe53         	stb	-429,u
                        * 						setSound(iSOUND);
3188 : cc0005           	ldd	#$5
318b : 3406             	pshs	d
318d : 17be95           	lbsr	setSound
3190 : 3262             	leas	2,s
                        * 						i = yPos*SCREEN_COL + xPos;
3192 : e6c9fe52         	ldb	-430,u
3196 : 4f               	clra
3197 : 3406             	pshs	d
3199 : cc0015           	ldd	#$15
319c : 3406             	pshs	d
319e : e6c9fe51         	ldb	-431,u
31a2 : 4f               	clra
31a3 : 3510             	puls	x
31a5 : 1703bd           	lbsr	_00001
31a8 : e3e1             	addd	,s++
31aa : edc9fe44         	std	-444,u
                        * 						if (SOKOmap_L1[i] == iSTORAGE) updateMap(map, 
31ae : ecc9fe44         	ldd	-444,u
31b2 : ae58             	ldx	-8,u
31b4 : e68b             	ldb	d,x
31b6 : 4f               	clra
31b7 : 830002           	subd	#$2
31ba : 10260021         	lbne	_117
31be : cc0002           	ldd	#$2
31c1 : 3406             	pshs	d
31c3 : e6c9fe51         	ldb	-431,u
31c7 : 4f               	clra
31c8 : 3406             	pshs	d
31ca : e6c9fe52         	ldb	-430,u
31ce : 4f               	clra
31cf : 3406             	pshs	d
31d1 : 30c9fe54         	leax	-428,u
31d5 : 3410             	pshs	x
31d7 : 17f1aa           	lbsr	updateMa
31da : 3268             	leas	8,s
                        * 						else updateMap(map, xPos, yPos, iEMPTY);						
31dc : 16001d           	lbra	_118
31df :                  _117
31df : 4f               	clra
AS09 Assembler for M6809 [1.42].                                     Page   41
-------------------------------- sokobanC.a09 --------------------------------

31e0 : 5f               	clrb
31e1 : 3406             	pshs	d
31e3 : e6c9fe51         	ldb	-431,u
31e7 : 4f               	clra
31e8 : 3406             	pshs	d
31ea : e6c9fe52         	ldb	-430,u
31ee : 4f               	clra
31ef : 3406             	pshs	d
31f1 : 30c9fe54         	leax	-428,u
31f5 : 3410             	pshs	x
31f7 : 17f18a           	lbsr	updateMa
31fa : 3268             	leas	8,s
                        * 						xPos = nextxPos; yPos = nextyPos; // move to n
31fc :                  _118
31fc : e6c9fe40         	ldb	-448,u
3200 : 4f               	clra
3201 : e7c9fe52         	stb	-430,u
3205 : e6c9fe3f         	ldb	-449,u
3209 : 4f               	clra
320a : e7c9fe51         	stb	-431,u
                        * 						updateMap(map, xPos, yPos, iPU2_MHB);
320e : cc0008           	ldd	#$8
3211 : 3406             	pshs	d
3213 : e6c9fe51         	ldb	-431,u
3217 : 4f               	clra
3218 : 3406             	pshs	d
321a : e6c9fe52         	ldb	-430,u
321e : 4f               	clra
321f : 3406             	pshs	d
3221 : 30c9fe54         	leax	-428,u
3225 : 3410             	pshs	x
3227 : 17f15a           	lbsr	updateMa
322a : 3268             	leas	8,s
                        * 						updateMap(map, next2xPos, next2yPos, iPU2_HB);
322c : cc0009           	ldd	#$9
322f : 3406             	pshs	d
3231 : e6c9fe3d         	ldb	-451,u
3235 : 4f               	clra
3236 : 3406             	pshs	d
3238 : e6c9fe3e         	ldb	-450,u
323c : 4f               	clra
323d : 3406             	pshs	d
323f : 30c9fe54         	leax	-428,u
3243 : 3410             	pshs	x
3245 : 17f13c           	lbsr	updateMa
3248 : 3268             	leas	8,s
                        * 					}
                        * 					else {
324a : 160035           	lbra	_119
324d :                  _115
                        * 						state = standing;					// cannot push anymore
324d : 4f               	clra
324e : 5f               	clrb
324f : e7c9fe53         	stb	-429,u
                        * 						updateRAMTile(heading, iMAN_STD);	// data cont
3253 : cc0005           	ldd	#$5
3256 : 3406             	pshs	d
3258 : e6c9fe50         	ldb	-432,u
325c : 4f               	clra
325d : 3406             	pshs	d
325f : 17edbc           	lbsr	updateRA
3262 : 3264             	leas	4,s
AS09 Assembler for M6809 [1.42].                                     Page   42
-------------------------------- sokobanC.a09 --------------------------------

                        * 						updateMap(map, xPos, yPos, iMAN_STD);
3264 : cc0005           	ldd	#$5
3267 : 3406             	pshs	d
3269 : e6c9fe51         	ldb	-431,u
326d : 4f               	clra
326e : 3406             	pshs	d
3270 : e6c9fe52         	ldb	-430,u
3274 : 4f               	clra
3275 : 3406             	pshs	d
3277 : 30c9fe54         	leax	-428,u
327b : 3410             	pshs	x
327d : 17f104           	lbsr	updateMa
3280 : 3268             	leas	8,s
                        * 					}
                        * 				}
3282 :                  _119
                        * 				if((nextTile == iEMPTY) || (nextTile == iSTORAGE
3282 :                  _113
3282 : e6c9fe3c         	ldb	-452,u
3286 : 4f               	clra
3287 : 830000           	subd	#$0
328a : 1027000c         	lbeq	_121
328e : e6c9fe3c         	ldb	-452,u
3292 : 4f               	clra
3293 : 830002           	subd	#$2
3296 : 102600ab         	lbne	_120
329a :                  _121
                        * 					state = push2_empty;	// push the box
329a : cc0002           	ldd	#$2
329d : e7c9fe53         	stb	-429,u
                        * 					setSound(iSOUND);
32a1 : cc0005           	ldd	#$5
32a4 : 3406             	pshs	d
32a6 : 17bd7c           	lbsr	setSound
32a9 : 3262             	leas	2,s
                        * 					i = yPos*SCREEN_COL + xPos;
32ab : e6c9fe52         	ldb	-430,u
32af : 4f               	clra
32b0 : 3406             	pshs	d
32b2 : cc0015           	ldd	#$15
32b5 : 3406             	pshs	d
32b7 : e6c9fe51         	ldb	-431,u
32bb : 4f               	clra
32bc : 3510             	puls	x
32be : 1702a4           	lbsr	_00001
32c1 : e3e1             	addd	,s++
32c3 : edc9fe44         	std	-444,u
                        * 					if (SOKOmap_L1[i] == iSTORAGE) updateMap(map, x
32c7 : ecc9fe44         	ldd	-444,u
32cb : ae58             	ldx	-8,u
32cd : e68b             	ldb	d,x
32cf : 4f               	clra
32d0 : 830002           	subd	#$2
32d3 : 10260021         	lbne	_122
32d7 : cc0002           	ldd	#$2
32da : 3406             	pshs	d
32dc : e6c9fe51         	ldb	-431,u
32e0 : 4f               	clra
32e1 : 3406             	pshs	d
32e3 : e6c9fe52         	ldb	-430,u
32e7 : 4f               	clra
32e8 : 3406             	pshs	d
AS09 Assembler for M6809 [1.42].                                     Page   43
-------------------------------- sokobanC.a09 --------------------------------

32ea : 30c9fe54         	leax	-428,u
32ee : 3410             	pshs	x
32f0 : 17f091           	lbsr	updateMa
32f3 : 3268             	leas	8,s
                        * 					else updateMap(map, xPos, yPos, iEMPTY);
32f5 : 16001d           	lbra	_123
32f8 :                  _122
32f8 : 4f               	clra
32f9 : 5f               	clrb
32fa : 3406             	pshs	d
32fc : e6c9fe51         	ldb	-431,u
3300 : 4f               	clra
3301 : 3406             	pshs	d
3303 : e6c9fe52         	ldb	-430,u
3307 : 4f               	clra
3308 : 3406             	pshs	d
330a : 30c9fe54         	leax	-428,u
330e : 3410             	pshs	x
3310 : 17f071           	lbsr	updateMa
3313 : 3268             	leas	8,s
                        * 					xPos = nextxPos; yPos = nextyPos; // move to ne
3315 :                  _123
3315 : e6c9fe40         	ldb	-448,u
3319 : 4f               	clra
331a : e7c9fe52         	stb	-430,u
331e : e6c9fe3f         	ldb	-449,u
3322 : 4f               	clra
3323 : e7c9fe51         	stb	-431,u
                        * 					updateMap(map, xPos, yPos, iPU2_MAN);				
3327 : cc0007           	ldd	#$7
332a : 3406             	pshs	d
332c : e6c9fe51         	ldb	-431,u
3330 : 4f               	clra
3331 : 3406             	pshs	d
3333 : e6c9fe52         	ldb	-430,u
3337 : 4f               	clra
3338 : 3406             	pshs	d
333a : 30c9fe54         	leax	-428,u
333e : 3410             	pshs	x
3340 : 17f041           	lbsr	updateMa
3343 : 3268             	leas	8,s
                        * 				}				
                        * 				key = 0;	// move lock end				
3345 :                  _120
3345 : 4f               	clra
3346 : 5f               	clrb
3347 : e7c9fe4f         	stb	-433,u
                        * 				msDelay(PACE);	// execution sync
334b : cc0023           	ldd	#$23
334e : 3406             	pshs	d
3350 : 17c7d3           	lbsr	msDelay
3353 : 3262             	leas	2,s
                        * 				break;
3355 : 160206           	lbra	_102
                        * 			}
                        * 		case push2_empty:
                        * 			if (key != 0) {
3358 :                  _111
3358 : 10830002         	cmpd	#$2
335c : 10260096         	lbne	_125
3360 :                  _124
3360 : e6c9fe4f         	ldb	-433,u
AS09 Assembler for M6809 [1.42].                                     Page   44
-------------------------------- sokobanC.a09 --------------------------------

3364 : 4f               	clra
3365 : 830000           	subd	#$0
3368 : 10270028         	lbeq	_126
                        * 				state = push1;	// prepare to move to the next fi
336c : cc0001           	ldd	#$1
336f : e7c9fe53         	stb	-429,u
                        * 				updateMap(map, xPos, yPos, iPU1);				
3373 : cc0006           	ldd	#$6
3376 : 3406             	pshs	d
3378 : e6c9fe51         	ldb	-431,u
337c : 4f               	clra
337d : 3406             	pshs	d
337f : e6c9fe52         	ldb	-430,u
3383 : 4f               	clra
3384 : 3406             	pshs	d
3386 : 30c9fe54         	leax	-428,u
338a : 3410             	pshs	x
338c : 17eff5           	lbsr	updateMa
338f : 3268             	leas	8,s
                        * 			}
                        * 			else {
3391 : 160035           	lbra	_127
3394 :                  _126
                        * 				state = standing;	// stop moving
3394 : 4f               	clra
3395 : 5f               	clrb
3396 : e7c9fe53         	stb	-429,u
                        * 				updateRAMTile(heading, iMAN_STD);	// data contai
339a : cc0005           	ldd	#$5
339d : 3406             	pshs	d
339f : e6c9fe50         	ldb	-432,u
33a3 : 4f               	clra
33a4 : 3406             	pshs	d
33a6 : 17ec75           	lbsr	updateRA
33a9 : 3264             	leas	4,s
                        * 				updateMap(map, xPos, yPos, iMAN_STD);
33ab : cc0005           	ldd	#$5
33ae : 3406             	pshs	d
33b0 : e6c9fe51         	ldb	-431,u
33b4 : 4f               	clra
33b5 : 3406             	pshs	d
33b7 : e6c9fe52         	ldb	-430,u
33bb : 4f               	clra
33bc : 3406             	pshs	d
33be : 30c9fe54         	leax	-428,u
33c2 : 3410             	pshs	x
33c4 : 17efbd           	lbsr	updateMa
33c7 : 3268             	leas	8,s
                        * 			}
                        * 			moveStr[0]++; printScoreboard(moveStr, pushStr);
33c9 :                  _127
33c9 : 30c9fe46         	leax	-442,u
33cd : e684             	ldb	,x
33cf : 6c84             	inc	,x
33d1 : 4f               	clra
33d2 : 30c9fe4a         	leax	-438,u
33d6 : 3410             	pshs	x
33d8 : 30c9fe46         	leax	-442,u
33dc : 3410             	pshs	x
33de : 17f059           	lbsr	printSco
33e1 : 3264             	leas	4,s
                        * 			undo = false;
AS09 Assembler for M6809 [1.42].                                     Page   45
-------------------------------- sokobanC.a09 --------------------------------

33e3 : 4f               	clra
33e4 : 5f               	clrb
33e5 : e7c9fe4e         	stb	-434,u
                        * 			msDelay(PACE);	// execution sync			
33e9 : cc0023           	ldd	#$23
33ec : 3406             	pshs	d
33ee : 17c735           	lbsr	msDelay
33f1 : 3262             	leas	2,s
                        * 			break;
33f3 : 160168           	lbra	_102
                        * 		case push2_box:
                        * 			if (key != 0) {
33f6 :                  _125
33f6 : 10830003         	cmpd	#$3
33fa : 10260160         	lbne	_129
33fe :                  _128
33fe : e6c9fe4f         	ldb	-433,u
3402 : 4f               	clra
3403 : 830000           	subd	#$0
3406 : 10270028         	lbeq	_130
                        * 				state = push1;	// keep pushing box through next 
340a : cc0001           	ldd	#$1
340d : e7c9fe53         	stb	-429,u
                        * 				updateMap(map, xPos, yPos, iPU1);
3411 : cc0006           	ldd	#$6
3414 : 3406             	pshs	d
3416 : e6c9fe51         	ldb	-431,u
341a : 4f               	clra
341b : 3406             	pshs	d
341d : e6c9fe52         	ldb	-430,u
3421 : 4f               	clra
3422 : 3406             	pshs	d
3424 : 30c9fe54         	leax	-428,u
3428 : 3410             	pshs	x
342a : 17ef57           	lbsr	updateMa
342d : 3268             	leas	8,s
                        * 			}
                        * 			else {
342f : 160035           	lbra	_131
3432 :                  _130
                        * 				updateRAMTile(heading, iMAN_STD);	// data contai
3432 : cc0005           	ldd	#$5
3435 : 3406             	pshs	d
3437 : e6c9fe50         	ldb	-432,u
343b : 4f               	clra
343c : 3406             	pshs	d
343e : 17ebdd           	lbsr	updateRA
3441 : 3264             	leas	4,s
                        * 				state = standing;
3443 : 4f               	clra
3444 : 5f               	clrb
3445 : e7c9fe53         	stb	-429,u
                        * 				updateMap(map, xPos, yPos, iMAN_STD);
3449 : cc0005           	ldd	#$5
344c : 3406             	pshs	d
344e : e6c9fe51         	ldb	-431,u
3452 : 4f               	clra
3453 : 3406             	pshs	d
3455 : e6c9fe52         	ldb	-430,u
3459 : 4f               	clra
345a : 3406             	pshs	d
345c : 30c9fe54         	leax	-428,u
AS09 Assembler for M6809 [1.42].                                     Page   46
-------------------------------- sokobanC.a09 --------------------------------

3460 : 3410             	pshs	x
3462 : 17ef1f           	lbsr	updateMa
3465 : 3268             	leas	8,s
                        * 			}
                        * 			i = nextyPos*SCREEN_COL + nextxPos;
3467 :                  _131
3467 : e6c9fe40         	ldb	-448,u
346b : 4f               	clra
346c : 3406             	pshs	d
346e : cc0015           	ldd	#$15
3471 : 3406             	pshs	d
3473 : e6c9fe3f         	ldb	-449,u
3477 : 4f               	clra
3478 : 3510             	puls	x
347a : 1700e8           	lbsr	_00001
347d : e3e1             	addd	,s++
347f : edc9fe44         	std	-444,u
                        * 			if (SOKOmap_L1[i] == iSTORAGE) {
3483 : ecc9fe44         	ldd	-444,u
3487 : ae58             	ldx	-8,u
3489 : e68b             	ldb	d,x
348b : 4f               	clra
348c : 830002           	subd	#$2
348f : 10260076         	lbne	_132
                        * 				updateMap(map, nextxPos, nextyPos, iSTO_BOX); //
3493 : cc0004           	ldd	#$4
3496 : 3406             	pshs	d
3498 : e6c9fe3f         	ldb	-449,u
349c : 4f               	clra
349d : 3406             	pshs	d
349f : e6c9fe40         	ldb	-448,u
34a3 : 4f               	clra
34a4 : 3406             	pshs	d
34a6 : 30c9fe54         	leax	-428,u
34aa : 3410             	pshs	x
34ac : 17eed5           	lbsr	updateMa
34af : 3268             	leas	8,s
                        * 				// check if all boxes are stored
                        * 				i = 0;
34b1 : 4f               	clra
34b2 : 5f               	clrb
34b3 : edc9fe44         	std	-444,u
                        * 				while ((i < MAP_SIZE) && (map[i] != iBOX)) { i++
34b7 :                  _134
34b7 : ecc9fe44         	ldd	-444,u
34bb : 8301a4           	subd	#$1a4
34be : 10240023         	lbhs	_133
34c2 : ecc9fe44         	ldd	-444,u
34c6 : 30c9fe54         	leax	-428,u
34ca : e68b             	ldb	d,x
34cc : 4f               	clra
34cd : 830003           	subd	#$3
34d0 : 10270011         	lbeq	_133
34d4 : ecc9fe44         	ldd	-444,u
34d8 : c30001           	addd	#$1
34db : edc9fe44         	std	-444,u
34df : 830001           	subd	#$1
34e2 : 16ffd2           	lbra	_134
34e5 :                  _133
                        * 				if (i == MAP_SIZE) {
34e5 : ecc9fe44         	ldd	-444,u
34e9 : 8301a4           	subd	#$1a4
AS09 Assembler for M6809 [1.42].                                     Page   47
-------------------------------- sokobanC.a09 --------------------------------

34ec : 10260016         	lbne	_135
                        * 					sendString(6, 10, gameEnded);
34f0 : ec5a             	ldd	-6,u
34f2 : 3406             	pshs	d
34f4 : cc000a           	ldd	#$a
34f7 : 3406             	pshs	d
34f9 : cc0006           	ldd	#$6
34fc : 3406             	pshs	d
34fe : 17eee1           	lbsr	sendStri
3501 : 3266             	leas	6,s
                        * 					while(1); // stop here
3503 :                  _137
3503 : 16fffd           	lbra	_137
                        * 				}
3506 :                  _136
                        * 			}
3506 :                  _135
                        * 			else updateMap(map, nextxPos, nextyPos, iBOX);
3506 : 16001e           	lbra	_138
3509 :                  _132
3509 : cc0003           	ldd	#$3
350c : 3406             	pshs	d
350e : e6c9fe3f         	ldb	-449,u
3512 : 4f               	clra
3513 : 3406             	pshs	d
3515 : e6c9fe40         	ldb	-448,u
3519 : 4f               	clra
351a : 3406             	pshs	d
351c : 30c9fe54         	leax	-428,u
3520 : 3410             	pshs	x
3522 : 17ee5f           	lbsr	updateMa
3525 : 3268             	leas	8,s
                        * 			moveStr[0]++; pushStr[0]++; printScoreboard(moveS
3527 :                  _138
3527 : 30c9fe46         	leax	-442,u
352b : e684             	ldb	,x
352d : 6c84             	inc	,x
352f : 4f               	clra
3530 : 30c9fe4a         	leax	-438,u
3534 : e684             	ldb	,x
3536 : 6c84             	inc	,x
3538 : 4f               	clra
3539 : 30c9fe4a         	leax	-438,u
353d : 3410             	pshs	x
353f : 30c9fe46         	leax	-442,u
3543 : 3410             	pshs	x
3545 : 17eef2           	lbsr	printSco
3548 : 3264             	leas	4,s
                        * 			undo = true;			
354a : cc0001           	ldd	#$1
354d : e7c9fe4e         	stb	-434,u
                        * 			msDelay(PACE);	// execution sync			
3551 : cc0023           	ldd	#$23
3554 : 3406             	pshs	d
3556 : 17c5cd           	lbsr	msDelay
3559 : 3262             	leas	2,s
                        * 			break;
355b : 160000           	lbra	_102
                        * 		}
                        * 	}
355e :                  _129
355e :                  _102
AS09 Assembler for M6809 [1.42].                                     Page   48
-------------------------------- sokobanC.a09 --------------------------------

                        * }
355e : 16f356           	lbra	_49
3561 :                  _48
3561 : 32c4             	leas	,u
3563 : 35c0             	puls	u,pc
                        * 
0000 =                  _GLOBALS	equ	0
                        
                        *
                        * micro-c driver under flex
                        *
                        *	12-dec-81	m.ohta,h.tezuka
                        *
                        
3565 : 3436             _00001	pshs	d,x,y		;multiply	
3567 : a6e4             		lda	,s
3569 : e663             		ldb	3,s
356b : 3d               		mul
356c : e764             		stb	4,s		
356e : ec61             		ldd	1,s
3570 : 3d               		mul
3571 : e765             		stb	5,s		
3573 : a661             		lda	1,s
3575 : e663             		ldb	3,s
3577 : 3d               		mul
3578 : ab64             		adda	4,s
357a : ab65             		adda	5,s		
357c : 3266             		leas	6,s
357e : 39               		rts
                        
357f : 6fe2             _00002	clr	,-s				; signed divide	
3581 : 8c0000           		cmpx	#0
3584 : 2a09             		bpl	_02000		
3586 : 63e4             		com	,s		
3588 : 1e01             		exg	d,x
358a : 170095           		lbsr	_00020
358d : 1e01             		exg	d,x
358f : 4d               _02000	tsta
3590 : 2a05             		bpl	_02001		
3592 : 63e4             		com	,s		
3594 : 17008b           		lbsr	_00020	
3597 : 17008d           _02001	lbsr	_00010
359a : 1f10             		tfr	x,d
359c : 6de0             		tst	,s+
359e : 2a03             		bpl	_02002		
35a0 : 17007f           		lbsr	_00020	
35a3 : 39               _02002	rts
                        
35a4 : 170080           _00003	lbsr	_00010		; unsigned divide
35a7 : 1f10             		tfr	x,d
35a9 : 39               		rts
                        
35aa : 6fe2             _00004	clr	,-s				; signed modulous	
35ac : 8c0000           		cmpx	#0
35af : 2a06             		bpl	_04000		
35b1 : 1e01             		exg	d,x
35b3 : 8d6d             		bsr	_00020
35b5 : 1e01             		exg	d,x
35b7 : 4d               _04000	tsta
35b8 : 2a04             		bpl	_04001		
35ba : 63e4             		com	,s
35bc : 8d64             		bsr	_00020	
AS09 Assembler for M6809 [1.42].                                     Page   49
-------------------------------- sokobanC.a09 --------------------------------

35be : 8d67             _04001	bsr	_00010	
35c0 : 6de0             		tst	,s+
35c2 : 2a02             		bpl	_04002		
35c4 : 8d5c             		bsr	_00020	
35c6 : 39               _04002	rts
                        
35c7 : 8d5e             _00005	bsr	_00010		; unsigned modulous
35c9 : 39               		rts
                        
35ca : 8c0000           _00006	cmpx	#0		; signed left shift
35cd : 2b08             		bmi	_06001 
35cf : 270e             _06000	beq	_06009
35d1 : 58               		lslb
35d2 : 49               		rola
35d3 : 301f             		leax	-1,x
35d5 : 20f8             		bra	_06000	
35d7 : 2706             _06001	beq	_06009
35d9 : 47               		asra
35da : 56               		rorb
35db : 3001             		leax	1,x
35dd : 20f8             		bra	_06001	
35df : 39               _06009	rts
                        
35e0 : 8c0000           _00007	cmpx	#0		; unsined left shift
35e3 : 2b08             		bmi	_07001	
35e5 : 270e             _07000	beq	_07009
35e7 : 58               		lslb
35e8 : 49               		rola
35e9 : 301f             		leax	-1,x
35eb : 20f8             		bra	_07000	
35ed : 2706             _07001	beq	_07009
35ef : 44               		lsra
35f0 : 56               		rorb
35f1 : 3001             		leax	1,x
35f3 : 20f8             		bra	_07001	
35f5 : 39               _07009	rts
                        
35f6 : 8c0000           _00008	cmpx	#0		; signed right shift
35f9 : 2b08             		bmi	_08001	
35fb : 270e             _08000	beq	_08009
35fd : 47               		asra
35fe : 56               		rorb
35ff : 301f             		leax	-1,x
3601 : 20f8             		bra	_08000
                        	
3603 : 2706             _08001	beq	_08009
3605 : 58               		lslb
3606 : 49               		rola
3607 : 3001             		leax	1,x
3609 : 20f8             		bra	_08001	
360b : 39               _08009	rts
                        
360c : 8c0000           _00009	cmpx	#0		; unsined right shift
360f : 2b08             		bmi	_09001	
3611 : 270e             _09000	beq	_09009
3613 : 44               		lsra
3614 : 56               		rorb
3615 : 301f             		leax	-1,x
3617 : 20f8             		bra	_09000	
3619 : 2706             _09001	beq	_09009
361b : 58               		lslb
361c : 49               		rola
AS09 Assembler for M6809 [1.42].                                     Page   50
-------------------------------- sokobanC.a09 --------------------------------

361d : 3001             		leax	1,x
361f : 20f8             		bra	_09001	
3621 : 39               _09009	rts
                        
3622 : 40               _00020	nega			;negate d reg
3623 : 50               		negb
3624 : 8200             		sbca	#0
3626 : 39               		rts
                        
3627 : 3416             _00010	pshs	d,x		;divide subroutine	
3629 : 4f               		clra
362a : 5f               		clrb	
362b : 8e0011           		ldx	#17
                        	
362e : a362             _00011	subd	2,s
3630 : 2402             		bcc	_00012	
3632 : e362             		addd	2,s
                        	
3634 : 6961             _00012	rol	1,s
3636 : 69e4             		rol	,s
3638 : 59               		rolb
3639 : 49               		rola	
363a : 301f             		leax	-1,x
363c : 26f0             		bne	_00011	
363e : 46               		rora
363f : 56               		rorb	
3640 : 6361             		com	1,s
3642 : 63e4             		com	,s
3644 : 3510             		puls	x	
3646 : 3262             		leas	2,s
3648 : 39               		rts
                        
                        
3649 : 12               _progEnd			nop		; label to init to GV stack C code
                        
                        ;----------------- asm resources ROM 2.1.0.3 ---------
eebc =                  APL_OutputStream	equ		$eebc
eebc =                  APL_Outp			equ		APL_OutputStream
f2ed =                  sMONITORSTART 		equ 	$f2ed
f357 =                  sMonProcessCmd 		equ		$f357
                        
fa89 =                  PUTSTR				equ		$fa89
fa89 =                  print_De 			equ		PUTSTR
facd =                  HEXBYTE2			equ		$facd
fa98 =                  HEXWORD2			equ		$fa98
faed =                  BYTE2MON			equ		$faed
fb26 =                  msDelay				equ		$fb26
                        
efc1 =                  setpoint			equ		$efc1
efe5 =                  setTile				equ		$efe5
f025 =                  setSound			equ		$f025
ef59 =                  isKeyboa			equ		$ef59
ef3c =                  getKeybo			equ		$ef3c
f042 =                  sendCont 			equ 	$f042
                        
a64e =                  initDISK			equ		$a64e
b3b7 =                  FILE_Clo 			equ 	$b3b7
b3ce =                  FILE_Del 			equ 	$b3ce
b456 =                  FILE_Get 			equ 	$b456
bc56 =                  FILE_Lis 			equ 	$bc56
af7c =                  FILE_Ope 			equ 	$af7c
b574 =                  FILE_Put 			equ 	$b574
AS09 Assembler for M6809 [1.42].                                     Page   51
-------------------------------- sokobanC.a09 --------------------------------

                        
                        ;-----------------------------------------------------
                        
                        					end
No errors in pass 2.
