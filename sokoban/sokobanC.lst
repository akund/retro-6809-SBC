AS09 Assembler for M6809 [1.42].                                     Page    1
-------------------------------- sokobanC.a09 --------------------------------

-------------------------------- Symbol Table --------------------------------

              Symbol   Value        Decimal

            APL_Outp : $f121          61729
    APL_OutputStream : $f121          61729
            asm_loop : $2021           8225
            BYTE2MON : $fe17          65047
        CallBackAddr : $fffe             -2
                  CR : $000d             13
             GV_Size : $0002              2
            getKeybo : $f1a1          61857
            getMapTi : $2404           9220
            HEXBYTE2 : $fdf7          65015
            isKeyboa : $f1be          61886
      KeyboardRbHead : $7fe4          32740
      KeyboardRbSize : $0008              8
      KeyboardRbTail : $7fe5          32741
     KeyboardRbuffer : $7fe6          32742
                main : $2587           9607
             msDelay : $f2de          62174
              PUTSTR : $fdb3          64947
            printSco : $247b           9339
              ROMlib : $2049           8265
               START : $2000           8192
            sendCont : $f2a7          62119
            sendStri : $2423           9251
            sendstep : $23a1           9121
            setpoint : $f226          61990
            setSound : $f28a          62090
             setTile : $f24a          62026
      sGV_IndexBegin : $0000              0
       sMONITORSTART : $f635          63029
      sMonProcessCmd : $f69f          63135
                UART : $d000          53248
            updateMa : $23c4           9156
            updateRA : $2064           8292
             VERSION : $203a           8250
             waitCTS : $f332          62258
        waitSendDone : $f32a          62250
            _GLOBALS : $0000              0
              _00001 : $35a6          13734
              _00002 : $35c0          13760
              _00003 : $35e5          13797
              _00004 : $35eb          13803
              _00005 : $3608          13832
              _00006 : $360b          13835
              _00007 : $3621          13857
              _00008 : $3637          13879
              _00009 : $364d          13901
              _00010 : $3668          13928
              _00011 : $366f          13935
              _00012 : $3675          13941
              _00020 : $3663          13923
              _02000 : $35d0          13776
              _02001 : $35d8          13784
              _02002 : $35e4          13796
              _04000 : $35f8          13816
              _04001 : $35ff          13823
              _04002 : $3607          13831
              _06000 : $3610          13840
              _06001 : $3618          13848
AS09 Assembler for M6809 [1.42].                                     Page    2
-------------------------------- sokobanC.a09 --------------------------------

              _06009 : $3620          13856
              _07000 : $3626          13862
              _07001 : $362e          13870
              _07009 : $3636          13878
              _08000 : $363c          13884
              _08001 : $3644          13892
              _08009 : $364c          13900
              _09000 : $3652          13906
              _09001 : $365a          13914
              _09009 : $3662          13922
                 _10 : $2383           9091
                _100 : $3009          12297
                _101 : $3036          12342
                _102 : $359f          13727
                _103 : $3043          12355
                _104 : $310f          12559
                _105 : $3106          12550
                _106 : $30d1          12497
                _107 : $30b9          12473
                _108 : $30d1          12497
                _109 : $310c          12556
                 _11 : $2375           9077
                _110 : $3117          12567
                _111 : $3399          13209
                _112 : $3175          12661
                _113 : $32c3          12995
                _114 : $318d          12685
                _115 : $328e          12942
                _116 : $31c2          12738
                _117 : $3220          12832
                _118 : $323d          12861
                _119 : $32c3          12995
                 _12 : $2383           9091
                _120 : $3386          13190
                _121 : $32db          13019
                _122 : $3339          13113
                _123 : $3356          13142
                _124 : $33a1          13217
                _125 : $3437          13367
                _126 : $33d5          13269
                _127 : $340a          13322
                _128 : $343f          13375
                _129 : $359f          13727
                 _13 : $23b0           9136
                _130 : $3473          13427
                _131 : $34a8          13480
                _132 : $354a          13642
                _133 : $3526          13606
                _134 : $34f8          13560
                _135 : $3547          13639
                _136 : $3547          13639
                _137 : $3544          13636
                _138 : $3568          13672
                _13_ : $23ad           9133
                 _14 : $2479           9337
                 _15 : $243c           9276
                 _16 : $2453           9299
                 _17 : $2465           9317
                 _18 : $24c3           9411
                 _19 : $2485           9349
                  _2 : $2252           8786
                 _20 : $24b9           9401
AS09 Assembler for M6809 [1.42].                                     Page    3
-------------------------------- sokobanC.a09 --------------------------------

                 _21 : $24b9           9401
                 _22 : $2503           9475
                 _23 : $24c7           9415
                 _24 : $24f9           9465
                 _25 : $2545           9541
                 _26 : $2507           9479
                 _27 : $253b           9531
                 _28 : $253b           9531
                 _29 : $2585           9605
                 _2_ : $2072           8306
                  _3 : $238e           9102
                 _30 : $2549           9545
                 _31 : $257b           9595
                 _32 : $25ab           9643
                _32_ : $2595           9621
                 _33 : $25cb           9675
                _33_ : $25b5           9653
                 _34 : $25e0           9696
                _34_ : $25d5           9685
                 _35 : $27b6          10166
                _35_ : $2612           9746
                 _36 : $27eb          10219
                 _37 : $27c0          10176
                 _38 : $27df          10207
                 _39 : $2867          10343
                  _4 : $225c           8796
                 _40 : $27f1          10225
                 _41 : $285b          10331
                 _42 : $285b          10331
                 _43 : $2803          10243
                 _44 : $284f          10319
                 _45 : $28e7          10471
                 _46 : $28ae          10414
                 _47 : $28db          10459
                 _48 : $35a2          13730
                 _49 : $28f8          10488
                  _5 : $2383           9091
                 _50 : $2f4b          12107
                 _51 : $293c          10556
                 _52 : $2ec6          11974
                 _53 : $2954          10580
                 _54 : $2ec0          11968
                 _55 : $2979          10617
                 _56 : $2ac4          10948
                 _57 : $2a25          10789
                 _58 : $29e8          10728
                 _59 : $2a1e          10782
                  _6 : $2309           8969
                 _60 : $2a25          10789
                 _61 : $2a98          10904
                 _62 : $2ab8          10936
                 _63 : $2acc          10956
                 _64 : $2c17          11287
                 _65 : $2b78          11128
                 _66 : $2b3b          11067
                 _67 : $2b71          11121
                 _68 : $2b78          11128
                 _69 : $2beb          11243
                  _7 : $2285           8837
                 _70 : $2c0b          11275
                 _71 : $2c1f          11295
                 _72 : $2d6d          11629
AS09 Assembler for M6809 [1.42].                                     Page    4
-------------------------------- sokobanC.a09 --------------------------------

                 _73 : $2ccb          11467
                 _74 : $2c8e          11406
                 _75 : $2cc4          11460
                 _76 : $2ccb          11467
                 _77 : $2d3e          11582
                 _78 : $2d5e          11614
                 _79 : $2d75          11637
                  _8 : $22f8           8952
                 _80 : $2ec0          11968
                 _81 : $2e21          11809
                 _82 : $2de4          11748
                 _83 : $2e1a          11802
                 _84 : $2e21          11809
                 _85 : $2e94          11924
                 _86 : $2eb4          11956
                 _87 : $2eff          12031
                 _88 : $2f4b          12107
                 _89 : $2f4b          12107
                  _9 : $2306           8966
                 _90 : $2f4b          12107
                 _91 : $2f20          12064
                 _92 : $2f3f          12095
                 _93 : $3036          12342
                 _94 : $2f6a          12138
                 _95 : $2f97          12183
                 _96 : $2f9f          12191
                 _97 : $2fcc          12236
                 _98 : $2fd4          12244
                 _99 : $3001          12289
            __6809__ : $0001              1

212 labels used

2879 lines read, no errors in pass 1.
AS09 Assembler for M6809 [1.42].                                     Page    5
-------------------------------- sokobanC.a09 --------------------------------

                        					code
2000 =                  					org     $2000
                        
                        ;-------------------- program start ------------------
2000 : 108e0000         START				ldy		#0									; RAM begin
2004 : 31a90002         					leay	GV_Size,y							; the global variables alloc
                        					
2008 : 8e203a           					ldx		#VERSION							; version at run begin
200b : 3410             					pshs	x
200d : 8efdb3           					ldx		#PUTSTR 					
2010 : 3410             					pshs	x
2012 : 170034           					lbsr	ROMlib
2015 : 3264             					leas	4,s
                        
2017 : 8ef635           					ldx		#sMONITORSTART						; print help menu at sta
201a : 3410             					pshs	x
201c : 17002a           					lbsr	ROMlib
201f : 3262             					leas	2,s					
                        
                        					;---------- endless loop  ------------------
2021 : 8ef69f           asm_loop   			ldx		#sMonProcessCmd						; monitor recu
2024 : 3410             					pshs	x
2026 : 170020           					lbsr	ROMlib
2029 : 3262             					leas	2,s					
                        					
202b : 8ef121           					ldx		#APL_OutputStream					; I/Os handling
202e : 3410             					pshs	x
2030 : 170016           					lbsr	ROMlib
2033 : 3262             					leas	2,s					
                        					
2035 : 17054f           					lbsr	main								; C environement recussive call	
2038 : 20e7             					bra		asm_loop
203a : 0d736f6b6f6261.. VERSION     		db      13,"sokoban 0.1, ",0				; versio
                        		
                        ;-------------- ROMlib called function wrapper -------
2049 : 3510             ROMlib				puls	x									; retrieve the call return ad
204b : afa9fffe         					stx		CallBackAddr,y						; save the call return a
204f : 3510             					puls	x									; retrieve the called funct addr (
2051 : 31a9fffe         					leay    -GV_Size,y  						; restore to ROM GV sta
2055 : ad84             					jsr     ,x									; executed the called function
2057 : 31a90002         					leay    GV_Size,y  							; get back app GV stack
205b : 327e             					leas	-2,s								; re-allocate the arg1 space
205d : aea9fffe         					ldx		CallBackAddr,y
2061 : 3410             					pshs	x									; re-allocate the call return addr
2063 : 39               					rts
                        
                        * micro-C(ver 0.4.1), 1981-1987 Masataka Ohta, Hiroshi
                        * /***************************************************
                        * /*                                                  
                        * /* file:           main.c			                        
                        * /*                                                  
                        * /* source:        2021, written by Adrian Kundert (a
                        * /*                                                  
                        * /* description:   Sokoban game (C application for mi
                        * /*                                                  
                        * /* This library is free software; you can redistribu
                        * /* GNU Lesser General Public License as published by
                        * /* either version 2.1 of the License, or (at your op
                        * /*                                                  
                        * /* This library is distributed in the hope that it w
                        * /* without even the implied warranty of MERCHANTABIL
                        * /* See the GNU Lesser General Public License for mor
AS09 Assembler for M6809 [1.42].                                     Page    6
-------------------------------- sokobanC.a09 --------------------------------

                        * /*                                                  
                        * /***************************************************
                        * 
                        * // ! Micro-C variable max 14 characters, only the fi
                        * #define true 			1
                        * #define false 			0
                        * 
                        * #define TileMemSize 	32
                        * #define RAMcontCnt 		10
                        * 
                        * // APL PS2 keyboard
                        * #define UPARROW			0x5e
                        * #define LEFTARROW		0x09
                        * #define DOWNARROW		0x12
                        * #define RIGHTARROW		0x11
                        * 
                        * #define SCREEN_ROW		20
                        * #define SCREEN_COL		21
                        * #define MAP_SIZE		420 //SCREEN_ROW * SCREEN_COL
                        * 
                        * #define iEMPTY		0
                        * #define iWALL		1
                        * #define iSTORAGE	2
                        * #define iBOX		3
                        * #define iSTO_BOX	4
                        * #define iMAN_STD	5
                        * #define iPU1		6
                        * #define iPU2_MAN	7
                        * #define iPU2_MHB	8
                        * #define iPU2_HB		9
                        * 
                        * #define offset_D  5
                        * 
                        * #define iSOUND 		5 // re-use iMAN_STD
                        * 
                        * #define PACE		35
                        *  
                        * updateRAMTile(heading, tileIndex) unsigned char head
                        * {
                        * 	unsigned char value;	
                        * 	unsigned char RAM_Container_tmp[TileMemSize];
                        * 	unsigned char n;
                        * 	unsigned char* SOKOtile;
                        * 	SOKOtile = {
2064 :                  updateRA
2064 : 3440             	pshs	u
2066 : 33e4             	leau	,s
2068 : 32e8dc           	leas	-36,s
                        * 	
                        * 	// EMPTY
                        * 	0x6C, 0x6C, 0x6C, 0x6C,
                        * 	0x6C, 0x6C, 0x6C, 0x6C,
                        * 	0x6C, 0x6C, 0x6C, 0x6C,
                        * 	0x6C, 0x6C, 0x6C, 0x6C,
                        * 	0x6C, 0x6C, 0x6C, 0x6C,
                        * 	0x6C, 0x6C, 0x6C, 0x6C,
                        * 	0x6C, 0x6C, 0x6C, 0x6C,
                        * 	0x6C, 0x6C, 0x6C, 0x6C,
                        * 
                        * 	// WALL,
                        * 	0x14, 0xB4, 0x14, 0xB4,
                        * 	0x14, 0xB4, 0x14, 0xB4,
AS09 Assembler for M6809 [1.42].                                     Page    7
-------------------------------- sokobanC.a09 --------------------------------

                        * 	0x0, 0x0, 0x0, 0x0,
                        * 	0xB4, 0xA0, 0xB4, 0xA0,
                        * 	0xB4, 0xA0, 0xB4, 0xA0,
                        * 	0x0, 0x0, 0x0, 0x0,
                        * 	0x14, 0xB4, 0x14, 0xB4,
                        * 	0x14, 0xB4, 0x14, 0xB4,
                        * 
                        * 	// STORAGE
                        * 	0x6C, 0x60, 0xC, 0x6C,
                        * 	0x6C, 0xC, 0x60, 0x6C,
                        * 	0x60, 0x6C, 0x6C, 0xC,
                        * 	0xC, 0x6C, 0x6C, 0x60,
                        * 	0xC, 0x6C, 0x6C, 0x60,
                        * 	0x60, 0x6C, 0x6C, 0xC,
                        * 	0x6C, 0xC, 0x60, 0x6C,
                        * 	0x6C, 0x60, 0xC, 0x6C,
                        * 
                        * 	// BOX
                        * 	0x0, 0x0, 0x0, 0x0,
                        * 	0x18, 0xD8, 0xD8, 0xC0,
                        * 	0x18, 0xD8, 0xD8, 0xC0,
                        * 	0x18, 0xD8, 0xD8, 0xC0,
                        * 	0x18, 0xD8, 0xD8, 0xC0,
                        * 	0x18, 0xD8, 0xD8, 0xC0,
                        * 	0x18, 0xD8, 0xD8, 0xC0,
                        * 	0x0, 0x0, 0x0, 0x0,
                        * 
                        * 	// STORED_BOX
                        * 	0xFC, 0xFC, 0xFC, 0xFC,
                        * 	0xF8, 0xD8, 0xD8, 0xDC,
                        * 	0xF8, 0xD8, 0xD8, 0xDC,
                        * 	0xF8, 0xD8, 0xD8, 0xDC,
                        * 	0xF8, 0xD8, 0xD8, 0xDC,
                        * 	0xF8, 0xD8, 0xD8, 0xDC,
                        * 	0xF8, 0xD8, 0xD8, 0xDC,
                        * 	0xFC, 0xFC, 0xFC, 0xFC,
                        * 
                        * 	// MAN_STANDING_RIGHT
                        * 	0x6C, 0x6C, 0x6C, 0x6C,
                        * 	0x6C, 0x6C, 0xCC, 0x6C,
                        * 	0x6C, 0x74, 0xAC, 0x6C,
                        * 	0x6C, 0x70, 0x8C, 0x6C,
                        * 	0x6C, 0x70, 0x90, 0x6C,
                        * 	0x6C, 0x70, 0x8C, 0x6C,
                        * 	0x6C, 0x74, 0xAC, 0x6C,
                        * 	0x6C, 0x6C, 0xCC, 0x6C,
                        * 
                        * 	// PUSHINGtwo_RIGHT
                        * 	0x6C, 0x6C, 0x6C, 0x6C,
                        * 	0x6C, 0x6C, 0x74, 0xB8,
                        * 	0x6C, 0x6C, 0x74, 0x6C,
                        * 	0x6C, 0x60, 0xB0, 0x8C,
                        * 	0x6C, 0x6C, 0xB0, 0x90,
                        * 	0x6C, 0x6C, 0xB0, 0x80,
                        * 	0x6C, 0x6C, 0x74, 0x6C,
                        * 	0x6C, 0x6C, 0x74, 0xB8,
                        * 
                        * 	// PUSHINGtwo_MAN_ONLY_RIGHT
                        * 	0x6C, 0x6C, 0x6C, 0x6C,
                        * 	0x6C, 0xB4, 0xCC, 0x6C,
                        * 	0x6C, 0xAC, 0x6C, 0x6C,
                        * 	0x74, 0x90, 0x0C, 0x6C,
AS09 Assembler for M6809 [1.42].                                     Page    8
-------------------------------- sokobanC.a09 --------------------------------

                        * 	0x74, 0x90, 0x8C, 0x6C,
                        * 	0x14, 0x90, 0x6C, 0x6C,
                        * 	0x6C, 0xAC, 0x6C, 0x6C,
                        * 	0x6C, 0xB4, 0xCC, 0x6C,
                        * 
                        * 	// PUSHINGtwo_MAN_BOX_RIGHT
                        * 	0x6C, 0x6C, 0x60, 0x0, 	// pushing half box
                        * 	0x6C, 0xB4, 0xC0, 0xD8,
                        * 	0x6C, 0xAC, 0x60, 0xD8,
                        * 	0x74, 0x90, 0x00, 0xD8,
                        * 	0x74, 0x90, 0x80, 0xD8,
                        * 	0x14, 0x90, 0x60, 0xD8,
                        * 	0x6C, 0xAC, 0x60, 0xD8,
                        * 	0x6C, 0xB4, 0xC0, 0x0,
                        * 
                        * 	// PUSHINGtwo_HALF_BOX_RIGHT
                        * 	0x00, 0x00, 0xC, 0x6C,	// next tile second half box
                        * 	0xD8, 0xD8, 0xC, 0x6C,
                        * 	0xD8, 0xD8, 0xC, 0x6C,
                        * 	0xD8, 0xD8, 0xC, 0x6C,
                        * 	0xD8, 0xD8, 0xC, 0x6C,
                        * 	0xD8, 0xD8, 0xC, 0x6C,
                        * 	0xD8, 0xD8, 0xC, 0x6C,
                        * 	0x00, 0x00, 0xC, 0x6C,
                        * 
                        * 	//-------- rotated ----------//
                        * 	// iMAN_STANDING_Down
                        * 	0x6C, 0x6C, 0x6C, 0x6C,
                        * 	0x6C, 0x6C, 0x6C, 0x6C,
                        * 	0x6C, 0x6C, 0x6C, 0x6C,
                        * 	0x6C, 0xB0, 0x90, 0xAC,
                        * 	0x78, 0xB0, 0x90, 0xB8,
                        * 	0x6C, 0x6C, 0x8C, 0x6C,
                        * 	0x6C, 0x6C, 0x6C, 0x6C,
                        * 	0x6C, 0x6C, 0x6C, 0x6C,
                        * 
                        * 	// iPUSHINGone_Down
                        *     0x6C, 0x6C, 0x6C, 0x6C,
                        *     0x6C, 0x6C, 0x6C, 0x6C,
                        *     0x6C, 0x6C, 0x6C, 0x6C,
                        *     0x6C, 0x60, 0x6C, 0x6C,
                        *     0x6C, 0x74, 0xB4, 0x6C,
                        *     0x74, 0xB0, 0x90, 0xB4,
                        *     0x74, 0x70, 0x90, 0x74,
                        *     0x78, 0x6C, 0x80, 0x78,
                        * 	
                        * 	// iPUSHINGtwo_MAN_ONLY_Down
                        *     0x6C, 0x6C, 0x60, 0x6C,
                        *     0x6C, 0x74, 0xB4, 0x6C,
                        *     0x74, 0xB0, 0x90, 0xB4,
                        *     0x74, 0x70, 0x90, 0x74,
                        *     0x78, 0x60, 0x8C, 0x78,
                        *     0x6C, 0x6C, 0x6C, 0x6C,
                        *     0x6C, 0x6C, 0x6C, 0x6C,
                        *     0x6C, 0x6C, 0x6C, 0x6C,
                        * 	
                        * 	// iPUSHINGtwo_MAN_BOX_Down
                        *     0x6C, 0x6C, 0x60, 0x6C,
                        *     0x6C, 0x74, 0xB4, 0x6C,
                        *     0x74, 0xB0, 0x90, 0xB4,
                        *     0x74, 0x70, 0x90, 0x74,
                        *     0x78, 0x60, 0x8C, 0x78,
AS09 Assembler for M6809 [1.42].                                     Page    9
-------------------------------- sokobanC.a09 --------------------------------

                        *     0x00, 0x00, 0x00, 0x00,
                        *     0x18, 0xD8, 0xD8, 0xC0,
                        *     0x18, 0xD8, 0xD8, 0xC0,
                        * 	
                        * 	// iPUSHINGtwo_HALF_BOX_Down
                        *     0x18, 0xD8, 0xD8, 0xC0,
                        *     0x18, 0xD8, 0xD8, 0xC0,
                        *     0x18, 0xD8, 0xD8, 0xC0,
                        *     0x18, 0xD8, 0xD8, 0xC0,
                        *     0x00, 0x00, 0x00, 0x00,
                        *     0x6C, 0x6C, 0x6C, 0x6C,
                        *     0x6C, 0x6C, 0x6C, 0x6C,
                        *     0x6C, 0x6C, 0x6C, 0x6C
                        * 	};  //  end of tile
206b : 308d0003         	leax	_2_,pc
206f : 1601e0           	lbra	_2
2072 :                  _2_
2072 : 6c6c6c6c6c6c6c6c 	fcb	$6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c
207a : 6c6c6c6c6c6c6c6c 	fcb	$6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c
2082 : 6c6c6c6c6c6c6c6c 	fcb	$6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c
208a : 6c6c6c6c6c6c6c6c 	fcb	$6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c
2092 : 14b414b414b414b4 	fcb	$14, $ffffffb4, $14, $ffffffb4, $14, $ffffffb4, $
209a : 00000000b4a0b4a0 	fcb	$0, $0, $0, $0, $ffffffb4, $ffffffa0, $ffffffb4, 
20a2 : b4a0b4a000000000 	fcb	$ffffffb4, $ffffffa0, $ffffffb4, $ffffffa0, $0, $
20aa : 14b414b414b414b4 	fcb	$14, $ffffffb4, $14, $ffffffb4, $14, $ffffffb4, $
20b2 : 6c600c6c6c0c606c 	fcb	$6c, $60, $c, $6c, $6c, $c, $60, $6c
20ba : 606c6c0c0c6c6c60 	fcb	$60, $6c, $6c, $c, $c, $6c, $6c, $60
20c2 : 0c6c6c60606c6c0c 	fcb	$c, $6c, $6c, $60, $60, $6c, $6c, $c
20ca : 6c0c606c6c600c6c 	fcb	$6c, $c, $60, $6c, $6c, $60, $c, $6c
20d2 : 0000000018d8d8c0 	fcb	$0, $0, $0, $0, $18, $ffffffd8, $ffffffd8, $fffff
20da : 18d8d8c018d8d8c0 	fcb	$18, $ffffffd8, $ffffffd8, $ffffffc0, $18, $fffff
20e2 : 18d8d8c018d8d8c0 	fcb	$18, $ffffffd8, $ffffffd8, $ffffffc0, $18, $fffff
20ea : 18d8d8c000000000 	fcb	$18, $ffffffd8, $ffffffd8, $ffffffc0, $0, $0, $0,
20f2 : fcfcfcfcf8d8d8dc 	fcb	$fffffffc, $fffffffc, $fffffffc, $fffffffc, $ffff
20fa : f8d8d8dcf8d8d8dc 	fcb	$fffffff8, $ffffffd8, $ffffffd8, $ffffffdc, $ffff
2102 : f8d8d8dcf8d8d8dc 	fcb	$fffffff8, $ffffffd8, $ffffffd8, $ffffffdc, $ffff
210a : f8d8d8dcfcfcfcfc 	fcb	$fffffff8, $ffffffd8, $ffffffd8, $ffffffdc, $ffff
2112 : 6c6c6c6c6c6ccc6c 	fcb	$6c, $6c, $6c, $6c, $6c, $6c, $ffffffcc, $6c
211a : 6c74ac6c6c708c6c 	fcb	$6c, $74, $ffffffac, $6c, $6c, $70, $ffffff8c, $6
2122 : 6c70906c6c708c6c 	fcb	$6c, $70, $ffffff90, $6c, $6c, $70, $ffffff8c, $6
212a : 6c74ac6c6c6ccc6c 	fcb	$6c, $74, $ffffffac, $6c, $6c, $6c, $ffffffcc, $6
2132 : 6c6c6c6c6c6c74b8 	fcb	$6c, $6c, $6c, $6c, $6c, $6c, $74, $ffffffb8
213a : 6c6c746c6c60b08c 	fcb	$6c, $6c, $74, $6c, $6c, $60, $ffffffb0, $ffffff8
2142 : 6c6cb0906c6cb080 	fcb	$6c, $6c, $ffffffb0, $ffffff90, $6c, $6c, $ffffff
214a : 6c6c746c6c6c74b8 	fcb	$6c, $6c, $74, $6c, $6c, $6c, $74, $ffffffb8
2152 : 6c6c6c6c6cb4cc6c 	fcb	$6c, $6c, $6c, $6c, $6c, $ffffffb4, $ffffffcc, $6
215a : 6cac6c6c74900c6c 	fcb	$6c, $ffffffac, $6c, $6c, $74, $ffffff90, $c, $6c
2162 : 74908c6c14906c6c 	fcb	$74, $ffffff90, $ffffff8c, $6c, $14, $ffffff90, $
216a : 6cac6c6c6cb4cc6c 	fcb	$6c, $ffffffac, $6c, $6c, $6c, $ffffffb4, $ffffff
2172 : 6c6c60006cb4c0d8 	fcb	$6c, $6c, $60, $0, $6c, $ffffffb4, $ffffffc0, $ff
217a : 6cac60d8749000d8 	fcb	$6c, $ffffffac, $60, $ffffffd8, $74, $ffffff90, $
2182 : 749080d8149060d8 	fcb	$74, $ffffff90, $ffffff80, $ffffffd8, $14, $fffff
218a : 6cac60d86cb4c000 	fcb	$6c, $ffffffac, $60, $ffffffd8, $6c, $ffffffb4, $
2192 : 00000c6cd8d80c6c 	fcb	$0, $0, $c, $6c, $ffffffd8, $ffffffd8, $c, $6c
219a : d8d80c6cd8d80c6c 	fcb	$ffffffd8, $ffffffd8, $c, $6c, $ffffffd8, $ffffff
21a2 : d8d80c6cd8d80c6c 	fcb	$ffffffd8, $ffffffd8, $c, $6c, $ffffffd8, $ffffff
21aa : d8d80c6c00000c6c 	fcb	$ffffffd8, $ffffffd8, $c, $6c, $0, $0, $c, $6c
21b2 : 6c6c6c6c6c6c6c6c 	fcb	$6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c
21ba : 6c6c6c6c6cb090ac 	fcb	$6c, $6c, $6c, $6c, $6c, $ffffffb0, $ffffff90, $f
21c2 : 78b090b86c6c8c6c 	fcb	$78, $ffffffb0, $ffffff90, $ffffffb8, $6c, $6c, $
21ca : 6c6c6c6c6c6c6c6c 	fcb	$6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c
21d2 : 6c6c6c6c6c6c6c6c 	fcb	$6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c
AS09 Assembler for M6809 [1.42].                                     Page   10
-------------------------------- sokobanC.a09 --------------------------------

21da : 6c6c6c6c6c606c6c 	fcb	$6c, $6c, $6c, $6c, $6c, $60, $6c, $6c
21e2 : 6c74b46c74b090b4 	fcb	$6c, $74, $ffffffb4, $6c, $74, $ffffffb0, $ffffff
21ea : 74709074786c8078 	fcb	$74, $70, $ffffff90, $74, $78, $6c, $ffffff80, $7
21f2 : 6c6c606c6c74b46c 	fcb	$6c, $6c, $60, $6c, $6c, $74, $ffffffb4, $6c
21fa : 74b090b474709074 	fcb	$74, $ffffffb0, $ffffff90, $ffffffb4, $74, $70, $
2202 : 78608c786c6c6c6c 	fcb	$78, $60, $ffffff8c, $78, $6c, $6c, $6c, $6c
220a : 6c6c6c6c6c6c6c6c 	fcb	$6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c
2212 : 6c6c606c6c74b46c 	fcb	$6c, $6c, $60, $6c, $6c, $74, $ffffffb4, $6c
221a : 74b090b474709074 	fcb	$74, $ffffffb0, $ffffff90, $ffffffb4, $74, $70, $
2222 : 78608c7800000000 	fcb	$78, $60, $ffffff8c, $78, $0, $0, $0, $0
222a : 18d8d8c018d8d8c0 	fcb	$18, $ffffffd8, $ffffffd8, $ffffffc0, $18, $fffff
2232 : 18d8d8c018d8d8c0 	fcb	$18, $ffffffd8, $ffffffd8, $ffffffc0, $18, $fffff
223a : 18d8d8c018d8d8c0 	fcb	$18, $ffffffd8, $ffffffd8, $ffffffc0, $18, $fffff
2242 : 000000006c6c6c6c 	fcb	$0, $0, $0, $0, $6c, $6c, $6c, $6c
224a : 6c6c6c6c6c6c6c6c 	fcb	$6c, $6c, $6c, $6c, $6c, $6c, $6c, $6c
2252 :                  _2
2252 : 1f10             	tfr	x,d
2254 : edc8dc           	std	-36,u
                        * 		
                        * 	for (n = 0; n < TileMemSize; n++) {			
2257 : 4f               	clra
2258 : 5f               	clrb
2259 : e7c8de           	stb	-34,u
225c :                  _4
225c : e6c8de           	ldb	-34,u
225f : 4f               	clra
2260 : 830020           	subd	#$20
2263 : 10240127         	lbhs	_3
                        * 		if ((heading == RIGHTARROW) || (heading == LEFTARR
2267 : e645             	ldb	5,u
2269 : 4f               	clra
226a : 830011           	subd	#$11
226d : 10270014         	lbeq	_7
2271 : e645             	ldb	5,u
2273 : 4f               	clra
2274 : 830009           	subd	#$9
2277 : 1027000a         	lbeq	_7
227b : e647             	ldb	7,u
227d : 4f               	clra
227e : 830004           	subd	#$4
2281 : 10220084         	lbhi	_6
2285 :                  _7
                        * 			// default tile (right heading)
                        * 				value = SOKOtile[TileMemSize * tileIndex + n];
2285 : e6c8de           	ldb	-34,u
2288 : 4f               	clra
2289 : 3406             	pshs	d
228b : cc0020           	ldd	#$20
228e : 3406             	pshs	d
2290 : e647             	ldb	7,u
2292 : 4f               	clra
2293 : 3510             	puls	x
2295 : 17130e           	lbsr	_00001
2298 : e3e1             	addd	,s++
229a : aec8dc           	ldx	-36,u
229d : e68b             	ldb	d,x
229f : 4f               	clra
22a0 : e75f             	stb	-1,u
                        * 			if ((heading == LEFTARROW) && (tileIndex > iSTO_B
22a2 : e645             	ldb	5,u
22a4 : 4f               	clra
22a5 : 830009           	subd	#$9
AS09 Assembler for M6809 [1.42].                                     Page   11
-------------------------------- sokobanC.a09 --------------------------------

22a8 : 1026004c         	lbne	_8
22ac : e647             	ldb	7,u
22ae : 4f               	clra
22af : 830004           	subd	#$4
22b2 : 10230042         	lbls	_8
                        * 				// invert the tile
                        * 				value = ((value << 3) & 0xe0) | ((value >> 3) & 
22b6 : cc0003           	ldd	#$3
22b9 : 3406             	pshs	d
22bb : e65f             	ldb	-1,u
22bd : 4f               	clra
22be : 3510             	puls	x
22c0 : 17138a           	lbsr	_00009
22c3 : 8400             	anda	#$0
22c5 : c41c             	andb	#$1c
22c7 : 3406             	pshs	d
22c9 : cc0003           	ldd	#$3
22cc : 3406             	pshs	d
22ce : e65f             	ldb	-1,u
22d0 : 4f               	clra
22d1 : 3510             	puls	x
22d3 : 17134b           	lbsr	_00007
22d6 : 8400             	anda	#$0
22d8 : c4e0             	andb	#$e0
22da : aae0             	ora	,s+
22dc : eae0             	orb	,s+
22de : e75f             	stb	-1,u
                        * 				RAM_Container_tmp[TileMemSize-1 - n] = value;
22e0 : e6c8de           	ldb	-34,u
22e3 : 4f               	clra
22e4 : 3406             	pshs	d
22e6 : cc001f           	ldd	#$1f
22e9 : a3e1             	subd	,s++
22eb : 30c8df           	leax	-33,u
22ee : 308b             	leax	d,x
22f0 : e65f             	ldb	-1,u
22f2 : 4f               	clra
22f3 : e700             	stb	0,x
                        * 			}
                        * 			else
22f5 : 16000e           	lbra	_9
22f8 :                  _8
                        * 				RAM_Container_tmp[n] = value;				
22f8 : e6c8de           	ldb	-34,u
22fb : 4f               	clra
22fc : 30c8df           	leax	-33,u
22ff : 308b             	leax	d,x
2301 : e65f             	ldb	-1,u
2303 : 4f               	clra
2304 : e700             	stb	0,x
                        * 		}
2306 :                  _9
                        * 		else {
2306 : 16007a           	lbra	_10
2309 :                  _6
                        * 			// 90° rotated tile (down heading)
                        * 				value = SOKOtile[TileMemSize * (tileIndex + offs
2309 : e6c8de           	ldb	-34,u
230c : 4f               	clra
230d : 3406             	pshs	d
230f : cc0020           	ldd	#$20
2312 : 3406             	pshs	d
AS09 Assembler for M6809 [1.42].                                     Page   12
-------------------------------- sokobanC.a09 --------------------------------

2314 : e647             	ldb	7,u
2316 : 4f               	clra
2317 : c30005           	addd	#$5
231a : 3510             	puls	x
231c : 171287           	lbsr	_00001
231f : e3e1             	addd	,s++
2321 : aec8dc           	ldx	-36,u
2324 : e68b             	ldb	d,x
2326 : 4f               	clra
2327 : e75f             	stb	-1,u
                        * 			if (heading == UPARROW) {
2329 : e645             	ldb	5,u
232b : 4f               	clra
232c : 83005e           	subd	#$5e
232f : 10260042         	lbne	_11
                        * 				// invert the tile
                        * 				value = ((value << 3) & 0xe0) | ((value >> 3) & 
2333 : cc0003           	ldd	#$3
2336 : 3406             	pshs	d
2338 : e65f             	ldb	-1,u
233a : 4f               	clra
233b : 3510             	puls	x
233d : 17130d           	lbsr	_00009
2340 : 8400             	anda	#$0
2342 : c41c             	andb	#$1c
2344 : 3406             	pshs	d
2346 : cc0003           	ldd	#$3
2349 : 3406             	pshs	d
234b : e65f             	ldb	-1,u
234d : 4f               	clra
234e : 3510             	puls	x
2350 : 1712ce           	lbsr	_00007
2353 : 8400             	anda	#$0
2355 : c4e0             	andb	#$e0
2357 : aae0             	ora	,s+
2359 : eae0             	orb	,s+
235b : e75f             	stb	-1,u
                        * 				RAM_Container_tmp[TileMemSize-1 - n] = value;
235d : e6c8de           	ldb	-34,u
2360 : 4f               	clra
2361 : 3406             	pshs	d
2363 : cc001f           	ldd	#$1f
2366 : a3e1             	subd	,s++
2368 : 30c8df           	leax	-33,u
236b : 308b             	leax	d,x
236d : e65f             	ldb	-1,u
236f : 4f               	clra
2370 : e700             	stb	0,x
                        * 			}
                        * 			else
2372 : 16000e           	lbra	_12
2375 :                  _11
                        * 				RAM_Container_tmp[n] = value;
2375 : e6c8de           	ldb	-34,u
2378 : 4f               	clra
2379 : 30c8df           	leax	-33,u
237c : 308b             	leax	d,x
237e : e65f             	ldb	-1,u
2380 : 4f               	clra
2381 : e700             	stb	0,x
                        * 		}			
2383 :                  _12
AS09 Assembler for M6809 [1.42].                                     Page   13
-------------------------------- sokobanC.a09 --------------------------------

                        * 	}
2383 :                  _10
                        * 	sendContainerData(tileIndex, RAM_Container_tmp);
2383 :                  _5
2383 : 30c8de           	leax	-34,u
2386 : e684             	ldb	,x
2388 : 6c84             	inc	,x
238a : 4f               	clra
238b : 16fece           	lbra	_4
238e :                  _3
238e : 30c8df           	leax	-33,u
2391 : 3410             	pshs	x
2393 : e647             	ldb	7,u
2395 : 1d               	sex
2396 : 3406             	pshs	d
2398 : 17cf0c           	lbsr	sendCont
239b : 3264             	leas	4,s
                        * }
239d : 32c4             	leas	,u
239f : 35c0             	puls	u,pc
                        * 
                        * sendstepSound() {
                        * 		
                        * 	// re-use the standing data container for the sound
                        * 	unsigned char* step_sound;
                        * 	step_sound = {1, 200, 0};
23a1 :                  sendstep
23a1 : 3440             	pshs	u
23a3 : 33e4             	leau	,s
23a5 : 327e             	leas	-2,s
23a7 : 308d0002         	leax	_13_,pc
23ab : 2003             	bra	_13
23ad :                  _13_
23ad : 01c800           	fcb	$1, $ffffffc8, $0
23b0 :                  _13
23b0 : 1f10             	tfr	x,d
23b2 : ed5e             	std	-2,u
                        * 	sendContainerData(iSOUND, step_sound);	
23b4 : ec5e             	ldd	-2,u
23b6 : 3406             	pshs	d
23b8 : cc0005           	ldd	#$5
23bb : 3406             	pshs	d
23bd : 17cee7           	lbsr	sendCont
23c0 : 3264             	leas	4,s
                        * }
23c2 : 35c6             	puls	d,u,pc
                        * 
                        * updateMap(pMap, x, y, tileIndex) unsigned char* pMap
                        * {
                        * 	
                        * 	pMap[y*SCREEN_COL + x] = tileIndex;
23c4 :                  updateMa
23c4 : 3440             	pshs	u
23c6 : 33e4             	leau	,s
23c8 : e647             	ldb	7,u
23ca : 4f               	clra
23cb : 3406             	pshs	d
23cd : cc0015           	ldd	#$15
23d0 : 3406             	pshs	d
23d2 : e649             	ldb	9,u
23d4 : 4f               	clra
23d5 : 3510             	puls	x
AS09 Assembler for M6809 [1.42].                                     Page   14
-------------------------------- sokobanC.a09 --------------------------------

23d7 : 1711cc           	lbsr	_00001
23da : e3e1             	addd	,s++
23dc : ae44             	ldx	4,u
23de : 308b             	leax	d,x
23e0 : e64b             	ldb	11,u
23e2 : 4f               	clra
23e3 : e700             	stb	0,x
                        * 	
                        * 	setpointXY(x, y); setTile(tileIndex | 0x80); // ram
23e5 : e649             	ldb	9,u
23e7 : 4f               	clra
23e8 : 3406             	pshs	d
23ea : e647             	ldb	7,u
23ec : 4f               	clra
23ed : 3406             	pshs	d
23ef : 17ce34           	lbsr	setpoint
23f2 : 3264             	leas	4,s
23f4 : e64b             	ldb	11,u
23f6 : 4f               	clra
23f7 : 8a00             	ora	#$0
23f9 : ca80             	orb	#$80
23fb : 3406             	pshs	d
23fd : 17ce4a           	lbsr	setTile
2400 : 3262             	leas	2,s
                        * }
2402 : 35c0             	puls	u,pc
                        * 
                        * getMapTileIndex(pMap, x, y) unsigned char* pMap; uns
                        * {	
                        * 	return pMap[y*SCREEN_COL + x];
2404 :                  getMapTi
2404 : 3440             	pshs	u
2406 : 33e4             	leau	,s
2408 : e647             	ldb	7,u
240a : 4f               	clra
240b : 3406             	pshs	d
240d : cc0015           	ldd	#$15
2410 : 3406             	pshs	d
2412 : e649             	ldb	9,u
2414 : 4f               	clra
2415 : 3510             	puls	x
2417 : 17118c           	lbsr	_00001
241a : e3e1             	addd	,s++
241c : ae44             	ldx	4,u
241e : e68b             	ldb	d,x
2420 : 4f               	clra
                        * }
2421 : 35c0             	puls	u,pc
                        * 
                        * sendString(x, y, str) unsigned char x; unsigned char
                        * {
                        * 	unsigned char n,c;
                        * 	n = 0;
2423 :                  sendStri
2423 : 3440             	pshs	u
2425 : 33e4             	leau	,s
2427 : 327e             	leas	-2,s
2429 : 4f               	clra
242a : 5f               	clrb
242b : e75f             	stb	-1,u
                        * 	setpointXY(x, y); 
242d : e647             	ldb	7,u
AS09 Assembler for M6809 [1.42].                                     Page   15
-------------------------------- sokobanC.a09 --------------------------------

242f : 4f               	clra
2430 : 3406             	pshs	d
2432 : e645             	ldb	5,u
2434 : 4f               	clra
2435 : 3406             	pshs	d
2437 : 17cdec           	lbsr	setpoint
243a : 3264             	leas	4,s
                        * 	while(1) {
243c :                  _15
                        * 		c = str[n];
243c : e65f             	ldb	-1,u
243e : 4f               	clra
243f : ae48             	ldx	8,u
2441 : e68b             	ldb	d,x
2443 : 4f               	clra
2444 : e75e             	stb	-2,u
                        * 		if (c == 0) break;
2446 : e65e             	ldb	-2,u
2448 : 4f               	clra
2449 : 830000           	subd	#$0
244c : 10260003         	lbne	_16
2450 : 160026           	lbra	_14
                        * 		if (c >= 'A') c -= '@';	// re-mapping
2453 :                  _16
2453 : e65e             	ldb	-2,u
2455 : 4f               	clra
2456 : 830041           	subd	#$41
2459 : 10250008         	lblo	_17
245d : e65e             	ldb	-2,u
245f : 4f               	clra
2460 : 830040           	subd	#$40
2463 : e75e             	stb	-2,u
                        * 		setTile(c);
2465 :                  _17
2465 : e65e             	ldb	-2,u
2467 : 4f               	clra
2468 : 3406             	pshs	d
246a : 17cddd           	lbsr	setTile
246d : 3262             	leas	2,s
                        * 		n++;
246f : 305f             	leax	-1,u
2471 : e684             	ldb	,x
2473 : 6c84             	inc	,x
2475 : 4f               	clra
                        * 	}
                        * }
2476 : 16ffc3           	lbra	_15
2479 :                  _14
2479 : 35c6             	puls	d,u,pc
                        * 
                        * #define stringSize 	4
                        * printScoreboard(moveStr, pushStr) unsigned char* mov
                        * {
                        * 	unsigned char n;
                        * 	for (n = 0; n < stringSize-1; n++) {
247b :                  printSco
247b : 3440             	pshs	u
247d : 33e4             	leau	,s
247f : 327f             	leas	-1,s
2481 : 4f               	clra
2482 : 5f               	clrb
2483 : e75f             	stb	-1,u
AS09 Assembler for M6809 [1.42].                                     Page   16
-------------------------------- sokobanC.a09 --------------------------------

2485 :                  _19
2485 : e65f             	ldb	-1,u
2487 : 4f               	clra
2488 : 830003           	subd	#$3
248b : 10240034         	lbhs	_18
                        * 		if (moveStr[n] > '9') {
248f : e65f             	ldb	-1,u
2491 : 4f               	clra
2492 : ae44             	ldx	4,u
2494 : e68b             	ldb	d,x
2496 : 4f               	clra
2497 : 830039           	subd	#$39
249a : 1023001b         	lbls	_21
                        * 			moveStr[n] = '0';
249e : e65f             	ldb	-1,u
24a0 : 4f               	clra
24a1 : ae44             	ldx	4,u
24a3 : 308b             	leax	d,x
24a5 : cc0030           	ldd	#$30
24a8 : e700             	stb	0,x
                        * 			moveStr[n+1]++;
24aa : e65f             	ldb	-1,u
24ac : 4f               	clra
24ad : c30001           	addd	#$1
24b0 : ae44             	ldx	4,u
24b2 : 308b             	leax	d,x
24b4 : e684             	ldb	,x
24b6 : 6c84             	inc	,x
24b8 : 4f               	clra
                        * 		}
                        * 	}	
24b9 :                  _21
                        * 	for (n = 0; n < stringSize; n++) {
24b9 :                  _20
24b9 : 305f             	leax	-1,u
24bb : e684             	ldb	,x
24bd : 6c84             	inc	,x
24bf : 4f               	clra
24c0 : 16ffc2           	lbra	_19
24c3 :                  _18
24c3 : 4f               	clra
24c4 : 5f               	clrb
24c5 : e75f             	stb	-1,u
24c7 :                  _23
24c7 : e65f             	ldb	-1,u
24c9 : 4f               	clra
24ca : 830004           	subd	#$4
24cd : 10240032         	lbhs	_22
                        * 		setpointXY(n+5, 19); setTile(moveStr[stringSize-1-
24d1 : cc0013           	ldd	#$13
24d4 : 3406             	pshs	d
24d6 : e65f             	ldb	-1,u
24d8 : 4f               	clra
24d9 : c30005           	addd	#$5
24dc : 3406             	pshs	d
24de : 17cd45           	lbsr	setpoint
24e1 : 3264             	leas	4,s
24e3 : e65f             	ldb	-1,u
24e5 : 4f               	clra
24e6 : 3406             	pshs	d
24e8 : cc0003           	ldd	#$3
24eb : a3e1             	subd	,s++
AS09 Assembler for M6809 [1.42].                                     Page   17
-------------------------------- sokobanC.a09 --------------------------------

24ed : ae44             	ldx	4,u
24ef : e68b             	ldb	d,x
24f1 : 4f               	clra
24f2 : 3406             	pshs	d
24f4 : 17cd53           	lbsr	setTile
24f7 : 3262             	leas	2,s
                        * 	}
                        * 
                        * 
                        * 	for (n = 0; n < stringSize-1; n++) {
24f9 :                  _24
24f9 : 305f             	leax	-1,u
24fb : e684             	ldb	,x
24fd : 6c84             	inc	,x
24ff : 4f               	clra
2500 : 16ffc4           	lbra	_23
2503 :                  _22
2503 : 4f               	clra
2504 : 5f               	clrb
2505 : e75f             	stb	-1,u
2507 :                  _26
2507 : e65f             	ldb	-1,u
2509 : 4f               	clra
250a : 830003           	subd	#$3
250d : 10240034         	lbhs	_25
                        * 		if (pushStr[n] > '9') {
2511 : e65f             	ldb	-1,u
2513 : 4f               	clra
2514 : ae46             	ldx	6,u
2516 : e68b             	ldb	d,x
2518 : 4f               	clra
2519 : 830039           	subd	#$39
251c : 1023001b         	lbls	_28
                        * 			pushStr[n] = '0';
2520 : e65f             	ldb	-1,u
2522 : 4f               	clra
2523 : ae46             	ldx	6,u
2525 : 308b             	leax	d,x
2527 : cc0030           	ldd	#$30
252a : e700             	stb	0,x
                        * 			pushStr[n+1]++;
252c : e65f             	ldb	-1,u
252e : 4f               	clra
252f : c30001           	addd	#$1
2532 : ae46             	ldx	6,u
2534 : 308b             	leax	d,x
2536 : e684             	ldb	,x
2538 : 6c84             	inc	,x
253a : 4f               	clra
                        * 		}
                        * 	}
253b :                  _28
                        * 	for (n = 0; n < stringSize; n++) {
253b :                  _27
253b : 305f             	leax	-1,u
253d : e684             	ldb	,x
253f : 6c84             	inc	,x
2541 : 4f               	clra
2542 : 16ffc2           	lbra	_26
2545 :                  _25
2545 : 4f               	clra
2546 : 5f               	clrb
AS09 Assembler for M6809 [1.42].                                     Page   18
-------------------------------- sokobanC.a09 --------------------------------

2547 : e75f             	stb	-1,u
2549 :                  _30
2549 : e65f             	ldb	-1,u
254b : 4f               	clra
254c : 830004           	subd	#$4
254f : 10240032         	lbhs	_29
                        * 		setpointXY(n+15, 19); setTile(pushStr[stringSize-1
2553 : cc0013           	ldd	#$13
2556 : 3406             	pshs	d
2558 : e65f             	ldb	-1,u
255a : 4f               	clra
255b : c3000f           	addd	#$f
255e : 3406             	pshs	d
2560 : 17ccc3           	lbsr	setpoint
2563 : 3264             	leas	4,s
2565 : e65f             	ldb	-1,u
2567 : 4f               	clra
2568 : 3406             	pshs	d
256a : cc0003           	ldd	#$3
256d : a3e1             	subd	,s++
256f : ae46             	ldx	6,u
2571 : e68b             	ldb	d,x
2573 : 4f               	clra
2574 : 3406             	pshs	d
2576 : 17ccd1           	lbsr	setTile
2579 : 3262             	leas	2,s
                        * 	}	
                        * }		
257b :                  _31
257b : 305f             	leax	-1,u
257d : e684             	ldb	,x
257f : 6c84             	inc	,x
2581 : 4f               	clra
2582 : 16ffc4           	lbra	_30
2585 :                  _29
2585 : 35c2             	puls	a,u,pc
                        * 
                        * /***************************************************
                        * /*	main program
                        * /***************************************************
                        * 
                        * // states definition
                        * #define standing 	0
                        * #define push1 		1
                        * #define push2_empty 2
                        * #define push2_box 	3
                        * main() {
                        * 	char* gameLevel;					//-2,u
                        * 	char* scoreBoard;					//-4,u
                        * 	char* gameEnded;					//-6,u
                        * 	unsigned char* SOKOmap_L1;			//-8,u
                        * 	unsigned char map[MAP_SIZE]; 		//-428,u
                        * 	unsigned char state;				//-429,u
                        * 	unsigned char xPos, yPos, heading;	//-430,u ...
                        * 	unsigned char key;					//-433,u
                        * 	unsigned char undo;					//-434,u
                        * 	unsigned char pushStr[stringSize]; 	//-435,u
                        * 	unsigned char moveStr[stringSize]; 	//-436,u
                        * 	
                        * 	// inner loops variables
                        * 	unsigned int i;						//-438,u
                        * 	unsigned char y, x;					//-439,u ...
AS09 Assembler for M6809 [1.42].                                     Page   19
-------------------------------- sokobanC.a09 --------------------------------

                        * 	unsigned char tile;					//-441,u
                        * 	unsigned char nextxPos, nextyPos, next2xPos, next2y
                        * 	unsigned char nextTile, next2Tile;	//-446,u   -447,
                        * 	
                        * 	gameLevel  = "LEVEL 01             ";
2587 :                  main
2587 : 3440             	pshs	u
2589 : 33e4             	leau	,s
258b : 32e9fe3b         	leas	-453,s
258f : 308d0002         	leax	_32_,pc
2593 : 2016             	bra	_32
2595 :                  _32_
2595 : 4c4556454c203031 	fcb	$4c, $45, $56, $45, $4c, $20, $30, $31
259d : 2020202020202020 	fcb	$20, $20, $20, $20, $20, $20, $20, $20
25a5 : 202020202000     	fcb	$20, $20, $20, $20, $20, $0
25ab :                  _32
25ab : 1f10             	tfr	x,d
25ad : ed5e             	std	-2,u
                        * 	scoreBoard = "PUSH:0000 MOVE:0000  ";
25af : 308d0002         	leax	_33_,pc
25b3 : 2016             	bra	_33
25b5 :                  _33_
25b5 : 505553483a303030 	fcb	$50, $55, $53, $48, $3a, $30, $30, $30
25bd : 30204d4f56453a30 	fcb	$30, $20, $4d, $4f, $56, $45, $3a, $30
25c5 : 303030202000     	fcb	$30, $30, $30, $20, $20, $0
25cb :                  _33
25cb : 1f10             	tfr	x,d
25cd : ed5c             	std	-4,u
                        * 	gameEnded = "WELL DONE!";
25cf : 308d0002         	leax	_34_,pc
25d3 : 200b             	bra	_34
25d5 :                  _34_
25d5 : 57454c4c20444f4e 	fcb	$57, $45, $4c, $4c, $20, $44, $4f, $4e
25dd : 452100           	fcb	$45, $21, $0
25e0 :                  _34
25e0 : 1f10             	tfr	x,d
25e2 : ed5a             	std	-6,u
                        * 	state = standing;
25e4 : 4f               	clra
25e5 : 5f               	clrb
25e6 : e7c9fe53         	stb	-429,u
                        * 	undo = false;	
25ea : 4f               	clra
25eb : 5f               	clrb
25ec : e7c9fe4e         	stb	-434,u
                        * 
                        * 	key = 0;
25f0 : 4f               	clra
25f1 : 5f               	clrb
25f2 : e7c9fe4f         	stb	-433,u
                        * 	xPos=12; yPos=11; heading = RIGHTARROW;
25f6 : cc000c           	ldd	#$c
25f9 : e7c9fe52         	stb	-430,u
25fd : cc000b           	ldd	#$b
2600 : e7c9fe51         	stb	-431,u
2604 : cc0011           	ldd	#$11
2607 : e7c9fe50         	stb	-432,u
                        * 		
                        * 	// map (width 21, height 20) populated with tile in
                        * 	SOKOmap_L1 = {
                        * 	0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0
                        * 	0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0
AS09 Assembler for M6809 [1.42].                                     Page   20
-------------------------------- sokobanC.a09 --------------------------------

                        * 	0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0
                        * 	0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x1, 0x1, 0x1, 0x1, 0
                        * 	0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x1, 0
                        * 	0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x3, 0x0, 0x0, 0x1, 0
                        * 	0x0, 0x0, 0x0, 0x1, 0x1, 0x1, 0x0, 0x0, 0x3, 0x1, 0
                        * 	0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x3, 0x0, 0x3, 0x0, 0
                        * 	0x0, 0x1, 0x1, 0x1, 0x0, 0x1, 0x0, 0x1, 0x1, 0x0, 0
                        * 	0x0, 0x1, 0x0, 0x0, 0x0, 0x1, 0x0, 0x1, 0x1, 0x0, 0
                        * 	0x0, 0x1, 0x0, 0x3, 0x0, 0x0, 0x3, 0x0, 0x0, 0x0, 0
                        * 	0x0, 0x1, 0x1, 0x1, 0x1, 0x1, 0x0, 0x1, 0x1, 0x1, 0
                        * 	0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0
                        * 	0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x1, 0x1, 0x1, 0x1, 0
                        * 	0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0
                        * 	0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0
                        * 	0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0
                        * 	0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0
                        * 	0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0
                        * 	0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0
                        * 	};  //  end of map
260b : 308d0003         	leax	_35_,pc
260f : 1601a4           	lbra	_35
2612 :                  _35_
2612 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
261a : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
2622 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
262a : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
2632 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
263a : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
2642 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
264a : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
2652 : 0000000001010101 	fcb	$0, $0, $0, $0, $1, $1, $1, $1
265a : 0100000000000000 	fcb	$1, $0, $0, $0, $0, $0, $0, $0
2662 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
266a : 0001000000010000 	fcb	$0, $1, $0, $0, $0, $1, $0, $0
2672 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
267a : 0000000000000103 	fcb	$0, $0, $0, $0, $0, $0, $1, $3
2682 : 0000010000000000 	fcb	$0, $0, $1, $0, $0, $0, $0, $0
268a : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
2692 : 0001010100000301 	fcb	$0, $1, $1, $1, $0, $0, $3, $1
269a : 0100000000000000 	fcb	$1, $0, $0, $0, $0, $0, $0, $0
26a2 : 0000000000000100 	fcb	$0, $0, $0, $0, $0, $0, $1, $0
26aa : 0003000300010000 	fcb	$0, $3, $0, $3, $0, $1, $0, $0
26b2 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
26ba : 0001010100010001 	fcb	$0, $1, $1, $1, $0, $1, $0, $1
26c2 : 0100010000000101 	fcb	$1, $0, $1, $0, $0, $0, $1, $1
26ca : 0101010100000100 	fcb	$1, $1, $1, $1, $0, $0, $1, $0
26d2 : 0000010001010001 	fcb	$0, $0, $1, $0, $1, $1, $0, $1
26da : 0101010100000202 	fcb	$1, $1, $1, $1, $0, $0, $2, $2
26e2 : 0100000100030000 	fcb	$1, $0, $0, $1, $0, $3, $0, $0
26ea : 0300000000000000 	fcb	$3, $0, $0, $0, $0, $0, $0, $0
26f2 : 0000000202010000 	fcb	$0, $0, $0, $2, $2, $1, $0, $0
26fa : 0101010101000101 	fcb	$1, $1, $1, $1, $1, $0, $1, $1
2702 : 0100010001010000 	fcb	$1, $0, $1, $0, $1, $1, $0, $0
270a : 0202010000000000 	fcb	$2, $2, $1, $0, $0, $0, $0, $0
2712 : 0001000000000001 	fcb	$0, $1, $0, $0, $0, $0, $0, $1
271a : 0101010101010101 	fcb	$1, $1, $1, $1, $1, $1, $1, $1
2722 : 0000000000000101 	fcb	$0, $0, $0, $0, $0, $0, $1, $1
272a : 0101010101000000 	fcb	$1, $1, $1, $1, $1, $0, $0, $0
2732 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
273a : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
2742 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
274a : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
AS09 Assembler for M6809 [1.42].                                     Page   21
-------------------------------- sokobanC.a09 --------------------------------

2752 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
275a : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
2762 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
276a : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
2772 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
277a : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
2782 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
278a : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
2792 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
279a : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
27a2 : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
27aa : 0000000000000000 	fcb	$0, $0, $0, $0, $0, $0, $0, $0
27b2 : 00000000         	fcb	$0, $0, $0, $0
27b6 :                  _35
27b6 : 1f10             	tfr	x,d
27b8 : ed58             	std	-8,u
                        * 	
                        * 	// init the RAM Tiles
                        * 	for (x = 0; x < RAMcontCnt; x++) {
27ba : 4f               	clra
27bb : 5f               	clrb
27bc : e7c9fe42         	stb	-446,u
27c0 :                  _37
27c0 : e6c9fe42         	ldb	-446,u
27c4 : 4f               	clra
27c5 : 83000a           	subd	#$a
27c8 : 1024001f         	lbhs	_36
                        * 		updateRAMTile(heading, x);
27cc : e6c9fe42         	ldb	-446,u
27d0 : 4f               	clra
27d1 : 3406             	pshs	d
27d3 : e6c9fe50         	ldb	-432,u
27d7 : 4f               	clra
27d8 : 3406             	pshs	d
27da : 17f887           	lbsr	updateRA
27dd : 3264             	leas	4,s
                        * 	}
                        * 
                        * 	// get the the ROM map
                        * 	for (y=0; y<SCREEN_ROW; y++) {
27df :                  _38
27df : 30c9fe42         	leax	-446,u
27e3 : e684             	ldb	,x
27e5 : 6c84             	inc	,x
27e7 : 4f               	clra
27e8 : 16ffd5           	lbra	_37
27eb :                  _36
27eb : 4f               	clra
27ec : 5f               	clrb
27ed : e7c9fe43         	stb	-445,u
27f1 :                  _40
27f1 : e6c9fe43         	ldb	-445,u
27f5 : 4f               	clra
27f6 : 830014           	subd	#$14
27f9 : 1024006a         	lbhs	_39
                        * 		for (x=0; x<SCREEN_COL; x++) {
27fd : 4f               	clra
27fe : 5f               	clrb
27ff : e7c9fe42         	stb	-446,u
2803 :                  _43
2803 : e6c9fe42         	ldb	-446,u
2807 : 4f               	clra
AS09 Assembler for M6809 [1.42].                                     Page   22
-------------------------------- sokobanC.a09 --------------------------------

2808 : 830015           	subd	#$15
280b : 1024004c         	lbhs	_42
                        * 			i = y*SCREEN_COL + x;
280f : e6c9fe42         	ldb	-446,u
2813 : 4f               	clra
2814 : 3406             	pshs	d
2816 : cc0015           	ldd	#$15
2819 : 3406             	pshs	d
281b : e6c9fe43         	ldb	-445,u
281f : 4f               	clra
2820 : 3510             	puls	x
2822 : 170d81           	lbsr	_00001
2825 : e3e1             	addd	,s++
2827 : edc9fe44         	std	-444,u
                        * 			updateMap(map, x, y, SOKOmap_L1[i]);
282b : ecc9fe44         	ldd	-444,u
282f : ae58             	ldx	-8,u
2831 : e68b             	ldb	d,x
2833 : 4f               	clra
2834 : 3406             	pshs	d
2836 : e6c9fe43         	ldb	-445,u
283a : 4f               	clra
283b : 3406             	pshs	d
283d : e6c9fe42         	ldb	-446,u
2841 : 4f               	clra
2842 : 3406             	pshs	d
2844 : 30c9fe54         	leax	-428,u
2848 : 3410             	pshs	x
284a : 17fb77           	lbsr	updateMa
284d : 3268             	leas	8,s
                        * 		}
                        * 	}
284f :                  _44
284f : 30c9fe42         	leax	-446,u
2853 : e684             	ldb	,x
2855 : 6c84             	inc	,x
2857 : 4f               	clra
2858 : 16ffa8           	lbra	_43
285b :                  _42
                        * 	
                        * 	// add the man
                        * 	updateMap(map, xPos, yPos, iMAN_STD);
285b :                  _41
285b : 30c9fe43         	leax	-445,u
285f : e684             	ldb	,x
2861 : 6c84             	inc	,x
2863 : 4f               	clra
2864 : 16ff8a           	lbra	_40
2867 :                  _39
2867 : cc0005           	ldd	#$5
286a : 3406             	pshs	d
286c : e6c9fe51         	ldb	-431,u
2870 : 4f               	clra
2871 : 3406             	pshs	d
2873 : e6c9fe52         	ldb	-430,u
2877 : 4f               	clra
2878 : 3406             	pshs	d
287a : 30c9fe54         	leax	-428,u
287e : 3410             	pshs	x
2880 : 17fb41           	lbsr	updateMa
2883 : 3268             	leas	8,s
                        * 		
AS09 Assembler for M6809 [1.42].                                     Page   23
-------------------------------- sokobanC.a09 --------------------------------

                        * 	// init score board
                        * 	sendString(0, 0, gameLevel);
2885 : ec5e             	ldd	-2,u
2887 : 3406             	pshs	d
2889 : 4f               	clra
288a : 5f               	clrb
288b : 3406             	pshs	d
288d : 4f               	clra
288e : 5f               	clrb
288f : 3406             	pshs	d
2891 : 17fb8f           	lbsr	sendStri
2894 : 3266             	leas	6,s
                        * 	sendString(0, 19, scoreBoard);
2896 : ec5c             	ldd	-4,u
2898 : 3406             	pshs	d
289a : cc0013           	ldd	#$13
289d : 3406             	pshs	d
289f : 4f               	clra
28a0 : 5f               	clrb
28a1 : 3406             	pshs	d
28a3 : 17fb7d           	lbsr	sendStri
28a6 : 3266             	leas	6,s
                        * 	for (x = 0; x < stringSize; x++) {
28a8 : 4f               	clra
28a9 : 5f               	clrb
28aa : e7c9fe42         	stb	-446,u
28ae :                  _46
28ae : e6c9fe42         	ldb	-446,u
28b2 : 4f               	clra
28b3 : 830004           	subd	#$4
28b6 : 1024002d         	lbhs	_45
                        * 		pushStr[x] = moveStr[x] = '0';
28ba : e6c9fe42         	ldb	-446,u
28be : 4f               	clra
28bf : 30c9fe46         	leax	-442,u
28c3 : 308b             	leax	d,x
28c5 : cc0030           	ldd	#$30
28c8 : e700             	stb	0,x
28ca : 3406             	pshs	d
28cc : e6c9fe42         	ldb	-446,u
28d0 : 4f               	clra
28d1 : 30c9fe4a         	leax	-438,u
28d5 : 308b             	leax	d,x
28d7 : 3506             	puls	d
28d9 : e700             	stb	0,x
                        * 	}
                        * 	printScoreboard(moveStr, pushStr);
28db :                  _47
28db : 30c9fe42         	leax	-446,u
28df : e684             	ldb	,x
28e1 : 6c84             	inc	,x
28e3 : 4f               	clra
28e4 : 16ffc7           	lbra	_46
28e7 :                  _45
28e7 : 30c9fe4a         	leax	-438,u
28eb : 3410             	pshs	x
28ed : 30c9fe46         	leax	-442,u
28f1 : 3410             	pshs	x
28f3 : 17fb85           	lbsr	printSco
28f6 : 3264             	leas	4,s
                        * 	
                        * 	while(1) {			
AS09 Assembler for M6809 [1.42].                                     Page   24
-------------------------------- sokobanC.a09 --------------------------------

28f8 :                  _49
                        * 		// keyboard handling		
                        * 		APL_OutputStream();
28f8 : 17c826           	lbsr	APL_Outp
                        * 		if((key == 0) && (isKeyboardData() != 0)){
28fb : e6c9fe4f         	ldb	-433,u
28ff : 1d               	sex
2900 : 830000           	subd	#$0
2903 : 10260644         	lbne	_50
2907 : 17c8b4           	lbsr	isKeyboa
290a : 830000           	subd	#$0
290d : 1027063a         	lbeq	_50
                        * 			key = getKeyboard();
2911 : 17c88d           	lbsr	getKeybo
2914 : e7c9fe4f         	stb	-433,u
                        * 			
                        * 			if ((state != standing) && (key != heading)) key 
2918 : e6c9fe53         	ldb	-429,u
291c : 4f               	clra
291d : 830000           	subd	#$0
2920 : 10270018         	lbeq	_51
2924 : e6c9fe50         	ldb	-432,u
2928 : 4f               	clra
2929 : 3406             	pshs	d
292b : e6c9fe4f         	ldb	-433,u
292f : 4f               	clra
2930 : a3e1             	subd	,s++
2932 : 10270006         	lbeq	_51
2936 : 4f               	clra
2937 : 5f               	clrb
2938 : e7c9fe4f         	stb	-433,u
                        * 			
                        * 			// undo command
                        * 			if(((key == 'u') || (key == 'U')) && (undo == tru
293c :                  _51
293c : e6c9fe4f         	ldb	-433,u
2940 : 4f               	clra
2941 : 830075           	subd	#$75
2944 : 1027000c         	lbeq	_53
2948 : e6c9fe4f         	ldb	-433,u
294c : 4f               	clra
294d : 830055           	subd	#$55
2950 : 10260572         	lbne	_52
2954 :                  _53
2954 : e6c9fe4e         	ldb	-434,u
2958 : 4f               	clra
2959 : 830001           	subd	#$1
295c : 10260566         	lbne	_52
                        * 				i=0;
2960 : 4f               	clra
2961 : 5f               	clrb
2962 : edc9fe44         	std	-444,u
                        * 				tile=0;
2966 : 4f               	clra
2967 : 5f               	clrb
2968 : e7c9fe41         	stb	-447,u
                        * 				switch(heading) {
296c : e6c9fe50         	ldb	-432,u
2970 : 4f               	clra
                        * 					case LEFTARROW :
                        * 						updateMap(map, xPos+1, yPos, getMapTileIndex(m
2971 : 10830009         	cmpd	#$9
AS09 Assembler for M6809 [1.42].                                     Page   25
-------------------------------- sokobanC.a09 --------------------------------

2975 : 1026014b         	lbne	_56
2979 :                  _55
2979 : e6c9fe51         	ldb	-431,u
297d : 4f               	clra
297e : 3406             	pshs	d
2980 : e6c9fe52         	ldb	-430,u
2984 : 4f               	clra
2985 : 3406             	pshs	d
2987 : 30c9fe54         	leax	-428,u
298b : 3410             	pshs	x
298d : 17fa74           	lbsr	getMapTi
2990 : 3266             	leas	6,s
2992 : 3406             	pshs	d
2994 : e6c9fe51         	ldb	-431,u
2998 : 4f               	clra
2999 : 3406             	pshs	d
299b : e6c9fe52         	ldb	-430,u
299f : 4f               	clra
29a0 : c30001           	addd	#$1
29a3 : 3406             	pshs	d
29a5 : 30c9fe54         	leax	-428,u
29a9 : 3410             	pshs	x
29ab : 17fa16           	lbsr	updateMa
29ae : 3268             	leas	8,s
                        * 						tile = getMapTileIndex(map, xPos-1, yPos); // 
29b0 : e6c9fe51         	ldb	-431,u
29b4 : 4f               	clra
29b5 : 3406             	pshs	d
29b7 : e6c9fe52         	ldb	-430,u
29bb : 4f               	clra
29bc : 830001           	subd	#$1
29bf : 3406             	pshs	d
29c1 : 30c9fe54         	leax	-428,u
29c5 : 3410             	pshs	x
29c7 : 17fa3a           	lbsr	getMapTi
29ca : 3266             	leas	6,s
29cc : e7c9fe41         	stb	-447,u
                        * 						if ((tile == iBOX) || (tile == iSTO_BOX)) {
29d0 : e6c9fe41         	ldb	-447,u
29d4 : 4f               	clra
29d5 : 830003           	subd	#$3
29d8 : 1027000c         	lbeq	_58
29dc : e6c9fe41         	ldb	-447,u
29e0 : 4f               	clra
29e1 : 830004           	subd	#$4
29e4 : 1026003d         	lbne	_57
29e8 :                  _58
                        * 							i = yPos*SCREEN_COL + (xPos);
29e8 : e6c9fe52         	ldb	-430,u
29ec : 4f               	clra
29ed : 3406             	pshs	d
29ef : cc0015           	ldd	#$15
29f2 : 3406             	pshs	d
29f4 : e6c9fe51         	ldb	-431,u
29f8 : 4f               	clra
29f9 : 3510             	puls	x
29fb : 170ba8           	lbsr	_00001
29fe : e3e1             	addd	,s++
2a00 : edc9fe44         	std	-444,u
                        * 							if (SOKOmap_L1[i] == iSTORAGE) tile = iSTO_BO
2a04 : ecc9fe44         	ldd	-444,u
2a08 : ae58             	ldx	-8,u
AS09 Assembler for M6809 [1.42].                                     Page   26
-------------------------------- sokobanC.a09 --------------------------------

2a0a : e68b             	ldb	d,x
2a0c : 4f               	clra
2a0d : 830002           	subd	#$2
2a10 : 1026000a         	lbne	_59
2a14 : cc0004           	ldd	#$4
2a17 : e7c9fe41         	stb	-447,u
                        * 							else tile = iBOX;
2a1b : 160007           	lbra	_60
2a1e :                  _59
2a1e : cc0003           	ldd	#$3
2a21 : e7c9fe41         	stb	-447,u
                        * 						}
2a25 :                  _60
                        * 						updateMap(map, xPos, yPos, tile);
2a25 :                  _57
2a25 : e6c9fe41         	ldb	-447,u
2a29 : 4f               	clra
2a2a : 3406             	pshs	d
2a2c : e6c9fe51         	ldb	-431,u
2a30 : 4f               	clra
2a31 : 3406             	pshs	d
2a33 : e6c9fe52         	ldb	-430,u
2a37 : 4f               	clra
2a38 : 3406             	pshs	d
2a3a : 30c9fe54         	leax	-428,u
2a3e : 3410             	pshs	x
2a40 : 17f981           	lbsr	updateMa
2a43 : 3268             	leas	8,s
                        * 						i = yPos*SCREEN_COL + (xPos-1);
2a45 : e6c9fe52         	ldb	-430,u
2a49 : 4f               	clra
2a4a : 830001           	subd	#$1
2a4d : 3406             	pshs	d
2a4f : cc0015           	ldd	#$15
2a52 : 3406             	pshs	d
2a54 : e6c9fe51         	ldb	-431,u
2a58 : 4f               	clra
2a59 : 3510             	puls	x
2a5b : 170b48           	lbsr	_00001
2a5e : e3e1             	addd	,s++
2a60 : edc9fe44         	std	-444,u
                        * 						if (SOKOmap_L1[i] == iSTORAGE) updateMap(map, 
2a64 : ecc9fe44         	ldd	-444,u
2a68 : ae58             	ldx	-8,u
2a6a : e68b             	ldb	d,x
2a6c : 4f               	clra
2a6d : 830002           	subd	#$2
2a70 : 10260024         	lbne	_61
2a74 : cc0002           	ldd	#$2
2a77 : 3406             	pshs	d
2a79 : e6c9fe51         	ldb	-431,u
2a7d : 4f               	clra
2a7e : 3406             	pshs	d
2a80 : e6c9fe52         	ldb	-430,u
2a84 : 4f               	clra
2a85 : 830001           	subd	#$1
2a88 : 3406             	pshs	d
2a8a : 30c9fe54         	leax	-428,u
2a8e : 3410             	pshs	x
2a90 : 17f931           	lbsr	updateMa
2a93 : 3268             	leas	8,s
                        * 						else updateMap(map, xPos-1, yPos, iEMPTY);
AS09 Assembler for M6809 [1.42].                                     Page   27
-------------------------------- sokobanC.a09 --------------------------------

2a95 : 160020           	lbra	_62
2a98 :                  _61
2a98 : 4f               	clra
2a99 : 5f               	clrb
2a9a : 3406             	pshs	d
2a9c : e6c9fe51         	ldb	-431,u
2aa0 : 4f               	clra
2aa1 : 3406             	pshs	d
2aa3 : e6c9fe52         	ldb	-430,u
2aa7 : 4f               	clra
2aa8 : 830001           	subd	#$1
2aab : 3406             	pshs	d
2aad : 30c9fe54         	leax	-428,u
2ab1 : 3410             	pshs	x
2ab3 : 17f90e           	lbsr	updateMa
2ab6 : 3268             	leas	8,s
                        * 						xPos++;		
2ab8 :                  _62
2ab8 : 30c9fe52         	leax	-430,u
2abc : e684             	ldb	,x
2abe : 6c84             	inc	,x
2ac0 : 4f               	clra
                        * 						break;					
2ac1 : 1603fc           	lbra	_54
                        * 					case RIGHTARROW :
                        * 						updateMap(map, xPos-1, yPos, getMapTileIndex(m
2ac4 :                  _56
2ac4 : 10830011         	cmpd	#$11
2ac8 : 1026014b         	lbne	_64
2acc :                  _63
2acc : e6c9fe51         	ldb	-431,u
2ad0 : 4f               	clra
2ad1 : 3406             	pshs	d
2ad3 : e6c9fe52         	ldb	-430,u
2ad7 : 4f               	clra
2ad8 : 3406             	pshs	d
2ada : 30c9fe54         	leax	-428,u
2ade : 3410             	pshs	x
2ae0 : 17f921           	lbsr	getMapTi
2ae3 : 3266             	leas	6,s
2ae5 : 3406             	pshs	d
2ae7 : e6c9fe51         	ldb	-431,u
2aeb : 4f               	clra
2aec : 3406             	pshs	d
2aee : e6c9fe52         	ldb	-430,u
2af2 : 4f               	clra
2af3 : 830001           	subd	#$1
2af6 : 3406             	pshs	d
2af8 : 30c9fe54         	leax	-428,u
2afc : 3410             	pshs	x
2afe : 17f8c3           	lbsr	updateMa
2b01 : 3268             	leas	8,s
                        * 						tile = getMapTileIndex(map, xPos+1, yPos); // 
2b03 : e6c9fe51         	ldb	-431,u
2b07 : 4f               	clra
2b08 : 3406             	pshs	d
2b0a : e6c9fe52         	ldb	-430,u
2b0e : 4f               	clra
2b0f : c30001           	addd	#$1
2b12 : 3406             	pshs	d
2b14 : 30c9fe54         	leax	-428,u
2b18 : 3410             	pshs	x
AS09 Assembler for M6809 [1.42].                                     Page   28
-------------------------------- sokobanC.a09 --------------------------------

2b1a : 17f8e7           	lbsr	getMapTi
2b1d : 3266             	leas	6,s
2b1f : e7c9fe41         	stb	-447,u
                        * 						if ((tile == iBOX) || (tile == iSTO_BOX)) {
2b23 : e6c9fe41         	ldb	-447,u
2b27 : 4f               	clra
2b28 : 830003           	subd	#$3
2b2b : 1027000c         	lbeq	_66
2b2f : e6c9fe41         	ldb	-447,u
2b33 : 4f               	clra
2b34 : 830004           	subd	#$4
2b37 : 1026003d         	lbne	_65
2b3b :                  _66
                        * 							i = yPos*SCREEN_COL + (xPos);
2b3b : e6c9fe52         	ldb	-430,u
2b3f : 4f               	clra
2b40 : 3406             	pshs	d
2b42 : cc0015           	ldd	#$15
2b45 : 3406             	pshs	d
2b47 : e6c9fe51         	ldb	-431,u
2b4b : 4f               	clra
2b4c : 3510             	puls	x
2b4e : 170a55           	lbsr	_00001
2b51 : e3e1             	addd	,s++
2b53 : edc9fe44         	std	-444,u
                        * 							if (SOKOmap_L1[i] == iSTORAGE) tile = iSTO_BO
2b57 : ecc9fe44         	ldd	-444,u
2b5b : ae58             	ldx	-8,u
2b5d : e68b             	ldb	d,x
2b5f : 4f               	clra
2b60 : 830002           	subd	#$2
2b63 : 1026000a         	lbne	_67
2b67 : cc0004           	ldd	#$4
2b6a : e7c9fe41         	stb	-447,u
                        * 							else tile = iBOX;
2b6e : 160007           	lbra	_68
2b71 :                  _67
2b71 : cc0003           	ldd	#$3
2b74 : e7c9fe41         	stb	-447,u
                        * 						}						
2b78 :                  _68
                        * 						updateMap(map, xPos, yPos, tile);
2b78 :                  _65
2b78 : e6c9fe41         	ldb	-447,u
2b7c : 4f               	clra
2b7d : 3406             	pshs	d
2b7f : e6c9fe51         	ldb	-431,u
2b83 : 4f               	clra
2b84 : 3406             	pshs	d
2b86 : e6c9fe52         	ldb	-430,u
2b8a : 4f               	clra
2b8b : 3406             	pshs	d
2b8d : 30c9fe54         	leax	-428,u
2b91 : 3410             	pshs	x
2b93 : 17f82e           	lbsr	updateMa
2b96 : 3268             	leas	8,s
                        * 						i = yPos*SCREEN_COL + (xPos+1);
2b98 : e6c9fe52         	ldb	-430,u
2b9c : 4f               	clra
2b9d : c30001           	addd	#$1
2ba0 : 3406             	pshs	d
2ba2 : cc0015           	ldd	#$15
AS09 Assembler for M6809 [1.42].                                     Page   29
-------------------------------- sokobanC.a09 --------------------------------

2ba5 : 3406             	pshs	d
2ba7 : e6c9fe51         	ldb	-431,u
2bab : 4f               	clra
2bac : 3510             	puls	x
2bae : 1709f5           	lbsr	_00001
2bb1 : e3e1             	addd	,s++
2bb3 : edc9fe44         	std	-444,u
                        * 						if (SOKOmap_L1[i] == iSTORAGE) updateMap(map, 
2bb7 : ecc9fe44         	ldd	-444,u
2bbb : ae58             	ldx	-8,u
2bbd : e68b             	ldb	d,x
2bbf : 4f               	clra
2bc0 : 830002           	subd	#$2
2bc3 : 10260024         	lbne	_69
2bc7 : cc0002           	ldd	#$2
2bca : 3406             	pshs	d
2bcc : e6c9fe51         	ldb	-431,u
2bd0 : 4f               	clra
2bd1 : 3406             	pshs	d
2bd3 : e6c9fe52         	ldb	-430,u
2bd7 : 4f               	clra
2bd8 : c30001           	addd	#$1
2bdb : 3406             	pshs	d
2bdd : 30c9fe54         	leax	-428,u
2be1 : 3410             	pshs	x
2be3 : 17f7de           	lbsr	updateMa
2be6 : 3268             	leas	8,s
                        * 						else updateMap(map, xPos+1, yPos, iEMPTY);
2be8 : 160020           	lbra	_70
2beb :                  _69
2beb : 4f               	clra
2bec : 5f               	clrb
2bed : 3406             	pshs	d
2bef : e6c9fe51         	ldb	-431,u
2bf3 : 4f               	clra
2bf4 : 3406             	pshs	d
2bf6 : e6c9fe52         	ldb	-430,u
2bfa : 4f               	clra
2bfb : c30001           	addd	#$1
2bfe : 3406             	pshs	d
2c00 : 30c9fe54         	leax	-428,u
2c04 : 3410             	pshs	x
2c06 : 17f7bb           	lbsr	updateMa
2c09 : 3268             	leas	8,s
                        * 						xPos--;
2c0b :                  _70
2c0b : 30c9fe52         	leax	-430,u
2c0f : e684             	ldb	,x
2c11 : 6a84             	dec	,x
2c13 : 4f               	clra
                        * 						break;
2c14 : 1602a9           	lbra	_54
                        * 					case UPARROW :
                        * 						updateMap(map, xPos, yPos+1, getMapTileIndex(m
2c17 :                  _64
2c17 : 1083005e         	cmpd	#$5e
2c1b : 1026014e         	lbne	_72
2c1f :                  _71
2c1f : e6c9fe51         	ldb	-431,u
2c23 : 4f               	clra
2c24 : 3406             	pshs	d
2c26 : e6c9fe52         	ldb	-430,u
AS09 Assembler for M6809 [1.42].                                     Page   30
-------------------------------- sokobanC.a09 --------------------------------

2c2a : 4f               	clra
2c2b : 3406             	pshs	d
2c2d : 30c9fe54         	leax	-428,u
2c31 : 3410             	pshs	x
2c33 : 17f7ce           	lbsr	getMapTi
2c36 : 3266             	leas	6,s
2c38 : 3406             	pshs	d
2c3a : e6c9fe51         	ldb	-431,u
2c3e : 4f               	clra
2c3f : c30001           	addd	#$1
2c42 : 3406             	pshs	d
2c44 : e6c9fe52         	ldb	-430,u
2c48 : 4f               	clra
2c49 : 3406             	pshs	d
2c4b : 30c9fe54         	leax	-428,u
2c4f : 3410             	pshs	x
2c51 : 17f770           	lbsr	updateMa
2c54 : 3268             	leas	8,s
                        * 						tile = getMapTileIndex(map, xPos, yPos-1); // 
2c56 : e6c9fe51         	ldb	-431,u
2c5a : 4f               	clra
2c5b : 830001           	subd	#$1
2c5e : 3406             	pshs	d
2c60 : e6c9fe52         	ldb	-430,u
2c64 : 4f               	clra
2c65 : 3406             	pshs	d
2c67 : 30c9fe54         	leax	-428,u
2c6b : 3410             	pshs	x
2c6d : 17f794           	lbsr	getMapTi
2c70 : 3266             	leas	6,s
2c72 : e7c9fe41         	stb	-447,u
                        * 						if ((tile == iBOX) || (tile == iSTO_BOX)) {
2c76 : e6c9fe41         	ldb	-447,u
2c7a : 4f               	clra
2c7b : 830003           	subd	#$3
2c7e : 1027000c         	lbeq	_74
2c82 : e6c9fe41         	ldb	-447,u
2c86 : 4f               	clra
2c87 : 830004           	subd	#$4
2c8a : 1026003d         	lbne	_73
2c8e :                  _74
                        * 							i = yPos*SCREEN_COL + (xPos);
2c8e : e6c9fe52         	ldb	-430,u
2c92 : 4f               	clra
2c93 : 3406             	pshs	d
2c95 : cc0015           	ldd	#$15
2c98 : 3406             	pshs	d
2c9a : e6c9fe51         	ldb	-431,u
2c9e : 4f               	clra
2c9f : 3510             	puls	x
2ca1 : 170902           	lbsr	_00001
2ca4 : e3e1             	addd	,s++
2ca6 : edc9fe44         	std	-444,u
                        * 							if (SOKOmap_L1[i] == iSTORAGE) tile = iSTO_BO
2caa : ecc9fe44         	ldd	-444,u
2cae : ae58             	ldx	-8,u
2cb0 : e68b             	ldb	d,x
2cb2 : 4f               	clra
2cb3 : 830002           	subd	#$2
2cb6 : 1026000a         	lbne	_75
2cba : cc0004           	ldd	#$4
2cbd : e7c9fe41         	stb	-447,u
AS09 Assembler for M6809 [1.42].                                     Page   31
-------------------------------- sokobanC.a09 --------------------------------

                        * 							else tile = iBOX;
2cc1 : 160007           	lbra	_76
2cc4 :                  _75
2cc4 : cc0003           	ldd	#$3
2cc7 : e7c9fe41         	stb	-447,u
                        * 						}
2ccb :                  _76
                        * 						updateMap(map, xPos, yPos, tile);						
2ccb :                  _73
2ccb : e6c9fe41         	ldb	-447,u
2ccf : 4f               	clra
2cd0 : 3406             	pshs	d
2cd2 : e6c9fe51         	ldb	-431,u
2cd6 : 4f               	clra
2cd7 : 3406             	pshs	d
2cd9 : e6c9fe52         	ldb	-430,u
2cdd : 4f               	clra
2cde : 3406             	pshs	d
2ce0 : 30c9fe54         	leax	-428,u
2ce4 : 3410             	pshs	x
2ce6 : 17f6db           	lbsr	updateMa
2ce9 : 3268             	leas	8,s
                        * 						i = (yPos-1)*SCREEN_COL + xPos;
2ceb : e6c9fe52         	ldb	-430,u
2cef : 4f               	clra
2cf0 : 3406             	pshs	d
2cf2 : cc0015           	ldd	#$15
2cf5 : 3406             	pshs	d
2cf7 : e6c9fe51         	ldb	-431,u
2cfb : 4f               	clra
2cfc : 830001           	subd	#$1
2cff : 3510             	puls	x
2d01 : 1708a2           	lbsr	_00001
2d04 : e3e1             	addd	,s++
2d06 : edc9fe44         	std	-444,u
                        * 						if (SOKOmap_L1[i] == iSTORAGE) updateMap(map, 
2d0a : ecc9fe44         	ldd	-444,u
2d0e : ae58             	ldx	-8,u
2d10 : e68b             	ldb	d,x
2d12 : 4f               	clra
2d13 : 830002           	subd	#$2
2d16 : 10260024         	lbne	_77
2d1a : cc0002           	ldd	#$2
2d1d : 3406             	pshs	d
2d1f : e6c9fe51         	ldb	-431,u
2d23 : 4f               	clra
2d24 : 830001           	subd	#$1
2d27 : 3406             	pshs	d
2d29 : e6c9fe52         	ldb	-430,u
2d2d : 4f               	clra
2d2e : 3406             	pshs	d
2d30 : 30c9fe54         	leax	-428,u
2d34 : 3410             	pshs	x
2d36 : 17f68b           	lbsr	updateMa
2d39 : 3268             	leas	8,s
                        * 						else updateMap(map, xPos, yPos-1, iEMPTY);
2d3b : 160020           	lbra	_78
2d3e :                  _77
2d3e : 4f               	clra
2d3f : 5f               	clrb
2d40 : 3406             	pshs	d
2d42 : e6c9fe51         	ldb	-431,u
AS09 Assembler for M6809 [1.42].                                     Page   32
-------------------------------- sokobanC.a09 --------------------------------

2d46 : 4f               	clra
2d47 : 830001           	subd	#$1
2d4a : 3406             	pshs	d
2d4c : e6c9fe52         	ldb	-430,u
2d50 : 4f               	clra
2d51 : 3406             	pshs	d
2d53 : 30c9fe54         	leax	-428,u
2d57 : 3410             	pshs	x
2d59 : 17f668           	lbsr	updateMa
2d5c : 3268             	leas	8,s
                        * 						yPos++;
2d5e :                  _78
2d5e : 30c9fe51         	leax	-431,u
2d62 : e684             	ldb	,x
2d64 : 6c84             	inc	,x
2d66 : 4f               	clra
                        * 						break;
2d67 : 160156           	lbra	_54
                        * 					break;
2d6a : 160153           	lbra	_54
                        * 					case DOWNARROW :
                        * 						updateMap(map, xPos, yPos-1, getMapTileIndex(m
2d6d :                  _72
2d6d : 10830012         	cmpd	#$12
2d71 : 1026014b         	lbne	_80
2d75 :                  _79
2d75 : e6c9fe51         	ldb	-431,u
2d79 : 4f               	clra
2d7a : 3406             	pshs	d
2d7c : e6c9fe52         	ldb	-430,u
2d80 : 4f               	clra
2d81 : 3406             	pshs	d
2d83 : 30c9fe54         	leax	-428,u
2d87 : 3410             	pshs	x
2d89 : 17f678           	lbsr	getMapTi
2d8c : 3266             	leas	6,s
2d8e : 3406             	pshs	d
2d90 : e6c9fe51         	ldb	-431,u
2d94 : 4f               	clra
2d95 : 830001           	subd	#$1
2d98 : 3406             	pshs	d
2d9a : e6c9fe52         	ldb	-430,u
2d9e : 4f               	clra
2d9f : 3406             	pshs	d
2da1 : 30c9fe54         	leax	-428,u
2da5 : 3410             	pshs	x
2da7 : 17f61a           	lbsr	updateMa
2daa : 3268             	leas	8,s
                        * 						tile = getMapTileIndex(map, xPos, yPos+1); // 
2dac : e6c9fe51         	ldb	-431,u
2db0 : 4f               	clra
2db1 : c30001           	addd	#$1
2db4 : 3406             	pshs	d
2db6 : e6c9fe52         	ldb	-430,u
2dba : 4f               	clra
2dbb : 3406             	pshs	d
2dbd : 30c9fe54         	leax	-428,u
2dc1 : 3410             	pshs	x
2dc3 : 17f63e           	lbsr	getMapTi
2dc6 : 3266             	leas	6,s
2dc8 : e7c9fe41         	stb	-447,u
                        * 						if ((tile == iBOX) || (tile == iSTO_BOX)) {
AS09 Assembler for M6809 [1.42].                                     Page   33
-------------------------------- sokobanC.a09 --------------------------------

2dcc : e6c9fe41         	ldb	-447,u
2dd0 : 4f               	clra
2dd1 : 830003           	subd	#$3
2dd4 : 1027000c         	lbeq	_82
2dd8 : e6c9fe41         	ldb	-447,u
2ddc : 4f               	clra
2ddd : 830004           	subd	#$4
2de0 : 1026003d         	lbne	_81
2de4 :                  _82
                        * 							i = yPos*SCREEN_COL + (xPos);
2de4 : e6c9fe52         	ldb	-430,u
2de8 : 4f               	clra
2de9 : 3406             	pshs	d
2deb : cc0015           	ldd	#$15
2dee : 3406             	pshs	d
2df0 : e6c9fe51         	ldb	-431,u
2df4 : 4f               	clra
2df5 : 3510             	puls	x
2df7 : 1707ac           	lbsr	_00001
2dfa : e3e1             	addd	,s++
2dfc : edc9fe44         	std	-444,u
                        * 							if (SOKOmap_L1[i] == iSTORAGE) tile = iSTO_BO
2e00 : ecc9fe44         	ldd	-444,u
2e04 : ae58             	ldx	-8,u
2e06 : e68b             	ldb	d,x
2e08 : 4f               	clra
2e09 : 830002           	subd	#$2
2e0c : 1026000a         	lbne	_83
2e10 : cc0004           	ldd	#$4
2e13 : e7c9fe41         	stb	-447,u
                        * 							else tile = iBOX;
2e17 : 160007           	lbra	_84
2e1a :                  _83
2e1a : cc0003           	ldd	#$3
2e1d : e7c9fe41         	stb	-447,u
                        * 						}
2e21 :                  _84
                        * 						updateMap(map, xPos, yPos, tile);
2e21 :                  _81
2e21 : e6c9fe41         	ldb	-447,u
2e25 : 4f               	clra
2e26 : 3406             	pshs	d
2e28 : e6c9fe51         	ldb	-431,u
2e2c : 4f               	clra
2e2d : 3406             	pshs	d
2e2f : e6c9fe52         	ldb	-430,u
2e33 : 4f               	clra
2e34 : 3406             	pshs	d
2e36 : 30c9fe54         	leax	-428,u
2e3a : 3410             	pshs	x
2e3c : 17f585           	lbsr	updateMa
2e3f : 3268             	leas	8,s
                        * 						i = (yPos+1)*SCREEN_COL + xPos;
2e41 : e6c9fe52         	ldb	-430,u
2e45 : 4f               	clra
2e46 : 3406             	pshs	d
2e48 : cc0015           	ldd	#$15
2e4b : 3406             	pshs	d
2e4d : e6c9fe51         	ldb	-431,u
2e51 : 4f               	clra
2e52 : c30001           	addd	#$1
2e55 : 3510             	puls	x
AS09 Assembler for M6809 [1.42].                                     Page   34
-------------------------------- sokobanC.a09 --------------------------------

2e57 : 17074c           	lbsr	_00001
2e5a : e3e1             	addd	,s++
2e5c : edc9fe44         	std	-444,u
                        * 						if (SOKOmap_L1[i] == iSTORAGE) updateMap(map, 
2e60 : ecc9fe44         	ldd	-444,u
2e64 : ae58             	ldx	-8,u
2e66 : e68b             	ldb	d,x
2e68 : 4f               	clra
2e69 : 830002           	subd	#$2
2e6c : 10260024         	lbne	_85
2e70 : cc0002           	ldd	#$2
2e73 : 3406             	pshs	d
2e75 : e6c9fe51         	ldb	-431,u
2e79 : 4f               	clra
2e7a : c30001           	addd	#$1
2e7d : 3406             	pshs	d
2e7f : e6c9fe52         	ldb	-430,u
2e83 : 4f               	clra
2e84 : 3406             	pshs	d
2e86 : 30c9fe54         	leax	-428,u
2e8a : 3410             	pshs	x
2e8c : 17f535           	lbsr	updateMa
2e8f : 3268             	leas	8,s
                        * 						else updateMap(map, xPos, yPos+1, iEMPTY);
2e91 : 160020           	lbra	_86
2e94 :                  _85
2e94 : 4f               	clra
2e95 : 5f               	clrb
2e96 : 3406             	pshs	d
2e98 : e6c9fe51         	ldb	-431,u
2e9c : 4f               	clra
2e9d : c30001           	addd	#$1
2ea0 : 3406             	pshs	d
2ea2 : e6c9fe52         	ldb	-430,u
2ea6 : 4f               	clra
2ea7 : 3406             	pshs	d
2ea9 : 30c9fe54         	leax	-428,u
2ead : 3410             	pshs	x
2eaf : 17f512           	lbsr	updateMa
2eb2 : 3268             	leas	8,s
                        * 						yPos--;
2eb4 :                  _86
2eb4 : 30c9fe51         	leax	-431,u
2eb8 : e684             	ldb	,x
2eba : 6a84             	dec	,x
2ebc : 4f               	clra
                        * 						break;
2ebd : 160000           	lbra	_54
                        * 				}
                        * 				undo = false;
2ec0 :                  _80
2ec0 :                  _54
2ec0 : 4f               	clra
2ec1 : 5f               	clrb
2ec2 : e7c9fe4e         	stb	-434,u
                        * 			}
                        * 			
                        * 			if((key != LEFTARROW) && (key != UPARROW) && (key
2ec6 :                  _52
2ec6 : e6c9fe4f         	ldb	-433,u
2eca : 4f               	clra
2ecb : 830009           	subd	#$9
AS09 Assembler for M6809 [1.42].                                     Page   35
-------------------------------- sokobanC.a09 --------------------------------

2ece : 1027002d         	lbeq	_87
2ed2 : e6c9fe4f         	ldb	-433,u
2ed6 : 4f               	clra
2ed7 : 83005e           	subd	#$5e
2eda : 10270021         	lbeq	_87
2ede : e6c9fe4f         	ldb	-433,u
2ee2 : 4f               	clra
2ee3 : 830012           	subd	#$12
2ee6 : 10270015         	lbeq	_87
2eea : e6c9fe4f         	ldb	-433,u
2eee : 4f               	clra
2eef : 830011           	subd	#$11
2ef2 : 10270009         	lbeq	_87
2ef6 : 4f               	clra
2ef7 : 5f               	clrb
2ef8 : e7c9fe4f         	stb	-433,u
                        * 			else {
2efc : 16004c           	lbra	_88
2eff :                  _87
                        * 				if (key != heading) { // change direction when p
2eff : e6c9fe50         	ldb	-432,u
2f03 : 4f               	clra
2f04 : 3406             	pshs	d
2f06 : e6c9fe4f         	ldb	-433,u
2f0a : 4f               	clra
2f0b : a3e1             	subd	,s++
2f0d : 1027003a         	lbeq	_89
                        * 					heading = key;	// new direction
2f11 : e6c9fe4f         	ldb	-433,u
2f15 : 4f               	clra
2f16 : e7c9fe50         	stb	-432,u
                        * 					for (x = 0; x < RAMcontCnt; x++) {
2f1a : 4f               	clra
2f1b : 5f               	clrb
2f1c : e7c9fe42         	stb	-446,u
2f20 :                  _91
2f20 : e6c9fe42         	ldb	-446,u
2f24 : 4f               	clra
2f25 : 83000a           	subd	#$a
2f28 : 1024001f         	lbhs	_90
                        * 						updateRAMTile(heading, x);
2f2c : e6c9fe42         	ldb	-446,u
2f30 : 4f               	clra
2f31 : 3406             	pshs	d
2f33 : e6c9fe50         	ldb	-432,u
2f37 : 4f               	clra
2f38 : 3406             	pshs	d
2f3a : 17f127           	lbsr	updateRA
2f3d : 3264             	leas	4,s
                        * 					}
                        * 				}
2f3f :                  _92
2f3f : 30c9fe42         	leax	-446,u
2f43 : e684             	ldb	,x
2f45 : 6c84             	inc	,x
2f47 : 4f               	clra
2f48 : 16ffd5           	lbra	_91
2f4b :                  _90
                        * 			}
2f4b :                  _89
                        * 		}		
2f4b :                  _88
AS09 Assembler for M6809 [1.42].                                     Page   36
-------------------------------- sokobanC.a09 --------------------------------

                        * 		
                        * 		nextxPos = nextyPos = next2xPos = next2yPos = 0;
2f4b :                  _50
2f4b : 4f               	clra
2f4c : 5f               	clrb
2f4d : e7c9fe3d         	stb	-451,u
2f51 : e7c9fe3e         	stb	-450,u
2f55 : e7c9fe3f         	stb	-449,u
2f59 : e7c9fe40         	stb	-448,u
                        * 		switch(heading) {
2f5d : e6c9fe50         	ldb	-432,u
2f61 : 4f               	clra
                        * 		case LEFTARROW : 
                        * 			nextxPos = xPos-1; nextyPos = yPos;
2f62 : 10830009         	cmpd	#$9
2f66 : 1026002d         	lbne	_95
2f6a :                  _94
2f6a : e6c9fe52         	ldb	-430,u
2f6e : 4f               	clra
2f6f : 830001           	subd	#$1
2f72 : e7c9fe40         	stb	-448,u
2f76 : e6c9fe51         	ldb	-431,u
2f7a : 4f               	clra
2f7b : e7c9fe3f         	stb	-449,u
                        * 			next2xPos = xPos-2; next2yPos = yPos;
2f7f : e6c9fe52         	ldb	-430,u
2f83 : 4f               	clra
2f84 : 830002           	subd	#$2
2f87 : e7c9fe3e         	stb	-450,u
2f8b : e6c9fe51         	ldb	-431,u
2f8f : 4f               	clra
2f90 : e7c9fe3d         	stb	-451,u
                        * 			break;
2f94 : 16009f           	lbra	_93
                        * 		case RIGHTARROW :
                        * 			nextxPos = xPos+1; nextyPos = yPos;
2f97 :                  _95
2f97 : 10830011         	cmpd	#$11
2f9b : 1026002d         	lbne	_97
2f9f :                  _96
2f9f : e6c9fe52         	ldb	-430,u
2fa3 : 4f               	clra
2fa4 : c30001           	addd	#$1
2fa7 : e7c9fe40         	stb	-448,u
2fab : e6c9fe51         	ldb	-431,u
2faf : 4f               	clra
2fb0 : e7c9fe3f         	stb	-449,u
                        * 			next2xPos = xPos+2; next2yPos = yPos;
2fb4 : e6c9fe52         	ldb	-430,u
2fb8 : 4f               	clra
2fb9 : c30002           	addd	#$2
2fbc : e7c9fe3e         	stb	-450,u
2fc0 : e6c9fe51         	ldb	-431,u
2fc4 : 4f               	clra
2fc5 : e7c9fe3d         	stb	-451,u
                        * 			break;
2fc9 : 16006a           	lbra	_93
                        * 		case UPARROW :
                        * 			nextxPos = xPos; nextyPos = yPos-1;
2fcc :                  _97
2fcc : 1083005e         	cmpd	#$5e
2fd0 : 1026002d         	lbne	_99
AS09 Assembler for M6809 [1.42].                                     Page   37
-------------------------------- sokobanC.a09 --------------------------------

2fd4 :                  _98
2fd4 : e6c9fe52         	ldb	-430,u
2fd8 : 4f               	clra
2fd9 : e7c9fe40         	stb	-448,u
2fdd : e6c9fe51         	ldb	-431,u
2fe1 : 4f               	clra
2fe2 : 830001           	subd	#$1
2fe5 : e7c9fe3f         	stb	-449,u
                        * 			next2xPos = xPos; next2yPos = yPos-2;
2fe9 : e6c9fe52         	ldb	-430,u
2fed : 4f               	clra
2fee : e7c9fe3e         	stb	-450,u
2ff2 : e6c9fe51         	ldb	-431,u
2ff6 : 4f               	clra
2ff7 : 830002           	subd	#$2
2ffa : e7c9fe3d         	stb	-451,u
                        * 			break;
2ffe : 160035           	lbra	_93
                        * 		case DOWNARROW :
                        * 			nextxPos = xPos; nextyPos = yPos+1;
3001 :                  _99
3001 : 10830012         	cmpd	#$12
3005 : 1026002d         	lbne	_101
3009 :                  _100
3009 : e6c9fe52         	ldb	-430,u
300d : 4f               	clra
300e : e7c9fe40         	stb	-448,u
3012 : e6c9fe51         	ldb	-431,u
3016 : 4f               	clra
3017 : c30001           	addd	#$1
301a : e7c9fe3f         	stb	-449,u
                        * 			next2xPos = xPos; next2yPos = yPos+2;
301e : e6c9fe52         	ldb	-430,u
3022 : 4f               	clra
3023 : e7c9fe3e         	stb	-450,u
3027 : e6c9fe51         	ldb	-431,u
302b : 4f               	clra
302c : c30002           	addd	#$2
302f : e7c9fe3d         	stb	-451,u
                        * 			break;
3033 : 160000           	lbra	_93
                        * 		}
                        * 
                        * 		switch(state) {
3036 :                  _101
3036 :                  _93
3036 : e6c9fe53         	ldb	-429,u
303a : 4f               	clra
                        * 		case standing:
                        * 			{
303b : 10830000         	cmpd	#$0
303f : 102600cc         	lbne	_104
3043 :                  _103
                        * 				nextTile = getMapTileIndex(map, nextxPos, nextyP
3043 : e6c9fe3f         	ldb	-449,u
3047 : 4f               	clra
3048 : 3406             	pshs	d
304a : e6c9fe40         	ldb	-448,u
304e : 4f               	clra
304f : 3406             	pshs	d
3051 : 30c9fe54         	leax	-428,u
3055 : 3410             	pshs	x
AS09 Assembler for M6809 [1.42].                                     Page   38
-------------------------------- sokobanC.a09 --------------------------------

3057 : 17f3aa           	lbsr	getMapTi
305a : 3266             	leas	6,s
305c : e7c9fe3c         	stb	-452,u
                        * 				next2Tile = getMapTileIndex(map, next2xPos, next
3060 : e6c9fe3d         	ldb	-451,u
3064 : 4f               	clra
3065 : 3406             	pshs	d
3067 : e6c9fe3e         	ldb	-450,u
306b : 4f               	clra
306c : 3406             	pshs	d
306e : 30c9fe54         	leax	-428,u
3072 : 3410             	pshs	x
3074 : 17f38d           	lbsr	getMapTi
3077 : 3266             	leas	6,s
3079 : e7c9fe3b         	stb	-453,u
                        * 				if ((key != 0) && ((nextTile == iEMPTY) || (next
307d : e6c9fe4f         	ldb	-433,u
3081 : 4f               	clra
3082 : 830000           	subd	#$0
3085 : 1027007d         	lbeq	_105
3089 : e6c9fe3c         	ldb	-452,u
308d : 4f               	clra
308e : 830000           	subd	#$0
3091 : 1027003c         	lbeq	_106
3095 : e6c9fe3c         	ldb	-452,u
3099 : 4f               	clra
309a : 830002           	subd	#$2
309d : 10270030         	lbeq	_106
30a1 : e6c9fe3c         	ldb	-452,u
30a5 : 4f               	clra
30a6 : 830003           	subd	#$3
30a9 : 1027000c         	lbeq	_107
30ad : e6c9fe3c         	ldb	-452,u
30b1 : 4f               	clra
30b2 : 830004           	subd	#$4
30b5 : 1026004d         	lbne	_105
30b9 :                  _107
30b9 : e6c9fe3b         	ldb	-453,u
30bd : 4f               	clra
30be : 830002           	subd	#$2
30c1 : 1027000c         	lbeq	_108
30c5 : e6c9fe3b         	ldb	-453,u
30c9 : 4f               	clra
30ca : 830000           	subd	#$0
30cd : 10260035         	lbne	_105
30d1 :                  _108
30d1 :                  _106
                        * 					state = push1;		// begin to move				
30d1 : cc0001           	ldd	#$1
30d4 : e7c9fe53         	stb	-429,u
                        * 					updateMap(map, xPos, yPos, iPU1);
30d8 : cc0006           	ldd	#$6
30db : 3406             	pshs	d
30dd : e6c9fe51         	ldb	-431,u
30e1 : 4f               	clra
30e2 : 3406             	pshs	d
30e4 : e6c9fe52         	ldb	-430,u
30e8 : 4f               	clra
30e9 : 3406             	pshs	d
30eb : 30c9fe54         	leax	-428,u
30ef : 3410             	pshs	x
30f1 : 17f2d0           	lbsr	updateMa
AS09 Assembler for M6809 [1.42].                                     Page   39
-------------------------------- sokobanC.a09 --------------------------------

30f4 : 3268             	leas	8,s
                        * 					sendstepSound();	// update the data container
30f6 : 17f2a8           	lbsr	sendstep
                        * 					msDelay(PACE);	// execution sync
30f9 : cc0023           	ldd	#$23
30fc : 3406             	pshs	d
30fe : 17c1dd           	lbsr	msDelay
3101 : 3262             	leas	2,s
                        * 				}
                        * 				else key = 0;
3103 : 160006           	lbra	_109
3106 :                  _105
3106 : 4f               	clra
3107 : 5f               	clrb
3108 : e7c9fe4f         	stb	-433,u
                        * 			}			
310c :                  _109
                        * 			break;
310c : 160490           	lbra	_102
                        * 		case push1:
                        * 			{
310f :                  _104
310f : 10830001         	cmpd	#$1
3113 : 10260282         	lbne	_111
3117 :                  _110
                        * 				nextTile = getMapTileIndex(map, nextxPos, nextyP
3117 : e6c9fe3f         	ldb	-449,u
311b : 4f               	clra
311c : 3406             	pshs	d
311e : e6c9fe40         	ldb	-448,u
3122 : 4f               	clra
3123 : 3406             	pshs	d
3125 : 30c9fe54         	leax	-428,u
3129 : 3410             	pshs	x
312b : 17f2d6           	lbsr	getMapTi
312e : 3266             	leas	6,s
3130 : e7c9fe3c         	stb	-452,u
                        * 				if(nextTile == iWALL) {
3134 : e6c9fe3c         	ldb	-452,u
3138 : 4f               	clra
3139 : 830001           	subd	#$1
313c : 10260035         	lbne	_112
                        * 					state = standing;					// stop pushing
3140 : 4f               	clra
3141 : 5f               	clrb
3142 : e7c9fe53         	stb	-429,u
                        * 					updateRAMTile(heading, iMAN_STD);	// data conta
3146 : cc0005           	ldd	#$5
3149 : 3406             	pshs	d
314b : e6c9fe50         	ldb	-432,u
314f : 4f               	clra
3150 : 3406             	pshs	d
3152 : 17ef0f           	lbsr	updateRA
3155 : 3264             	leas	4,s
                        * 					updateMap(map, xPos, yPos, iMAN_STD);
3157 : cc0005           	ldd	#$5
315a : 3406             	pshs	d
315c : e6c9fe51         	ldb	-431,u
3160 : 4f               	clra
3161 : 3406             	pshs	d
3163 : e6c9fe52         	ldb	-430,u
3167 : 4f               	clra
AS09 Assembler for M6809 [1.42].                                     Page   40
-------------------------------- sokobanC.a09 --------------------------------

3168 : 3406             	pshs	d
316a : 30c9fe54         	leax	-428,u
316e : 3410             	pshs	x
3170 : 17f251           	lbsr	updateMa
3173 : 3268             	leas	8,s
                        * 				}			
                        * 				if((nextTile == iBOX) || (nextTile == iSTO_BOX))
3175 :                  _112
3175 : e6c9fe3c         	ldb	-452,u
3179 : 4f               	clra
317a : 830003           	subd	#$3
317d : 1027000c         	lbeq	_114
3181 : e6c9fe3c         	ldb	-452,u
3185 : 4f               	clra
3186 : 830004           	subd	#$4
3189 : 10260136         	lbne	_113
318d :                  _114
                        * 					next2Tile = getMapTileIndex(map, next2xPos, nex
318d : e6c9fe3d         	ldb	-451,u
3191 : 4f               	clra
3192 : 3406             	pshs	d
3194 : e6c9fe3e         	ldb	-450,u
3198 : 4f               	clra
3199 : 3406             	pshs	d
319b : 30c9fe54         	leax	-428,u
319f : 3410             	pshs	x
31a1 : 17f260           	lbsr	getMapTi
31a4 : 3266             	leas	6,s
31a6 : e7c9fe3b         	stb	-453,u
                        * 					if((next2Tile == iEMPTY) || (next2Tile == iSTOR
31aa : e6c9fe3b         	ldb	-453,u
31ae : 4f               	clra
31af : 830000           	subd	#$0
31b2 : 1027000c         	lbeq	_116
31b6 : e6c9fe3b         	ldb	-453,u
31ba : 4f               	clra
31bb : 830002           	subd	#$2
31be : 102600cc         	lbne	_115
31c2 :                  _116
                        * 						state = push2_box;	// push the box
31c2 : cc0003           	ldd	#$3
31c5 : e7c9fe53         	stb	-429,u
                        * 						setSound(iSOUND);
31c9 : cc0005           	ldd	#$5
31cc : 3406             	pshs	d
31ce : 17c0b9           	lbsr	setSound
31d1 : 3262             	leas	2,s
                        * 						i = yPos*SCREEN_COL + xPos;
31d3 : e6c9fe52         	ldb	-430,u
31d7 : 4f               	clra
31d8 : 3406             	pshs	d
31da : cc0015           	ldd	#$15
31dd : 3406             	pshs	d
31df : e6c9fe51         	ldb	-431,u
31e3 : 4f               	clra
31e4 : 3510             	puls	x
31e6 : 1703bd           	lbsr	_00001
31e9 : e3e1             	addd	,s++
31eb : edc9fe44         	std	-444,u
                        * 						if (SOKOmap_L1[i] == iSTORAGE) updateMap(map, 
31ef : ecc9fe44         	ldd	-444,u
31f3 : ae58             	ldx	-8,u
AS09 Assembler for M6809 [1.42].                                     Page   41
-------------------------------- sokobanC.a09 --------------------------------

31f5 : e68b             	ldb	d,x
31f7 : 4f               	clra
31f8 : 830002           	subd	#$2
31fb : 10260021         	lbne	_117
31ff : cc0002           	ldd	#$2
3202 : 3406             	pshs	d
3204 : e6c9fe51         	ldb	-431,u
3208 : 4f               	clra
3209 : 3406             	pshs	d
320b : e6c9fe52         	ldb	-430,u
320f : 4f               	clra
3210 : 3406             	pshs	d
3212 : 30c9fe54         	leax	-428,u
3216 : 3410             	pshs	x
3218 : 17f1a9           	lbsr	updateMa
321b : 3268             	leas	8,s
                        * 						else updateMap(map, xPos, yPos, iEMPTY);						
321d : 16001d           	lbra	_118
3220 :                  _117
3220 : 4f               	clra
3221 : 5f               	clrb
3222 : 3406             	pshs	d
3224 : e6c9fe51         	ldb	-431,u
3228 : 4f               	clra
3229 : 3406             	pshs	d
322b : e6c9fe52         	ldb	-430,u
322f : 4f               	clra
3230 : 3406             	pshs	d
3232 : 30c9fe54         	leax	-428,u
3236 : 3410             	pshs	x
3238 : 17f189           	lbsr	updateMa
323b : 3268             	leas	8,s
                        * 						xPos = nextxPos; yPos = nextyPos; // move to n
323d :                  _118
323d : e6c9fe40         	ldb	-448,u
3241 : 4f               	clra
3242 : e7c9fe52         	stb	-430,u
3246 : e6c9fe3f         	ldb	-449,u
324a : 4f               	clra
324b : e7c9fe51         	stb	-431,u
                        * 						updateMap(map, xPos, yPos, iPU2_MHB);
324f : cc0008           	ldd	#$8
3252 : 3406             	pshs	d
3254 : e6c9fe51         	ldb	-431,u
3258 : 4f               	clra
3259 : 3406             	pshs	d
325b : e6c9fe52         	ldb	-430,u
325f : 4f               	clra
3260 : 3406             	pshs	d
3262 : 30c9fe54         	leax	-428,u
3266 : 3410             	pshs	x
3268 : 17f159           	lbsr	updateMa
326b : 3268             	leas	8,s
                        * 						updateMap(map, next2xPos, next2yPos, iPU2_HB);
326d : cc0009           	ldd	#$9
3270 : 3406             	pshs	d
3272 : e6c9fe3d         	ldb	-451,u
3276 : 4f               	clra
3277 : 3406             	pshs	d
3279 : e6c9fe3e         	ldb	-450,u
327d : 4f               	clra
327e : 3406             	pshs	d
AS09 Assembler for M6809 [1.42].                                     Page   42
-------------------------------- sokobanC.a09 --------------------------------

3280 : 30c9fe54         	leax	-428,u
3284 : 3410             	pshs	x
3286 : 17f13b           	lbsr	updateMa
3289 : 3268             	leas	8,s
                        * 					}
                        * 					else {
328b : 160035           	lbra	_119
328e :                  _115
                        * 						state = standing;					// cannot push anymore
328e : 4f               	clra
328f : 5f               	clrb
3290 : e7c9fe53         	stb	-429,u
                        * 						updateRAMTile(heading, iMAN_STD);	// data cont
3294 : cc0005           	ldd	#$5
3297 : 3406             	pshs	d
3299 : e6c9fe50         	ldb	-432,u
329d : 4f               	clra
329e : 3406             	pshs	d
32a0 : 17edc1           	lbsr	updateRA
32a3 : 3264             	leas	4,s
                        * 						updateMap(map, xPos, yPos, iMAN_STD);
32a5 : cc0005           	ldd	#$5
32a8 : 3406             	pshs	d
32aa : e6c9fe51         	ldb	-431,u
32ae : 4f               	clra
32af : 3406             	pshs	d
32b1 : e6c9fe52         	ldb	-430,u
32b5 : 4f               	clra
32b6 : 3406             	pshs	d
32b8 : 30c9fe54         	leax	-428,u
32bc : 3410             	pshs	x
32be : 17f103           	lbsr	updateMa
32c1 : 3268             	leas	8,s
                        * 					}
                        * 				}
32c3 :                  _119
                        * 				if((nextTile == iEMPTY) || (nextTile == iSTORAGE
32c3 :                  _113
32c3 : e6c9fe3c         	ldb	-452,u
32c7 : 4f               	clra
32c8 : 830000           	subd	#$0
32cb : 1027000c         	lbeq	_121
32cf : e6c9fe3c         	ldb	-452,u
32d3 : 4f               	clra
32d4 : 830002           	subd	#$2
32d7 : 102600ab         	lbne	_120
32db :                  _121
                        * 					state = push2_empty;	// push the box
32db : cc0002           	ldd	#$2
32de : e7c9fe53         	stb	-429,u
                        * 					setSound(iSOUND);
32e2 : cc0005           	ldd	#$5
32e5 : 3406             	pshs	d
32e7 : 17bfa0           	lbsr	setSound
32ea : 3262             	leas	2,s
                        * 					i = yPos*SCREEN_COL + xPos;
32ec : e6c9fe52         	ldb	-430,u
32f0 : 4f               	clra
32f1 : 3406             	pshs	d
32f3 : cc0015           	ldd	#$15
32f6 : 3406             	pshs	d
32f8 : e6c9fe51         	ldb	-431,u
AS09 Assembler for M6809 [1.42].                                     Page   43
-------------------------------- sokobanC.a09 --------------------------------

32fc : 4f               	clra
32fd : 3510             	puls	x
32ff : 1702a4           	lbsr	_00001
3302 : e3e1             	addd	,s++
3304 : edc9fe44         	std	-444,u
                        * 					if (SOKOmap_L1[i] == iSTORAGE) updateMap(map, x
3308 : ecc9fe44         	ldd	-444,u
330c : ae58             	ldx	-8,u
330e : e68b             	ldb	d,x
3310 : 4f               	clra
3311 : 830002           	subd	#$2
3314 : 10260021         	lbne	_122
3318 : cc0002           	ldd	#$2
331b : 3406             	pshs	d
331d : e6c9fe51         	ldb	-431,u
3321 : 4f               	clra
3322 : 3406             	pshs	d
3324 : e6c9fe52         	ldb	-430,u
3328 : 4f               	clra
3329 : 3406             	pshs	d
332b : 30c9fe54         	leax	-428,u
332f : 3410             	pshs	x
3331 : 17f090           	lbsr	updateMa
3334 : 3268             	leas	8,s
                        * 					else updateMap(map, xPos, yPos, iEMPTY);
3336 : 16001d           	lbra	_123
3339 :                  _122
3339 : 4f               	clra
333a : 5f               	clrb
333b : 3406             	pshs	d
333d : e6c9fe51         	ldb	-431,u
3341 : 4f               	clra
3342 : 3406             	pshs	d
3344 : e6c9fe52         	ldb	-430,u
3348 : 4f               	clra
3349 : 3406             	pshs	d
334b : 30c9fe54         	leax	-428,u
334f : 3410             	pshs	x
3351 : 17f070           	lbsr	updateMa
3354 : 3268             	leas	8,s
                        * 					xPos = nextxPos; yPos = nextyPos; // move to ne
3356 :                  _123
3356 : e6c9fe40         	ldb	-448,u
335a : 4f               	clra
335b : e7c9fe52         	stb	-430,u
335f : e6c9fe3f         	ldb	-449,u
3363 : 4f               	clra
3364 : e7c9fe51         	stb	-431,u
                        * 					updateMap(map, xPos, yPos, iPU2_MAN);				
3368 : cc0007           	ldd	#$7
336b : 3406             	pshs	d
336d : e6c9fe51         	ldb	-431,u
3371 : 4f               	clra
3372 : 3406             	pshs	d
3374 : e6c9fe52         	ldb	-430,u
3378 : 4f               	clra
3379 : 3406             	pshs	d
337b : 30c9fe54         	leax	-428,u
337f : 3410             	pshs	x
3381 : 17f040           	lbsr	updateMa
3384 : 3268             	leas	8,s
                        * 				}				
AS09 Assembler for M6809 [1.42].                                     Page   44
-------------------------------- sokobanC.a09 --------------------------------

                        * 				key = 0;	// move lock end				
3386 :                  _120
3386 : 4f               	clra
3387 : 5f               	clrb
3388 : e7c9fe4f         	stb	-433,u
                        * 				msDelay(PACE);	// execution sync
338c : cc0023           	ldd	#$23
338f : 3406             	pshs	d
3391 : 17bf4a           	lbsr	msDelay
3394 : 3262             	leas	2,s
                        * 				break;
3396 : 160206           	lbra	_102
                        * 			}
                        * 		case push2_empty:
                        * 			if (key != 0) {
3399 :                  _111
3399 : 10830002         	cmpd	#$2
339d : 10260096         	lbne	_125
33a1 :                  _124
33a1 : e6c9fe4f         	ldb	-433,u
33a5 : 4f               	clra
33a6 : 830000           	subd	#$0
33a9 : 10270028         	lbeq	_126
                        * 				state = push1;	// prepare to move to the next fi
33ad : cc0001           	ldd	#$1
33b0 : e7c9fe53         	stb	-429,u
                        * 				updateMap(map, xPos, yPos, iPU1);				
33b4 : cc0006           	ldd	#$6
33b7 : 3406             	pshs	d
33b9 : e6c9fe51         	ldb	-431,u
33bd : 4f               	clra
33be : 3406             	pshs	d
33c0 : e6c9fe52         	ldb	-430,u
33c4 : 4f               	clra
33c5 : 3406             	pshs	d
33c7 : 30c9fe54         	leax	-428,u
33cb : 3410             	pshs	x
33cd : 17eff4           	lbsr	updateMa
33d0 : 3268             	leas	8,s
                        * 			}
                        * 			else {
33d2 : 160035           	lbra	_127
33d5 :                  _126
                        * 				state = standing;	// stop moving
33d5 : 4f               	clra
33d6 : 5f               	clrb
33d7 : e7c9fe53         	stb	-429,u
                        * 				updateRAMTile(heading, iMAN_STD);	// data contai
33db : cc0005           	ldd	#$5
33de : 3406             	pshs	d
33e0 : e6c9fe50         	ldb	-432,u
33e4 : 4f               	clra
33e5 : 3406             	pshs	d
33e7 : 17ec7a           	lbsr	updateRA
33ea : 3264             	leas	4,s
                        * 				updateMap(map, xPos, yPos, iMAN_STD);
33ec : cc0005           	ldd	#$5
33ef : 3406             	pshs	d
33f1 : e6c9fe51         	ldb	-431,u
33f5 : 4f               	clra
33f6 : 3406             	pshs	d
33f8 : e6c9fe52         	ldb	-430,u
AS09 Assembler for M6809 [1.42].                                     Page   45
-------------------------------- sokobanC.a09 --------------------------------

33fc : 4f               	clra
33fd : 3406             	pshs	d
33ff : 30c9fe54         	leax	-428,u
3403 : 3410             	pshs	x
3405 : 17efbc           	lbsr	updateMa
3408 : 3268             	leas	8,s
                        * 			}
                        * 			moveStr[0]++; printScoreboard(moveStr, pushStr);
340a :                  _127
340a : 30c9fe46         	leax	-442,u
340e : e684             	ldb	,x
3410 : 6c84             	inc	,x
3412 : 4f               	clra
3413 : 30c9fe4a         	leax	-438,u
3417 : 3410             	pshs	x
3419 : 30c9fe46         	leax	-442,u
341d : 3410             	pshs	x
341f : 17f059           	lbsr	printSco
3422 : 3264             	leas	4,s
                        * 			undo = false;
3424 : 4f               	clra
3425 : 5f               	clrb
3426 : e7c9fe4e         	stb	-434,u
                        * 			msDelay(PACE);	// execution sync			
342a : cc0023           	ldd	#$23
342d : 3406             	pshs	d
342f : 17beac           	lbsr	msDelay
3432 : 3262             	leas	2,s
                        * 			break;
3434 : 160168           	lbra	_102
                        * 		case push2_box:
                        * 			if (key != 0) {
3437 :                  _125
3437 : 10830003         	cmpd	#$3
343b : 10260160         	lbne	_129
343f :                  _128
343f : e6c9fe4f         	ldb	-433,u
3443 : 4f               	clra
3444 : 830000           	subd	#$0
3447 : 10270028         	lbeq	_130
                        * 				state = push1;	// keep pushing box through next 
344b : cc0001           	ldd	#$1
344e : e7c9fe53         	stb	-429,u
                        * 				updateMap(map, xPos, yPos, iPU1);
3452 : cc0006           	ldd	#$6
3455 : 3406             	pshs	d
3457 : e6c9fe51         	ldb	-431,u
345b : 4f               	clra
345c : 3406             	pshs	d
345e : e6c9fe52         	ldb	-430,u
3462 : 4f               	clra
3463 : 3406             	pshs	d
3465 : 30c9fe54         	leax	-428,u
3469 : 3410             	pshs	x
346b : 17ef56           	lbsr	updateMa
346e : 3268             	leas	8,s
                        * 			}
                        * 			else {
3470 : 160035           	lbra	_131
3473 :                  _130
                        * 				updateRAMTile(heading, iMAN_STD);	// data contai
3473 : cc0005           	ldd	#$5
AS09 Assembler for M6809 [1.42].                                     Page   46
-------------------------------- sokobanC.a09 --------------------------------

3476 : 3406             	pshs	d
3478 : e6c9fe50         	ldb	-432,u
347c : 4f               	clra
347d : 3406             	pshs	d
347f : 17ebe2           	lbsr	updateRA
3482 : 3264             	leas	4,s
                        * 				state = standing;
3484 : 4f               	clra
3485 : 5f               	clrb
3486 : e7c9fe53         	stb	-429,u
                        * 				updateMap(map, xPos, yPos, iMAN_STD);
348a : cc0005           	ldd	#$5
348d : 3406             	pshs	d
348f : e6c9fe51         	ldb	-431,u
3493 : 4f               	clra
3494 : 3406             	pshs	d
3496 : e6c9fe52         	ldb	-430,u
349a : 4f               	clra
349b : 3406             	pshs	d
349d : 30c9fe54         	leax	-428,u
34a1 : 3410             	pshs	x
34a3 : 17ef1e           	lbsr	updateMa
34a6 : 3268             	leas	8,s
                        * 			}
                        * 			i = nextyPos*SCREEN_COL + nextxPos;
34a8 :                  _131
34a8 : e6c9fe40         	ldb	-448,u
34ac : 4f               	clra
34ad : 3406             	pshs	d
34af : cc0015           	ldd	#$15
34b2 : 3406             	pshs	d
34b4 : e6c9fe3f         	ldb	-449,u
34b8 : 4f               	clra
34b9 : 3510             	puls	x
34bb : 1700e8           	lbsr	_00001
34be : e3e1             	addd	,s++
34c0 : edc9fe44         	std	-444,u
                        * 			if (SOKOmap_L1[i] == iSTORAGE) {
34c4 : ecc9fe44         	ldd	-444,u
34c8 : ae58             	ldx	-8,u
34ca : e68b             	ldb	d,x
34cc : 4f               	clra
34cd : 830002           	subd	#$2
34d0 : 10260076         	lbne	_132
                        * 				updateMap(map, nextxPos, nextyPos, iSTO_BOX); //
34d4 : cc0004           	ldd	#$4
34d7 : 3406             	pshs	d
34d9 : e6c9fe3f         	ldb	-449,u
34dd : 4f               	clra
34de : 3406             	pshs	d
34e0 : e6c9fe40         	ldb	-448,u
34e4 : 4f               	clra
34e5 : 3406             	pshs	d
34e7 : 30c9fe54         	leax	-428,u
34eb : 3410             	pshs	x
34ed : 17eed4           	lbsr	updateMa
34f0 : 3268             	leas	8,s
                        * 				// check if all boxes are stored
                        * 				i = 0;
34f2 : 4f               	clra
34f3 : 5f               	clrb
34f4 : edc9fe44         	std	-444,u
AS09 Assembler for M6809 [1.42].                                     Page   47
-------------------------------- sokobanC.a09 --------------------------------

                        * 				while ((i < MAP_SIZE) && (map[i] != iBOX)) { i++
34f8 :                  _134
34f8 : ecc9fe44         	ldd	-444,u
34fc : 8301a4           	subd	#$1a4
34ff : 10240023         	lbhs	_133
3503 : ecc9fe44         	ldd	-444,u
3507 : 30c9fe54         	leax	-428,u
350b : e68b             	ldb	d,x
350d : 4f               	clra
350e : 830003           	subd	#$3
3511 : 10270011         	lbeq	_133
3515 : ecc9fe44         	ldd	-444,u
3519 : c30001           	addd	#$1
351c : edc9fe44         	std	-444,u
3520 : 830001           	subd	#$1
3523 : 16ffd2           	lbra	_134
3526 :                  _133
                        * 				if (i == MAP_SIZE) {
3526 : ecc9fe44         	ldd	-444,u
352a : 8301a4           	subd	#$1a4
352d : 10260016         	lbne	_135
                        * 					sendString(6, 10, gameEnded);
3531 : ec5a             	ldd	-6,u
3533 : 3406             	pshs	d
3535 : cc000a           	ldd	#$a
3538 : 3406             	pshs	d
353a : cc0006           	ldd	#$6
353d : 3406             	pshs	d
353f : 17eee1           	lbsr	sendStri
3542 : 3266             	leas	6,s
                        * 					while(1); // stop here
3544 :                  _137
3544 : 16fffd           	lbra	_137
                        * 				}
3547 :                  _136
                        * 			}
3547 :                  _135
                        * 			else updateMap(map, nextxPos, nextyPos, iBOX);
3547 : 16001e           	lbra	_138
354a :                  _132
354a : cc0003           	ldd	#$3
354d : 3406             	pshs	d
354f : e6c9fe3f         	ldb	-449,u
3553 : 4f               	clra
3554 : 3406             	pshs	d
3556 : e6c9fe40         	ldb	-448,u
355a : 4f               	clra
355b : 3406             	pshs	d
355d : 30c9fe54         	leax	-428,u
3561 : 3410             	pshs	x
3563 : 17ee5e           	lbsr	updateMa
3566 : 3268             	leas	8,s
                        * 			moveStr[0]++; pushStr[0]++; printScoreboard(moveS
3568 :                  _138
3568 : 30c9fe46         	leax	-442,u
356c : e684             	ldb	,x
356e : 6c84             	inc	,x
3570 : 4f               	clra
3571 : 30c9fe4a         	leax	-438,u
3575 : e684             	ldb	,x
3577 : 6c84             	inc	,x
3579 : 4f               	clra
AS09 Assembler for M6809 [1.42].                                     Page   48
-------------------------------- sokobanC.a09 --------------------------------

357a : 30c9fe4a         	leax	-438,u
357e : 3410             	pshs	x
3580 : 30c9fe46         	leax	-442,u
3584 : 3410             	pshs	x
3586 : 17eef2           	lbsr	printSco
3589 : 3264             	leas	4,s
                        * 			undo = true;			
358b : cc0001           	ldd	#$1
358e : e7c9fe4e         	stb	-434,u
                        * 			msDelay(PACE);	// execution sync			
3592 : cc0023           	ldd	#$23
3595 : 3406             	pshs	d
3597 : 17bd44           	lbsr	msDelay
359a : 3262             	leas	2,s
                        * 			break;
359c : 160000           	lbra	_102
                        * 		}
                        * 	}
359f :                  _129
359f :                  _102
                        * }
359f : 16f356           	lbra	_49
35a2 :                  _48
35a2 : 32c4             	leas	,u
35a4 : 35c0             	puls	u,pc
                        * 
0000 =                  _GLOBALS	equ	0
                        
                        *
                        * micro-c driver under flex
                        *
                        *	12-dec-81	m.ohta,h.tezuka
                        *
                        
35a6 : 3436             _00001	pshs	d,x,y		;multiply	
35a8 : a6e4             		lda	,s
35aa : e663             		ldb	3,s
35ac : 3d               		mul
35ad : e764             		stb	4,s		
35af : ec61             		ldd	1,s
35b1 : 3d               		mul
35b2 : e765             		stb	5,s		
35b4 : a661             		lda	1,s
35b6 : e663             		ldb	3,s
35b8 : 3d               		mul
35b9 : ab64             		adda	4,s
35bb : ab65             		adda	5,s		
35bd : 3266             		leas	6,s
35bf : 39               		rts
                        
35c0 : 6fe2             _00002	clr	,-s				; signed divide	
35c2 : 8c0000           		cmpx	#0
35c5 : 2a09             		bpl	_02000		
35c7 : 63e4             		com	,s		
35c9 : 1e01             		exg	d,x
35cb : 170095           		lbsr	_00020
35ce : 1e01             		exg	d,x
35d0 : 4d               _02000	tsta
35d1 : 2a05             		bpl	_02001		
35d3 : 63e4             		com	,s		
35d5 : 17008b           		lbsr	_00020	
35d8 : 17008d           _02001	lbsr	_00010
AS09 Assembler for M6809 [1.42].                                     Page   49
-------------------------------- sokobanC.a09 --------------------------------

35db : 1f10             		tfr	x,d
35dd : 6de0             		tst	,s+
35df : 2a03             		bpl	_02002		
35e1 : 17007f           		lbsr	_00020	
35e4 : 39               _02002	rts
                        
35e5 : 170080           _00003	lbsr	_00010		; unsigned divide
35e8 : 1f10             		tfr	x,d
35ea : 39               		rts
                        
35eb : 6fe2             _00004	clr	,-s				; signed modulous	
35ed : 8c0000           		cmpx	#0
35f0 : 2a06             		bpl	_04000		
35f2 : 1e01             		exg	d,x
35f4 : 8d6d             		bsr	_00020
35f6 : 1e01             		exg	d,x
35f8 : 4d               _04000	tsta
35f9 : 2a04             		bpl	_04001		
35fb : 63e4             		com	,s
35fd : 8d64             		bsr	_00020	
35ff : 8d67             _04001	bsr	_00010	
3601 : 6de0             		tst	,s+
3603 : 2a02             		bpl	_04002		
3605 : 8d5c             		bsr	_00020	
3607 : 39               _04002	rts
                        
3608 : 8d5e             _00005	bsr	_00010		; unsigned modulous
360a : 39               		rts
                        
360b : 8c0000           _00006	cmpx	#0		; signed left shift
360e : 2b08             		bmi	_06001 
3610 : 270e             _06000	beq	_06009
3612 : 58               		lslb
3613 : 49               		rola
3614 : 301f             		leax	-1,x
3616 : 20f8             		bra	_06000	
3618 : 2706             _06001	beq	_06009
361a : 47               		asra
361b : 56               		rorb
361c : 3001             		leax	1,x
361e : 20f8             		bra	_06001	
3620 : 39               _06009	rts
                        
3621 : 8c0000           _00007	cmpx	#0		; unsined left shift
3624 : 2b08             		bmi	_07001	
3626 : 270e             _07000	beq	_07009
3628 : 58               		lslb
3629 : 49               		rola
362a : 301f             		leax	-1,x
362c : 20f8             		bra	_07000	
362e : 2706             _07001	beq	_07009
3630 : 44               		lsra
3631 : 56               		rorb
3632 : 3001             		leax	1,x
3634 : 20f8             		bra	_07001	
3636 : 39               _07009	rts
                        
3637 : 8c0000           _00008	cmpx	#0		; signed right shift
363a : 2b08             		bmi	_08001	
363c : 270e             _08000	beq	_08009
363e : 47               		asra
363f : 56               		rorb
AS09 Assembler for M6809 [1.42].                                     Page   50
-------------------------------- sokobanC.a09 --------------------------------

3640 : 301f             		leax	-1,x
3642 : 20f8             		bra	_08000
                        	
3644 : 2706             _08001	beq	_08009
3646 : 58               		lslb
3647 : 49               		rola
3648 : 3001             		leax	1,x
364a : 20f8             		bra	_08001	
364c : 39               _08009	rts
                        
364d : 8c0000           _00009	cmpx	#0		; unsined right shift
3650 : 2b08             		bmi	_09001	
3652 : 270e             _09000	beq	_09009
3654 : 44               		lsra
3655 : 56               		rorb
3656 : 301f             		leax	-1,x
3658 : 20f8             		bra	_09000	
365a : 2706             _09001	beq	_09009
365c : 58               		lslb
365d : 49               		rola
365e : 3001             		leax	1,x
3660 : 20f8             		bra	_09001	
3662 : 39               _09009	rts
                        
3663 : 40               _00020	nega			;negate d reg
3664 : 50               		negb
3665 : 8200             		sbca	#0
3667 : 39               		rts
                        
3668 : 3416             _00010	pshs	d,x		;divide subroutine	
366a : 4f               		clra
366b : 5f               		clrb	
366c : 8e0011           		ldx	#17
                        	
366f : a362             _00011	subd	2,s
3671 : 2402             		bcc	_00012	
3673 : e362             		addd	2,s
                        	
3675 : 6961             _00012	rol	1,s
3677 : 69e4             		rol	,s
3679 : 59               		rolb
367a : 49               		rola	
367b : 301f             		leax	-1,x
367d : 26f0             		bne	_00011	
367f : 46               		rora
3680 : 56               		rorb	
3681 : 6361             		com	1,s
3683 : 63e4             		com	,s
3685 : 3510             		puls	x	
3687 : 3262             		leas	2,s
3689 : 39               		rts
                        
                        
                        
                        							; reversed order: at -1,y begins the C GV
0000 =                  sGV_IndexBegin		equ		-_GLOBALS				; GV used in the C c
fffe =                  CallBackAddr		equ		sGV_IndexBegin-2		; word variable f
0002 =                  GV_Size				equ		-CallBackAddr
                        
                        ;----------------- asm resources ROM 1.5.0.0 ---------
d000 =                  UART				equ		$d000
000d =                  CR        			equ  	$0d             	; carriage return
AS09 Assembler for M6809 [1.42].                                     Page   51
-------------------------------- sokobanC.a09 --------------------------------

f635 =                  sMONITORSTART 		equ 	$f635
fe17 =                  BYTE2MON			equ		$fe17
fdf7 =                  HEXBYTE2			equ		$fdf7
f32a =                  waitSendDone		equ		$f32a
f332 =                  waitCTS				equ		$f332
                        
f121 =                  APL_OutputStream	equ		$f121
f121 =                  APL_Outp			equ		APL_OutputStream
fdb3 =                  PUTSTR				equ		$fdb3
f69f =                  sMonProcessCmd 		equ		$f69f
                        
f2a7 =                  sendCont			equ		$f2a7
f226 =                  setpoint			equ		$f226
f24a =                  setTile				equ		$f24a
f28a =                  setSound			equ		$f28a
                        
f1be =                  isKeyboa			equ		$f1be
f1a1 =                  getKeybo			equ		$f1a1
f2de =                  msDelay				equ		$f2de
                        
0008 =                  KeyboardRbSize		equ     $8
7fe4 =                  KeyboardRbHead		equ		$7fe4
7fe5 =                  KeyboardRbTail     	equ		$7fe5
7fe6 =                  KeyboardRbuffer		equ		$7fe6
                        
                        ;-----------------------------------------------------
                        
                        					end
No errors in pass 2.
